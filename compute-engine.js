/** CortexJS Compute Engine 0.6.0 */
!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).ComputeEngine={})}(this,(function(e){function i(e){return!("kind"in e)||"symbol"===e.kind}function t(e){return"kind"in e&&"matchfix"===e.kind}function n(e){return"kind"in e&&"infix"===e.kind}function r(e){return"kind"in e&&"prefix"===e.kind}function s(e){return"kind"in e&&"postfix"===e.kind}function a(e){return"kind"in e&&"environment"===e.kind}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l={exports:{}};!function(e){!function(i){var t,n,r,s,a=9e15,o=1e9,l="0123456789abcdef",u="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",c="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-a,maxE:a,crypto:!1},m=!0,d="[DecimalError] ",f=d+"Invalid argument: ",g=d+"Precision limit exceeded",p=d+"crypto unavailable",v="[object Decimal]",b=Math.floor,y=Math.pow,N=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,x=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,S=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,w=1e7,E=u.length-1,I=c.length-1,k={toStringTag:v};function A(e){var i,t,n,r=e.length-1,s="",a=e[0];if(r>0){for(s+=a,i=1;i<r;i++)(t=7-(n=e[i]+"").length)&&(s+=z(t)),s+=n;(t=7-(n=(a=e[i])+"").length)&&(s+=z(t))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function M(e,i,t){if(e!==~~e||e<i||e>t)throw Error(f+e)}function O(e,i,t,n){var r,s,a,o;for(s=e[0];s>=10;s/=10)--i;return--i<0?(i+=7,r=0):(r=Math.ceil((i+1)/7),i%=7),s=y(10,7-i),o=e[r]%s|0,null==n?i<3?(0==i?o=o/100|0:1==i&&(o=o/10|0),a=t<4&&99999==o||t>3&&49999==o||5e4==o||0==o):a=(t<4&&o+1==s||t>3&&o+1==s/2)&&(e[r+1]/s/100|0)==y(10,i-2)-1||(o==s/2||0==o)&&0==(e[r+1]/s/100|0):i<4?(0==i?o=o/1e3|0:1==i?o=o/100|0:2==i&&(o=o/10|0),a=(n||t<4)&&9999==o||!n&&t>3&&4999==o):a=((n||t<4)&&o+1==s||!n&&t>3&&o+1==s/2)&&(e[r+1]/s/1e3|0)==y(10,i-3)-1,a}function F(e,i,t){for(var n,r,s=[0],a=0,o=e.length;a<o;){for(r=s.length;r--;)s[r]*=i;for(s[0]+=l.indexOf(e.charAt(a++)),n=0;n<s.length;n++)s[n]>t-1&&(void 0===s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/t|0,s[n]%=t)}return s.reverse()}k.absoluteValue=k.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),V(e)},k.ceil=function(){return V(new this.constructor(this),this.e+1,2)},k.clampedTo=k.clamp=function(e,i){var t=this,n=t.constructor;if(e=new n(e),i=new n(i),!e.s||!i.s)return new n(NaN);if(e.gt(i))throw Error(f+i);return t.cmp(e)<0?e:t.cmp(i)>0?i:new n(t)},k.comparedTo=k.cmp=function(e){var i,t,n,r,s=this,a=s.d,o=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!a||!o)return l&&u?l!==u?l:a===o?0:!a^l<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(i=0,t=(n=a.length)<(r=o.length)?n:r;i<t;++i)if(a[i]!==o[i])return a[i]>o[i]^l<0?1:-1;return n===r?0:n>r^l<0?1:-1},k.cosine=k.cos=function(){var e,i,t=this,n=t.constructor;return t.d?t.d[0]?(e=n.precision,i=n.rounding,n.precision=e+Math.max(t.e,t.sd())+7,n.rounding=1,t=function(e,i){var t,n,r;if(i.isZero())return i;(n=i.d.length)<32?r=""+1/U(4,t=Math.ceil(n/3)):(t=16,r="2.3283064365386962890625e-10"),e.precision+=t,i=Q(e,1,i.times(r),new e(1));for(var s=t;s--;){var a=i.times(i);i=a.times(a).minus(a).times(8).plus(1)}return e.precision-=t,i}(n,K(n,t)),n.precision=e,n.rounding=i,V(2==s||3==s?t.neg():t,e,i,!0)):new n(1):new n(NaN)},k.cubeRoot=k.cbrt=function(){var e,i,t,n,r,s,a,o,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(m=!1,(s=c.s*y(c.s*c,1/3))&&Math.abs(s)!=1/0?n=new h(s.toString()):(t=A(c.d),(s=((e=c.e)-t.length+1)%3)&&(t+=1==s||-2==s?"0":"00"),s=y(t,1/3),e=b((e+1)/3)-(e%3==(e<0?-1:2)),(n=new h(t=s==1/0?"5e"+e:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+e)).s=c.s),a=(e=h.precision)+3;;)if(u=(l=(o=n).times(o).times(o)).plus(c),n=q(u.plus(c).times(o),u.plus(l),a+2,1),A(o.d).slice(0,a)===(t=A(n.d)).slice(0,a)){if("9999"!=(t=t.slice(a-3,a+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(V(n,e+1,1),i=!n.times(n).times(n).eq(c));break}if(!r&&(V(o,e+1,0),o.times(o).times(o).eq(c))){n=o;break}a+=4,r=1}return m=!0,V(n,e,h.rounding,i)},k.decimalPlaces=k.dp=function(){var e,i=this.d,t=NaN;if(i){if(t=7*((e=i.length-1)-b(this.e/7)),e=i[e])for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t},k.dividedBy=k.div=function(e){return q(this,new this.constructor(e))},k.dividedToIntegerBy=k.divToInt=function(e){var i=this.constructor;return V(q(this,new i(e),0,1,1),i.precision,i.rounding)},k.equals=k.eq=function(e){return 0===this.cmp(e)},k.floor=function(){return V(new this.constructor(this),this.e+1,3)},k.greaterThan=k.gt=function(e){return this.cmp(e)>0},k.greaterThanOrEqualTo=k.gte=function(e){var i=this.cmp(e);return 1==i||0===i},k.hyperbolicCosine=k.cosh=function(){var e,i,t,n,r,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;t=a.precision,n=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,(r=s.d.length)<32?i=""+1/U(4,e=Math.ceil(r/3)):(e=16,i="2.3283064365386962890625e-10"),s=Q(a,1,s.times(i),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return V(s,a.precision=t,a.rounding=n,!0)},k.hyperbolicSine=k.sinh=function(){var e,i,t,n,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(i=s.precision,t=s.rounding,s.precision=i+Math.max(r.e,r.sd())+4,s.rounding=1,(n=r.d.length)<3)r=Q(s,2,r,r,!0);else{e=(e=1.4*Math.sqrt(n))>16?16:0|e,r=Q(s,2,r=r.times(1/U(5,e)),r,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);e--;)a=r.times(r),r=r.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=i,s.rounding=t,V(r,i,t,!0)},k.hyperbolicTangent=k.tanh=function(){var e,i,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,i=n.rounding,n.precision=e+7,n.rounding=1,q(t.sinh(),t.cosh(),n.precision=e,n.rounding=i)):new n(t.s)},k.inverseCosine=k.acos=function(){var e,i=this,t=i.constructor,n=i.abs().cmp(1),r=t.precision,s=t.rounding;return-1!==n?0===n?i.isNeg()?L(t,r,s):new t(0):new t(NaN):i.isZero()?L(t,r+4,s).times(.5):(t.precision=r+6,t.rounding=1,i=i.asin(),e=L(t,r+4,s).times(.5),t.precision=r,t.rounding=s,e.minus(i))},k.inverseHyperbolicCosine=k.acosh=function(){var e,i,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(e=n.precision,i=n.rounding,n.precision=e+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,m=!1,t=t.times(t).minus(1).sqrt().plus(t),m=!0,n.precision=e,n.rounding=i,t.ln()):new n(t)},k.inverseHyperbolicSine=k.asinh=function(){var e,i,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(e=n.precision,i=n.rounding,n.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,m=!1,t=t.times(t).plus(1).sqrt().plus(t),m=!0,n.precision=e,n.rounding=i,t.ln())},k.inverseHyperbolicTangent=k.atanh=function(){var e,i,t,n,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=s.precision,i=s.rounding,n=r.sd(),Math.max(n,e)<2*-r.e-1?V(new s(r),e,i,!0):(s.precision=t=n-r.e,r=q(r.plus(1),new s(1).minus(r),t+e,1),s.precision=e+4,s.rounding=1,r=r.ln(),s.precision=e,s.rounding=i,r.times(.5))):new s(NaN)},k.inverseSine=k.asin=function(){var e,i,t,n,r=this,s=r.constructor;return r.isZero()?new s(r):(i=r.abs().cmp(1),t=s.precision,n=s.rounding,-1!==i?0===i?((e=L(s,t+4,n).times(.5)).s=r.s,e):new s(NaN):(s.precision=t+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,r.times(2)))},k.inverseTangent=k.atan=function(){var e,i,t,n,r,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=I)return(a=L(c,h+4,d).times(.25)).s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=I)return(a=L(c,h+4,d).times(.5)).s=u.s,a}for(c.precision=o=h+10,c.rounding=1,e=t=Math.min(28,o/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(m=!1,i=Math.ceil(o/7),n=1,l=u.times(u),a=new c(u),r=u;-1!==e;)if(r=r.times(l),s=a.minus(r.div(n+=2)),r=r.times(l),void 0!==(a=s.plus(r.div(n+=2))).d[i])for(e=i;a.d[e]===s.d[e]&&e--;);return t&&(a=a.times(2<<t-1)),m=!0,V(a,c.precision=h,c.rounding=d,!0)},k.isFinite=function(){return!!this.d},k.isInteger=k.isInt=function(){return!!this.d&&b(this.e/7)>this.d.length-2},k.isNaN=function(){return!this.s},k.isNegative=k.isNeg=function(){return this.s<0},k.isPositive=k.isPos=function(){return this.s>0},k.isZero=function(){return!!this.d&&0===this.d[0]},k.lessThan=k.lt=function(e){return this.cmp(e)<0},k.lessThanOrEqualTo=k.lte=function(e){return this.cmp(e)<1},k.logarithm=k.log=function(e){var i,t,n,r,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(null==e)e=new c(10),i=!0;else{if(t=(e=new c(e)).d,e.s<0||!t||!t[0]||e.eq(1))return new c(NaN);i=e.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:1!=u.s?NaN:t?0:1/0);if(i)if(t.length>1)s=!0;else{for(r=t[0];r%10==0;)r/=10;s=1!==r}if(m=!1,a=G(u,o=h+5),n=i?D(c,o+10):G(e,o),O((l=q(a,n,o,1)).d,r=h,d))do{if(a=G(u,o+=10),n=i?D(c,o+10):G(e,o),l=q(a,n,o,1),!s){+A(l.d).slice(r+1,r+15)+1==1e14&&(l=V(l,h+1,0));break}}while(O(l.d,r+=10,d));return m=!0,V(l,h,d)},k.minus=k.sub=function(e){var i,t,n,r,s,a,o,l,u,c,h,d,f=this,g=f.constructor;if(e=new g(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new g(e.d||f.s!==e.s?f:NaN):e=new g(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(u=f.d,d=e.d,o=g.precision,l=g.rounding,!u[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!u[0])return new g(3===l?-0:0);e=new g(f)}return m?V(e,o,l):e}if(t=b(e.e/7),c=b(f.e/7),u=u.slice(),s=c-t){for((h=s<0)?(i=u,s=-s,a=d.length):(i=d,t=c,a=u.length),s>(n=Math.max(Math.ceil(o/7),a)+2)&&(s=n,i.length=1),i.reverse(),n=s;n--;)i.push(0);i.reverse()}else{for((h=(n=u.length)<(a=d.length))&&(a=n),n=0;n<a;n++)if(u[n]!=d[n]){h=u[n]<d[n];break}s=0}for(h&&(i=u,u=d,d=i,e.s=-e.s),a=u.length,n=d.length-a;n>0;--n)u[a++]=0;for(n=d.length;n>s;){if(u[--n]<d[n]){for(r=n;r&&0===u[--r];)u[r]=w-1;--u[r],u[n]+=w}u[n]-=d[n]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--t;return u[0]?(e.d=u,e.e=C(u,t),m?V(e,o,l):e):new g(3===l?-0:0)},k.modulo=k.mod=function(e){var i,t=this,n=t.constructor;return e=new n(e),!t.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||t.d&&!t.d[0]?V(new n(t),n.precision,n.rounding):(m=!1,9==n.modulo?(i=q(t,e.abs(),0,3,1)).s*=e.s:i=q(t,e,0,n.modulo,1),i=i.times(e),m=!0,t.minus(i))},k.naturalExponential=k.exp=function(){return Z(this)},k.naturalLogarithm=k.ln=function(){return G(this)},k.negated=k.neg=function(){var e=new this.constructor(this);return e.s=-e.s,V(e)},k.plus=k.add=function(e){var i,t,n,r,s,a,o,l,u,c,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new d(e.d||h.s===e.s?h:NaN)):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(u=h.d,c=e.d,o=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(e=new d(h)),m?V(e,o,l):e;if(s=b(h.e/7),n=b(e.e/7),u=u.slice(),r=s-n){for(r<0?(t=u,r=-r,a=c.length):(t=c,n=s,a=u.length),r>(a=(s=Math.ceil(o/7))>a?s+1:a+1)&&(r=a,t.length=1),t.reverse();r--;)t.push(0);t.reverse()}for((a=u.length)-(r=c.length)<0&&(r=a,t=c,c=u,u=t),i=0;r;)i=(u[--r]=u[r]+c[r]+i)/w|0,u[r]%=w;for(i&&(u.unshift(i),++n),a=u.length;0==u[--a];)u.pop();return e.d=u,e.e=C(u,n),m?V(e,o,l):e},k.precision=k.sd=function(e){var i,t=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(f+e);return t.d?(i=T(t.d),e&&t.e+1>i&&(i=t.e+1)):i=NaN,i},k.round=function(){var e=this,i=e.constructor;return V(new i(e),e.e+1,i.rounding)},k.sine=k.sin=function(){var e,i,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,i=n.rounding,n.precision=e+Math.max(t.e,t.sd())+7,n.rounding=1,t=function(e,i){var t,n=i.d.length;if(n<3)return i.isZero()?i:Q(e,2,i,i);t=(t=1.4*Math.sqrt(n))>16?16:0|t,i=Q(e,2,i=i.times(1/U(5,t)),i);for(var r,s=new e(5),a=new e(16),o=new e(20);t--;)r=i.times(i),i=i.times(s.plus(r.times(a.times(r).minus(o))));return i}(n,K(n,t)),n.precision=e,n.rounding=i,V(s>2?t.neg():t,e,i,!0)):new n(NaN)},k.squareRoot=k.sqrt=function(){var e,i,t,n,r,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(1!==u||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(m=!1,0==(u=Math.sqrt(+a))||u==1/0?(((i=A(o)).length+l)%2==0&&(i+="0"),u=Math.sqrt(i),l=b((l+1)/2)-(l<0||l%2),n=new c(i=u==1/0?"5e"+l:(i=u.toExponential()).slice(0,i.indexOf("e")+1)+l)):n=new c(u.toString()),t=(l=c.precision)+3;;)if(n=(s=n).plus(q(a,s,t+2,1)).times(.5),A(s.d).slice(0,t)===(i=A(n.d)).slice(0,t)){if("9999"!=(i=i.slice(t-3,t+1))&&(r||"4999"!=i)){+i&&(+i.slice(1)||"5"!=i.charAt(0))||(V(n,l+1,1),e=!n.times(n).eq(a));break}if(!r&&(V(s,l+1,0),s.times(s).eq(a))){n=s;break}t+=4,r=1}return m=!0,V(n,l,c.rounding,e)},k.tangent=k.tan=function(){var e,i,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,i=n.rounding,n.precision=e+10,n.rounding=1,(t=t.sin()).s=1,t=q(t,new n(1).minus(t.times(t)).sqrt(),e+10,0),n.precision=e,n.rounding=i,V(2==s||4==s?t.neg():t,e,i,!0)):new n(NaN)},k.times=k.mul=function(e){var i,t,n,r,s,a,o,l,u,c=this,h=c.constructor,d=c.d,f=(e=new h(e)).d;if(e.s*=c.s,!(d&&d[0]&&f&&f[0]))return new h(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*e.s:e.s/0);for(t=b(c.e/7)+b(e.e/7),(l=d.length)<(u=f.length)&&(s=d,d=f,f=s,a=l,l=u,u=a),s=[],n=a=l+u;n--;)s.push(0);for(n=u;--n>=0;){for(i=0,r=l+n;r>n;)o=s[r]+f[n]*d[r-n-1]+i,s[r--]=o%w|0,i=o/w|0;s[r]=(s[r]+i)%w|0}for(;!s[--a];)s.pop();return i?++t:s.shift(),e.d=s,e.e=C(s,t),m?V(e,h.precision,h.rounding):e},k.toBinary=function(e,i){return Y(this,2,e,i)},k.toDecimalPlaces=k.toDP=function(e,i){var t=this,n=t.constructor;return t=new n(t),void 0===e?t:(M(e,0,o),void 0===i?i=n.rounding:M(i,0,8),V(t,e+t.e+1,i))},k.toExponential=function(e,i){var t,n=this,r=n.constructor;return void 0===e?t=P(n,!0):(M(e,0,o),void 0===i?i=r.rounding:M(i,0,8),t=P(n=V(new r(n),e+1,i),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+t:t},k.toFixed=function(e,i){var t,n,r=this,s=r.constructor;return void 0===e?t=P(r):(M(e,0,o),void 0===i?i=s.rounding:M(i,0,8),t=P(n=V(new s(r),e+r.e+1,i),!1,e+n.e+1)),r.isNeg()&&!r.isZero()?"-"+t:t},k.toFraction=function(e){var i,t,n,r,s,a,o,l,u,c,h,d,g=this,p=g.d,v=g.constructor;if(!p)return new v(g);if(u=t=new v(1),n=l=new v(0),a=(s=(i=new v(n)).e=T(p)-g.e-1)%7,i.d[0]=y(10,a<0?7+a:a),null==e)e=s>0?i:u;else{if(!(o=new v(e)).isInt()||o.lt(u))throw Error(f+o);e=o.gt(i)?s>0?i:u:o}for(m=!1,o=new v(A(p)),c=v.precision,v.precision=s=7*p.length*2;h=q(o,i,0,1,1),1!=(r=t.plus(h.times(n))).cmp(e);)t=n,n=r,r=u,u=l.plus(h.times(r)),l=r,r=i,i=o.minus(h.times(r)),o=r;return r=q(e.minus(t),n,0,1,1),l=l.plus(r.times(u)),t=t.plus(r.times(n)),l.s=u.s=g.s,d=q(u,n,s,1).minus(g).abs().cmp(q(l,t,s,1).minus(g).abs())<1?[u,n]:[l,t],v.precision=c,m=!0,d},k.toHexadecimal=k.toHex=function(e,i){return Y(this,16,e,i)},k.toNearest=function(e,i){var t=this,n=t.constructor;if(t=new n(t),null==e){if(!t.d)return t;e=new n(1),i=n.rounding}else{if(e=new n(e),void 0===i?i=n.rounding:M(i,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(m=!1,t=q(t,e,0,i,1).times(e),m=!0,V(t)):(e.s=t.s,t=e),t},k.toNumber=function(){return+this},k.toOctal=function(e,i){return Y(this,8,e,i)},k.toPower=k.pow=function(e){var i,t,n,r,s,a,o=this,l=o.constructor,u=+(e=new l(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new l(y(+o,u));if((o=new l(o)).eq(1))return o;if(n=l.precision,s=l.rounding,e.eq(1))return V(o,n,s);if((i=b(e.e/7))>=e.d.length-1&&(t=u<0?-u:u)<=9007199254740991)return r=R(l,o,t,n),e.s<0?new l(1).div(r):V(r,n,s);if((a=o.s)<0){if(i<e.d.length-1)return new l(NaN);if(0==(1&e.d[i])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(i=0!=(t=y(+o,u))&&isFinite(t)?new l(t+"").e:b(u*(Math.log("0."+A(o.d))/Math.LN10+o.e+1)))>l.maxE+1||i<l.minE-1?new l(i>0?a/0:0):(m=!1,l.rounding=o.s=1,t=Math.min(12,(i+"").length),(r=Z(e.times(G(o,n+t)),n)).d&&O((r=V(r,n+5,1)).d,n,s)&&(i=n+10,+A((r=V(Z(e.times(G(o,i+t)),i),i+5,1)).d).slice(n+1,n+15)+1==1e14&&(r=V(r,n+1,0))),r.s=a,m=!0,l.rounding=s,V(r,n,s))},k.toPrecision=function(e,i){var t,n=this,r=n.constructor;return void 0===e?t=P(n,n.e<=r.toExpNeg||n.e>=r.toExpPos):(M(e,1,o),void 0===i?i=r.rounding:M(i,0,8),t=P(n=V(new r(n),e,i),e<=n.e||n.e<=r.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+t:t},k.toSignificantDigits=k.toSD=function(e,i){var t=this.constructor;return void 0===e?(e=t.precision,i=t.rounding):(M(e,1,o),void 0===i?i=t.rounding:M(i,0,8)),V(new t(this),e,i)},k.toString=function(){var e=this,i=e.constructor,t=P(e,e.e<=i.toExpNeg||e.e>=i.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t},k.truncated=k.trunc=function(){return V(new this.constructor(this),this.e+1,1)},k.valueOf=k.toJSON=function(){var e=this,i=e.constructor,t=P(e,e.e<=i.toExpNeg||e.e>=i.toExpPos);return e.isNeg()?"-"+t:t};var q=function(){function e(e,i,t){var n,r=0,s=e.length;for(e=e.slice();s--;)n=e[s]*i+r,e[s]=n%t|0,r=n/t|0;return r&&e.unshift(r),e}function i(e,i,t,n){var r,s;if(t!=n)s=t>n?1:-1;else for(r=s=0;r<t;r++)if(e[r]!=i[r]){s=e[r]>i[r]?1:-1;break}return s}function t(e,i,t,n){for(var r=0;t--;)e[t]-=r,r=e[t]<i[t]?1:0,e[t]=r*n+e[t]-i[t];for(;!e[0]&&e.length>1;)e.shift()}return function(r,s,a,o,l,u){var c,h,m,d,f,g,p,v,y,N,x,_,S,E,I,k,A,M,O,F,q=r.constructor,P=r.s==s.s?1:-1,C=r.d,D=s.d;if(!(C&&C[0]&&D&&D[0]))return new q(r.s&&s.s&&(C?!D||C[0]!=D[0]:D)?C&&0==C[0]||!D?0*P:P/0:NaN);for(u?(f=1,h=r.e-s.e):(u=w,f=7,h=b(r.e/f)-b(s.e/f)),O=D.length,A=C.length,N=(y=new q(P)).d=[],m=0;D[m]==(C[m]||0);m++);if(D[m]>(C[m]||0)&&h--,null==a?(E=a=q.precision,o=q.rounding):E=l?a+(r.e-s.e)+1:a,E<0)N.push(1),g=!0;else{if(E=E/f+2|0,m=0,1==O){for(d=0,D=D[0],E++;(m<A||d)&&E--;m++)I=d*u+(C[m]||0),N[m]=I/D|0,d=I%D|0;g=d||m<A}else{for((d=u/(D[0]+1)|0)>1&&(D=e(D,d,u),C=e(C,d,u),O=D.length,A=C.length),k=O,_=(x=C.slice(0,O)).length;_<O;)x[_++]=0;(F=D.slice()).unshift(0),M=D[0],D[1]>=u/2&&++M;do{d=0,(c=i(D,x,O,_))<0?(S=x[0],O!=_&&(S=S*u+(x[1]||0)),(d=S/M|0)>1?(d>=u&&(d=u-1),1==(c=i(p=e(D,d,u),x,v=p.length,_=x.length))&&(d--,t(p,O<v?F:D,v,u))):(0==d&&(c=d=1),p=D.slice()),(v=p.length)<_&&p.unshift(0),t(x,p,_,u),-1==c&&(c=i(D,x,O,_=x.length))<1&&(d++,t(x,O<_?F:D,_,u)),_=x.length):0===c&&(d++,x=[0]),N[m++]=d,c&&x[0]?x[_++]=C[k]||0:(x=[C[k]],_=1)}while((k++<A||void 0!==x[0])&&E--);g=void 0!==x[0]}N[0]||N.shift()}if(1==f)y.e=h,n=g;else{for(m=1,d=N[0];d>=10;d/=10)m++;y.e=m+h*f-1,V(y,l?a+y.e+1:a,o,g)}return y}}();function V(e,i,t,n){var r,s,a,o,l,u,c,h,d,f=e.constructor;e:if(null!=i){if(!(h=e.d))return e;for(r=1,o=h[0];o>=10;o/=10)r++;if((s=i-r)<0)s+=7,a=i,l=(c=h[d=0])/y(10,r-a-1)%10|0;else if((d=Math.ceil((s+1)/7))>=(o=h.length)){if(!n)break e;for(;o++<=d;)h.push(0);c=l=0,r=1,a=(s%=7)-7+1}else{for(c=o=h[d],r=1;o>=10;o/=10)r++;l=(a=(s%=7)-7+r)<0?0:c/y(10,r-a-1)%10|0}if(n=n||i<0||void 0!==h[d+1]||(a<0?c:c%y(10,r-a-1)),u=t<4?(l||n)&&(0==t||t==(e.s<0?3:2)):l>5||5==l&&(4==t||n||6==t&&(s>0?a>0?c/y(10,r-a):0:h[d-1])%10&1||t==(e.s<0?8:7)),i<1||!h[0])return h.length=0,u?(i-=e.e+1,h[0]=y(10,(7-i%7)%7),e.e=-i||0):h[0]=e.e=0,e;if(0==s?(h.length=d,o=1,d--):(h.length=d+1,o=y(10,7-s),h[d]=a>0?(c/y(10,r-a)%y(10,a)|0)*o:0),u)for(;;){if(0==d){for(s=1,a=h[0];a>=10;a/=10)s++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,h[0]==w&&(h[0]=1));break}if(h[d]+=o,h[d]!=w)break;h[d--]=0,o=1}for(s=h.length;0===h[--s];)h.pop()}return m&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function P(e,i,t){if(!e.isFinite())return H(e);var n,r=e.e,s=A(e.d),a=s.length;return i?(t&&(n=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+z(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):r<0?(s="0."+z(-r-1)+s,t&&(n=t-a)>0&&(s+=z(n))):r>=a?(s+=z(r+1-a),t&&(n=t-r-1)>0&&(s=s+"."+z(n))):((n=r+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-a)>0&&(r+1===a&&(s+="."),s+=z(n))),s}function C(e,i){var t=e[0];for(i*=7;t>=10;t/=10)i++;return i}function D(e,i,t){if(i>E)throw m=!0,t&&(e.precision=t),Error(g);return V(new e(u),i,1,!0)}function L(e,i,t){if(i>I)throw Error(g);return V(new e(c),i,t,!0)}function T(e){var i=e.length-1,t=7*i+1;if(i=e[i]){for(;i%10==0;i/=10)t--;for(i=e[0];i>=10;i/=10)t++}return t}function z(e){for(var i="";e--;)i+="0";return i}function R(e,i,t,n){var r,s=new e(1),a=Math.ceil(n/7+4);for(m=!1;;){if(t%2&&J((s=s.times(i)).d,a)&&(r=!0),0===(t=b(t/2))){t=s.d.length-1,r&&0===s.d[t]&&++s.d[t];break}J((i=i.times(i)).d,a)}return m=!0,s}function $(e){return 1&e.d[e.d.length-1]}function j(e,i,t){for(var n,r=new e(i[0]),s=0;++s<i.length;){if(!(n=new e(i[s])).s){r=n;break}r[t](n)&&(r=n)}return r}function Z(e,i){var t,n,r,s,a,o,l,u=0,c=0,h=0,d=e.constructor,f=d.rounding,g=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==i?(m=!1,l=g):l=i,o=new d(.03125);e.e>-2;)e=e.times(o),h+=5;for(l+=n=Math.log(y(2,h))/Math.LN10*2+5|0,t=s=a=new d(1),d.precision=l;;){if(s=V(s.times(e),l,1),t=t.times(++c),A((o=a.plus(q(s,t,l,1))).d).slice(0,l)===A(a.d).slice(0,l)){for(r=h;r--;)a=V(a.times(a),l,1);if(null!=i)return d.precision=g,a;if(!(u<3&&O(a.d,l-n,f,u)))return V(a,d.precision=g,f,m=!0);d.precision=l+=10,t=s=o=new d(1),c=0,u++}a=o}}function G(e,i){var t,n,r,s,a,o,l,u,c,h,d,f=1,g=e,p=g.d,v=g.constructor,b=v.rounding,y=v.precision;if(g.s<0||!p||!p[0]||!g.e&&1==p[0]&&1==p.length)return new v(p&&!p[0]?-1/0:1!=g.s?NaN:p?0:g);if(null==i?(m=!1,c=y):c=i,v.precision=c+=10,n=(t=A(p)).charAt(0),!(Math.abs(s=g.e)<15e14))return u=D(v,c+2,y).times(s+""),g=G(new v(n+"."+t.slice(1)),c-10).plus(u),v.precision=y,null==i?V(g,y,b,m=!0):g;for(;n<7&&1!=n||1==n&&t.charAt(1)>3;)n=(t=A((g=g.times(e)).d)).charAt(0),f++;for(s=g.e,n>1?(g=new v("0."+t),s++):g=new v(n+"."+t.slice(1)),h=g,l=a=g=q(g.minus(1),g.plus(1),c,1),d=V(g.times(g),c,1),r=3;;){if(a=V(a.times(d),c,1),A((u=l.plus(q(a,new v(r),c,1))).d).slice(0,c)===A(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus(D(v,c+2,y).times(s+""))),l=q(l,new v(f),c,1),null!=i)return v.precision=y,l;if(!O(l.d,c-10,b,o))return V(l,v.precision=y,b,m=!0);v.precision=c+=10,u=a=g=q(h.minus(1),h.plus(1),c,1),d=V(g.times(g),c,1),r=o=1}l=u,r+=2}}function H(e){return e.s*e.s/0+""}function W(e,i){var t,n,r;for((t=i.indexOf("."))>-1&&(i=i.replace(".","")),(n=i.search(/e/i))>0?(t<0&&(t=n),t+=+i.slice(n+1),i=i.substring(0,n)):t<0&&(t=i.length),n=0;48===i.charCodeAt(n);n++);for(r=i.length;48===i.charCodeAt(r-1);--r);if(i=i.slice(n,r)){if(r-=n,e.e=t=t-n-1,e.d=[],n=(t+1)%7,t<0&&(n+=7),n<r){for(n&&e.d.push(+i.slice(0,n)),r-=7;n<r;)e.d.push(+i.slice(n,n+=7));n=7-(i=i.slice(n)).length}else n-=r;for(;n--;)i+="0";e.d.push(+i),m&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function B(e,i){var n,r,s,a,o,l,u,c,h;if(i.indexOf("_")>-1){if(i=i.replace(/(\d)_(?=\d)/g,"$1"),S.test(i))return W(e,i)}else if("Infinity"===i||"NaN"===i)return+i||(e.s=NaN),e.e=NaN,e.d=null,e;if(x.test(i))n=16,i=i.toLowerCase();else if(N.test(i))n=2;else{if(!_.test(i))throw Error(f+i);n=8}for((a=i.search(/p/i))>0?(u=+i.slice(a+1),i=i.substring(2,a)):i=i.slice(2),o=(a=i.indexOf("."))>=0,r=e.constructor,o&&(a=(l=(i=i.replace(".","")).length)-a,s=R(r,new r(n),a,2*a)),a=h=(c=F(i,n,w)).length-1;0===c[a];--a)c.pop();return a<0?new r(0*e.s):(e.e=C(c,h),e.d=c,m=!1,o&&(e=q(e,s,4*l)),u&&(e=e.times(Math.abs(u)<54?y(2,u):t.pow(2,u))),m=!0,e)}function Q(e,i,t,n,r){var s,a,o,l,u=e.precision,c=Math.ceil(u/7);for(m=!1,l=t.times(t),o=new e(n);;){if(a=q(o.times(l),new e(i++*i++),u,1),o=r?n.plus(a):n.minus(a),n=q(a.times(l),new e(i++*i++),u,1),void 0!==(a=o.plus(n)).d[c]){for(s=c;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=n,n=a,a=s}return m=!0,a.d.length=c+1,a}function U(e,i){for(var t=e;--i;)t*=e;return t}function K(e,i){var t,n=i.s<0,r=L(e,e.precision,1),a=r.times(.5);if((i=i.abs()).lte(a))return s=n?4:1,i;if((t=i.divToInt(r)).isZero())s=n?3:2;else{if((i=i.minus(t.times(r))).lte(a))return s=$(t)?n?2:3:n?4:1,i;s=$(t)?n?1:4:n?3:2}return i.minus(r).abs()}function Y(e,i,t,r){var s,a,u,c,h,m,d,f,g,p=e.constructor,v=void 0!==t;if(v?(M(t,1,o),void 0===r?r=p.rounding:M(r,0,8)):(t=p.precision,r=p.rounding),e.isFinite()){for(v?(s=2,16==i?t=4*t-3:8==i&&(t=3*t-2)):s=i,(u=(d=P(e)).indexOf("."))>=0&&(d=d.replace(".",""),(g=new p(1)).e=d.length-u,g.d=F(P(g),10,s),g.e=g.d.length),a=h=(f=F(d,10,s)).length;0==f[--h];)f.pop();if(f[0]){if(u<0?a--:((e=new p(e)).d=f,e.e=a,f=(e=q(e,g,t,r,0,s)).d,a=e.e,m=n),u=f[t],c=s/2,m=m||void 0!==f[t+1],m=r<4?(void 0!==u||m)&&(0===r||r===(e.s<0?3:2)):u>c||u===c&&(4===r||m||6===r&&1&f[t-1]||r===(e.s<0?8:7)),f.length=t,m)for(;++f[--t]>s-1;)f[t]=0,t||(++a,f.unshift(1));for(h=f.length;!f[h-1];--h);for(u=0,d="";u<h;u++)d+=l.charAt(f[u]);if(v){if(h>1)if(16==i||8==i){for(u=16==i?4:3,--h;h%u;h++)d+="0";for(h=(f=F(d,s,i)).length;!f[h-1];--h);for(u=1,d="1.";u<h;u++)d+=l.charAt(f[u])}else d=d.charAt(0)+"."+d.slice(1);d=d+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)d="0"+d;d="0."+d}else if(++a>h)for(a-=h;a--;)d+="0";else a<h&&(d=d.slice(0,a)+"."+d.slice(a))}else d=v?"0p+0":"0";d=(16==i?"0x":2==i?"0b":8==i?"0o":"")+d}else d=H(e);return e.s<0?"-"+d:d}function J(e,i){if(e.length>i)return e.length=i,!0}function X(e){return new this(e).abs()}function ee(e){return new this(e).acos()}function ie(e){return new this(e).acosh()}function te(e,i){return new this(e).plus(i)}function ne(e){return new this(e).asin()}function re(e){return new this(e).asinh()}function se(e){return new this(e).atan()}function ae(e){return new this(e).atanh()}function oe(e,i){e=new this(e),i=new this(i);var t,n=this.precision,r=this.rounding,s=n+4;return e.s&&i.s?e.d||i.d?!i.d||e.isZero()?(t=i.s<0?L(this,n,r):new this(0)).s=e.s:!e.d||i.isZero()?(t=L(this,s,1).times(.5)).s=e.s:i.s<0?(this.precision=s,this.rounding=1,t=this.atan(q(e,i,s,1)),i=L(this,s,1),this.precision=n,this.rounding=r,t=e.s<0?t.minus(i):t.plus(i)):t=this.atan(q(e,i,s,1)):(t=L(this,s,1).times(i.s>0?.25:.75)).s=e.s:t=new this(NaN),t}function le(e){return new this(e).cbrt()}function ue(e){return V(e=new this(e),e.e+1,2)}function ce(e,i,t){return new this(e).clamp(i,t)}function he(e){if(!e||"object"!=typeof e)throw Error(d+"Object expected");var i,t,n,r=!0===e.defaults,s=["precision",1,o,"rounding",0,8,"toExpNeg",-a,0,"toExpPos",0,a,"maxE",0,a,"minE",-a,0,"modulo",0,9];for(i=0;i<s.length;i+=3)if(t=s[i],r&&(this[t]=h[t]),void 0!==(n=e[t])){if(!(b(n)===n&&n>=s[i+1]&&n<=s[i+2]))throw Error(f+t+": "+n);this[t]=n}if(t="crypto",r&&(this[t]=h[t]),void 0!==(n=e[t])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(f+t+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(p);this[t]=!0}else this[t]=!1}return this}function me(e){return new this(e).cos()}function de(e){return new this(e).cosh()}function fe(e,i){return new this(e).div(i)}function ge(e){return new this(e).exp()}function pe(e){return V(e=new this(e),e.e+1,3)}function ve(){var e,i,t=new this(0);for(m=!1,e=0;e<arguments.length;)if((i=new this(arguments[e++])).d)t.d&&(t=t.plus(i.times(i)));else{if(i.s)return m=!0,new this(1/0);t=i}return m=!0,t.sqrt()}function be(e){return e instanceof t||e&&e.toStringTag===v||!1}function ye(e){return new this(e).ln()}function Ne(e,i){return new this(e).log(i)}function xe(e){return new this(e).log(2)}function _e(e){return new this(e).log(10)}function Se(){return j(this,arguments,"lt")}function we(){return j(this,arguments,"gt")}function Ee(e,i){return new this(e).mod(i)}function Ie(e,i){return new this(e).mul(i)}function ke(e,i){return new this(e).pow(i)}function Ae(e){var i,t,n,r,s=0,a=new this(1),l=[];if(void 0===e?e=this.precision:M(e,1,o),n=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(i=crypto.getRandomValues(new Uint32Array(n));s<n;)(r=i[s])>=429e7?i[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=r%1e7;else{if(!crypto.randomBytes)throw Error(p);for(i=crypto.randomBytes(n*=4);s<n;)(r=i[s]+(i[s+1]<<8)+(i[s+2]<<16)+((127&i[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(i,s):(l.push(r%1e7),s+=4);s=n/4}else for(;s<n;)l[s++]=1e7*Math.random()|0;for(e%=7,(n=l[--s])&&e&&(r=y(10,7-e),l[s]=(n/r|0)*r);0===l[s];s--)l.pop();if(s<0)t=0,l=[0];else{for(t=-1;0===l[0];t-=7)l.shift();for(n=1,r=l[0];r>=10;r/=10)n++;n<7&&(t-=7-n)}return a.e=t,a.d=l,a}function Me(e){return V(e=new this(e),e.e+1,this.rounding)}function Oe(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Fe(e){return new this(e).sin()}function qe(e){return new this(e).sinh()}function Ve(e){return new this(e).sqrt()}function Pe(e,i){return new this(e).sub(i)}function Ce(){var e=0,i=arguments,t=new this(i[e]);for(m=!1;t.s&&++e<i.length;)t=t.plus(i[e]);return m=!0,V(t,this.precision,this.rounding)}function De(e){return new this(e).tan()}function Le(e){return new this(e).tanh()}function Te(e){return V(e=new this(e),e.e+1,1)}(t=function e(i){var t,n,r;function s(e){var i,t,n,r=this;if(!(r instanceof s))return new s(e);if(r.constructor=s,be(e))return r.s=e.s,void(m?!e.d||e.e>s.maxE?(r.e=NaN,r.d=null):e.e<s.minE?(r.e=0,r.d=[0]):(r.e=e.e,r.d=e.d.slice()):(r.e=e.e,r.d=e.d?e.d.slice():e.d));if("number"==(n=typeof e)){if(0===e)return r.s=1/e<0?-1:1,r.e=0,void(r.d=[0]);if(e<0?(e=-e,r.s=-1):r.s=1,e===~~e&&e<1e7){for(i=0,t=e;t>=10;t/=10)i++;return void(m?i>s.maxE?(r.e=NaN,r.d=null):i<s.minE?(r.e=0,r.d=[0]):(r.e=i,r.d=[e]):(r.e=i,r.d=[e]))}return 0*e!=0?(e||(r.s=NaN),r.e=NaN,void(r.d=null)):W(r,e.toString())}if("string"!==n)throw Error(f+e);return 45===(t=e.charCodeAt(0))?(e=e.slice(1),r.s=-1):(43===t&&(e=e.slice(1)),r.s=1),S.test(e)?W(r,e):B(r,e)}if(s.prototype=k,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=he,s.clone=e,s.isDecimal=be,s.abs=X,s.acos=ee,s.acosh=ie,s.add=te,s.asin=ne,s.asinh=re,s.atan=se,s.atanh=ae,s.atan2=oe,s.cbrt=le,s.ceil=ue,s.clamp=ce,s.cos=me,s.cosh=de,s.div=fe,s.exp=ge,s.floor=pe,s.hypot=ve,s.ln=ye,s.log=Ne,s.log10=_e,s.log2=xe,s.max=Se,s.min=we,s.mod=Ee,s.mul=Ie,s.pow=ke,s.random=Ae,s.round=Me,s.sign=Oe,s.sin=Fe,s.sinh=qe,s.sqrt=Ve,s.sub=Pe,s.sum=Ce,s.tan=De,s.tanh=Le,s.trunc=Te,void 0===i&&(i={}),i&&!0!==i.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)i.hasOwnProperty(n=r[t++])||(i[n]=this[n]);return s.config(i),s}(h)).prototype.constructor=t,t.default=t.Decimal=t,u=new t(u),c=new t(c),e.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(k[Symbol.for("nodejs.util.inspect.custom")]=k.toString,k[Symbol.toStringTag]="Decimal"),e.exports=t):(i||(i="undefined"!=typeof self&&self&&self.self==self?self:window),r=i.Decimal,t.noConflict=function(){return i.Decimal=r,t},i.Decimal=t)}(o)}(l);var u=l.exports,c={exports:{}};!function(e,i){!function(i){var t=function(e){return.5*(Math.exp(e)+Math.exp(-e))},n=function(e){return.5*(Math.exp(e)-Math.exp(-e))},r=function(){throw SyntaxError("Invalid Param")};function s(e,i){var t=Math.abs(e),n=Math.abs(i);return 0===e?Math.log(n):0===i?Math.log(t):t<3e3&&n<3e3?.5*Math.log(e*e+i*i):.5*Math.log((e/=2)*e+(i/=2)*i)+Math.LN2}function a(e,i){if(!(this instanceof a))return new a(e,i);var t=function(e,i){var t={re:0,im:0};if(null==e)t.re=t.im=0;else if(void 0!==i)t.re=e,t.im=i;else switch(typeof e){case"object":if("im"in e&&"re"in e)t.re=e.re,t.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return a.INFINITY;t.re=e.abs*Math.cos(e.arg),t.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return a.INFINITY;t.re=e.r*Math.cos(e.phi),t.im=e.r*Math.sin(e.phi)}else 2===e.length?(t.re=e[0],t.im=e[1]):r();break;case"string":t.im=t.re=0;var n=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),s=1,o=0;null===n&&r();for(var l=0;l<n.length;l++){var u=n[l];" "===u||"\t"===u||"\n"===u||("+"===u?s++:"-"===u?o++:"i"===u||"I"===u?(s+o===0&&r()," "===n[l+1]||isNaN(n[l+1])?t.im+=parseFloat((o%2?"-":"")+"1"):(t.im+=parseFloat((o%2?"-":"")+n[l+1]),l++),s=o=0):((s+o===0||isNaN(u))&&r(),"i"===n[l+1]||"I"===n[l+1]?(t.im+=parseFloat((o%2?"-":"")+u),l++):t.re+=parseFloat((o%2?"-":"")+u),s=o=0))}s+o>0&&r();break;case"number":t.im=0,t.re=e;break;default:r()}return isNaN(t.re)||t.im,t}(e,i);this.re=t.re,this.im=t.im}a.prototype={re:0,im:0,sign:function(){var e=this.abs();return new a(this.re/e,this.im/e)},add:function(e,i){var t=new a(e,i);return this.isInfinite()&&t.isInfinite()?a.NAN:this.isInfinite()||t.isInfinite()?a.INFINITY:new a(this.re+t.re,this.im+t.im)},sub:function(e,i){var t=new a(e,i);return this.isInfinite()&&t.isInfinite()?a.NAN:this.isInfinite()||t.isInfinite()?a.INFINITY:new a(this.re-t.re,this.im-t.im)},mul:function(e,i){var t=new a(e,i);return this.isInfinite()&&t.isZero()||this.isZero()&&t.isInfinite()?a.NAN:this.isInfinite()||t.isInfinite()?a.INFINITY:0===t.im&&0===this.im?new a(this.re*t.re,0):new a(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(e,i){var t=new a(e,i);if(this.isZero()&&t.isZero()||this.isInfinite()&&t.isInfinite())return a.NAN;if(this.isInfinite()||t.isZero())return a.INFINITY;if(this.isZero()||t.isInfinite())return a.ZERO;e=this.re,i=this.im;var n,r,s=t.re,o=t.im;return 0===o?new a(e/s,i/s):Math.abs(s)<Math.abs(o)?new a((e*(r=s/o)+i)/(n=s*r+o),(i*r-e)/n):new a((e+i*(r=o/s))/(n=o*r+s),(i-e*r)/n)},pow:function(e,i){var t=new a(e,i);if(e=this.re,i=this.im,t.isZero())return a.ONE;if(0===t.im){if(0===i&&e>0)return new a(Math.pow(e,t.re),0);if(0===e)switch((t.re%4+4)%4){case 0:return new a(Math.pow(i,t.re),0);case 1:return new a(0,Math.pow(i,t.re));case 2:return new a(-Math.pow(i,t.re),0);case 3:return new a(0,-Math.pow(i,t.re))}}if(0===e&&0===i&&t.re>0&&t.im>=0)return a.ZERO;var n=Math.atan2(i,e),r=s(e,i);return e=Math.exp(t.re*r-t.im*n),i=t.im*r+t.re*n,new a(e*Math.cos(i),e*Math.sin(i))},sqrt:function(){var e,i,t=this.re,n=this.im,r=this.abs();if(t>=0){if(0===n)return new a(Math.sqrt(t),0);e=.5*Math.sqrt(2*(r+t))}else e=Math.abs(n)/Math.sqrt(2*(r-t));return i=t<=0?.5*Math.sqrt(2*(r-t)):Math.abs(n)/Math.sqrt(2*(r+t)),new a(e,n<0?-i:i)},exp:function(){var e=Math.exp(this.re);return this.im,new a(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,i=this.im;return new a(Math.expm1(e)*Math.cos(i)+function(e){var i=Math.PI/4;if(-i>e||e>i)return Math.cos(e)-1;var t=e*e;return t*(t*(t*(t*(t*(t*(t*(t/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(i),Math.exp(e)*Math.sin(i))},log:function(){var e=this.re,i=this.im;return new a(s(e,i),Math.atan2(i,e))},abs:function(){return e=this.re,i=this.im,t=Math.abs(e),n=Math.abs(i),t<3e3&&n<3e3?Math.sqrt(t*t+n*n):(t<n?(t=n,n=e/i):n=i/e,t*Math.sqrt(1+n*n));var e,i,t,n},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,i=this.im;return new a(Math.sin(e)*t(i),Math.cos(e)*n(i))},cos:function(){var e=this.re,i=this.im;return new a(Math.cos(e)*t(i),-Math.sin(e)*n(i))},tan:function(){var e=2*this.re,i=2*this.im,r=Math.cos(e)+t(i);return new a(Math.sin(e)/r,n(i)/r)},cot:function(){var e=2*this.re,i=2*this.im,r=Math.cos(e)-t(i);return new a(-Math.sin(e)/r,n(i)/r)},sec:function(){var e=this.re,i=this.im,r=.5*t(2*i)+.5*Math.cos(2*e);return new a(Math.cos(e)*t(i)/r,Math.sin(e)*n(i)/r)},csc:function(){var e=this.re,i=this.im,r=.5*t(2*i)-.5*Math.cos(2*e);return new a(Math.sin(e)*t(i)/r,-Math.cos(e)*n(i)/r)},asin:function(){var e=this.re,i=this.im,t=new a(i*i-e*e+1,-2*e*i).sqrt(),n=new a(t.re-i,t.im+e).log();return new a(n.im,-n.re)},acos:function(){var e=this.re,i=this.im,t=new a(i*i-e*e+1,-2*e*i).sqrt(),n=new a(t.re-i,t.im+e).log();return new a(Math.PI/2-n.im,n.re)},atan:function(){var e=this.re,i=this.im;if(0===e){if(1===i)return new a(0,1/0);if(-1===i)return new a(0,-1/0)}var t=e*e+(1-i)*(1-i),n=new a((1-i*i-e*e)/t,-2*e/t).log();return new a(-.5*n.im,.5*n.re)},acot:function(){var e=this.re,i=this.im;if(0===i)return new a(Math.atan2(1,e),0);var t=e*e+i*i;return 0!==t?new a(e/t,-i/t).atan():new a(0!==e?e/0:0,0!==i?-i/0:0).atan()},asec:function(){var e=this.re,i=this.im;if(0===e&&0===i)return new a(0,1/0);var t=e*e+i*i;return 0!==t?new a(e/t,-i/t).acos():new a(0!==e?e/0:0,0!==i?-i/0:0).acos()},acsc:function(){var e=this.re,i=this.im;if(0===e&&0===i)return new a(Math.PI/2,1/0);var t=e*e+i*i;return 0!==t?new a(e/t,-i/t).asin():new a(0!==e?e/0:0,0!==i?-i/0:0).asin()},sinh:function(){var e=this.re,i=this.im;return new a(n(e)*Math.cos(i),t(e)*Math.sin(i))},cosh:function(){var e=this.re,i=this.im;return new a(t(e)*Math.cos(i),n(e)*Math.sin(i))},tanh:function(){var e=2*this.re,i=2*this.im,r=t(e)+Math.cos(i);return new a(n(e)/r,Math.sin(i)/r)},coth:function(){var e=2*this.re,i=2*this.im,r=t(e)-Math.cos(i);return new a(n(e)/r,-Math.sin(i)/r)},csch:function(){var e=this.re,i=this.im,r=Math.cos(2*i)-t(2*e);return new a(-2*n(e)*Math.cos(i)/r,2*t(e)*Math.sin(i)/r)},sech:function(){var e=this.re,i=this.im,r=Math.cos(2*i)+t(2*e);return new a(2*t(e)*Math.cos(i)/r,-2*n(e)*Math.sin(i)/r)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var i=this.asin();return this.re=-this.im,this.im=e,e=i.re,i.re=-i.im,i.im=e,i},acosh:function(){var e=this.acos();if(e.im<=0){var i=e.re;e.re=-e.im,e.im=i}else i=e.im,e.im=-e.re,e.re=i;return e},atanh:function(){var e=this.re,i=this.im,t=e>1&&0===i,n=1-e,r=1+e,o=n*n+i*i,l=0!==o?new a((r*n-i*i)/o,(i*n+r*i)/o):new a(-1!==e?e/0:0,0!==i?i/0:0),u=l.re;return l.re=s(l.re,l.im)/2,l.im=Math.atan2(l.im,u)/2,t&&(l.im=-l.im),l},acoth:function(){var e=this.re,i=this.im;if(0===e&&0===i)return new a(0,Math.PI/2);var t=e*e+i*i;return 0!==t?new a(e/t,-i/t).atanh():new a(0!==e?e/0:0,0!==i?-i/0:0).atanh()},acsch:function(){var e=this.re,i=this.im;if(0===i)return new a(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var t=e*e+i*i;return 0!==t?new a(e/t,-i/t).asinh():new a(0!==e?e/0:0,0!==i?-i/0:0).asinh()},asech:function(){var e=this.re,i=this.im;if(this.isZero())return a.INFINITY;var t=e*e+i*i;return 0!==t?new a(e/t,-i/t).acosh():new a(0!==e?e/0:0,0!==i?-i/0:0).acosh()},inverse:function(){if(this.isZero())return a.INFINITY;if(this.isInfinite())return a.ZERO;var e=this.re,i=this.im,t=e*e+i*i;return new a(e/t,-i/t)},conjugate:function(){return new a(this.re,-this.im)},neg:function(){return new a(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new a(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new a(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new a(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,i){var t=new a(e,i);return Math.abs(t.re-this.re)<=a.EPSILON&&Math.abs(t.im-this.im)<=a.EPSILON},clone:function(){return new a(this.re,this.im)},toString:function(){var e=this.re,i=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<a.EPSILON&&(e=0),Math.abs(i)<a.EPSILON&&(i=0),0===i?t+e:(0!==e?(t+=e,t+=" ",i<0?(i=-i,t+="-"):t+="+",t+=" "):i<0&&(i=-i,t+="-"),1!==i&&(t+=i),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},a.ZERO=new a(0,0),a.ONE=new a(1,0),a.I=new a(0,1),a.PI=new a(Math.PI,0),a.E=new a(Math.E,0),a.INFINITY=new a(1/0,1/0),a.NAN=new a(NaN,NaN),a.EPSILON=1e-15,Object.defineProperty(a,"__esModule",{value:!0}),a.default=a,a.Complex=a,e.exports=a}()}(c);const h=8205;function m(e){return e===h||65038===e||65039===e||e>=127995&&e<=128e3||e>=129456&&e<=129460||e>=917536&&e<=917632}function d(e){return e>=127462&&e<=127487}class f{constructor(e){this.obeyspaces=!1,this.s=function(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;const i=[],t=function(e){const i=[];for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n>=55296&&n<=56319){const i=e.charCodeAt(t+1);i>=56320&&i<=57343&&(n=65536+1024*(n-55296)+(i-56320),t++)}i.push(n)}return i}(e);let n=0;for(;n<t.length;){const e=t[n++],r=t[n];if(r===h){const e=n-1;for(n+=2;t[n]===h;)n+=2;i.push(String.fromCodePoint(...t.slice(e,2*n-e+1)))}else if(m(r)){const e=n-1;for(;m(t[n]);)n+=t[n]===h?2:1;i.push(String.fromCodePoint(...t.slice(e,2*n-e-1)))}else d(e)?(n+=1,i.push(String.fromCodePoint(...t.slice(n-2,2)))):i.push(String.fromCodePoint(e))}return i}(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let i;return i="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join("")),(null==i?void 0:i[0])?(this.pos+=i[0].length,i[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/))return"<space>";if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";const e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z*]+/);if(e)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(e=this.get()," "===e)return"<space>";return"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();const e=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(e)return String.fromCodePoint(parseInt(e.slice(e.lastIndexOf("^")+1),16))}return e}if("#"===e){if(!this.end()){let e=!1;if(/[0-9?]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){const i=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(i)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}}function g(e,i){var t,n,r,s;let a=[],o=e.next();if(o)if("\\relax"===o);else if("\\noexpand"===o)o=e.next(),o&&a.push(o);else if("\\obeyspaces"===o)e.obeyspaces=!0;else if("\\space"===o||"~"===o)a.push("<space>");else if("\\bgroup"===o)a.push("<{>");else if("\\egroup"===o)a.push("<}>");else if("\\string"===o)o=e.next(),o&&("\\"===o[0]?Array.from(o).forEach((e=>a.push("\\"===e?"\\backslash":e))):"<{>"===o?a.push("\\{"):"<space>"===o?a.push("~"):"<}>"===o&&a.push("\\}"));else if("\\csname"===o){for(;"<space>"===e.peek();)e.next();let r="",s=!1,l=[];do{if(0===l.length)if(/^#[0-9?]$/.test(e.peek())){const r=e.get().slice(1);l=p(null!==(n=null!==(t=null==i?void 0:i[r])&&void 0!==t?t:null==i?void 0:i["?"])&&void 0!==n?n:"\\placeholder{}",i),o=l[0]}else o=e.next(),l=o?[o]:[];s=0===l.length,s||"\\endcsname"!==o||(s=!0,l.shift()),s||(s="<$>"===o||"<$$>"===o||"<{>"===o||"<}>"===o||!!o&&o.length>1&&"\\"===o[0]),s||(r+=l.shift())}while(!s);r&&a.push("\\"+r),a=a.concat(l)}else if("\\endcsname"===o);else if(o.length>1&&"#"===o[0]){const e=o.slice(1);a=a.concat(p(null!==(s=null!==(r=null==i?void 0:i[e])&&void 0!==r?r:null==i?void 0:i["?"])&&void 0!==s?s:"\\placeholder{}",i))}else a.push(o);return a}function p(e,i){const t=e.toString().split(/\r?\n/);let n="",r="";for(const e of t){n+=r,r=" ";const i=e.match(/((?:\\%)|[^%])*/);null!==i&&(n+=i[0])}const s=new f(n),a=[];do{a.push(...g(s,i))}while(!s.end());return a}function v(e){let i="",t="";for(const n of e)n&&(/[a-zA-Z*]/.test(n[0])&&(t+=i),i=/\\[a-zA-Z]+\*?$/.test(n)?" ":"",t+=n);return t}function b(e){let i=[];if(Array.isArray(e))for(const t of e)Array.isArray(t)?i=[...i,...t]:i.push(t);else i=[e];return v(i.map((e=>{var i;return null!==(i={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])&&void 0!==i?i:e})))}const y="List",N="Divide",x="Multiply",_="Negate",S="Power",w="Prime",E="Root",I="Sqrt",k="Subtract",A="ComplexInfinity",M="ExponentialE",O="ImaginaryUnit";function F(e){return null!==e&&"object"==typeof e&&"num"in e}function q(e){return null!==e&&"object"==typeof e&&"sym"in e}function V(e){return null!==e&&"object"==typeof e&&"fn"in e}function P(e){return null===e?null:"object"==typeof e&&"str"in e?e.str:"string"!=typeof e||e.length<2||"'"!==e[0]||"'"!==e[e.length-1]?null:e.substring(1,e.length-1)}function C(e){return null===e?null:Array.isArray(e)?e[0]:V(e)?e.fn[0]:null}function D(e){const i=C(e);return"string"==typeof i?i:""}function L(e,i){var t,n;return null===e?null:Array.isArray(e)?null!==(t=e[i])&&void 0!==t?t:null:V(e)&&null!==(n=e.fn[i])&&void 0!==n?n:null}function T(e){return Array.isArray(e)?Math.max(0,e.length-1):V(e)?Math.max(0,e.fn.length-1):0}function z(e){if(null===e)return null;const i=q(e)?e.sym:e;return"string"!=typeof i||i.length>=2&&"'"===i[0]&&"'"===i[i.length-1]?null:i}function R(e){if(null===e)return null;const i=q(e)?e.sym:e;return"string"!=typeof i||i.length<2||"'"!==i[0]||"'"!==i[i.length-1]?null:i.slice(1,-1)}function $(e){var i;const t=C(e);if("KeyValuePair"===t||"Tuple"===t||"Pair"===t){const t=R(L(e,1));return t?[t,null!==(i=L(e,2))&&void 0!==i?i:"Nothing"]:null}return null}function j(e){if(null===e)return null;if("object"==typeof e&&"dict"in e)return e.dict;const i=$(e);if(i)return{[i[0]]:i[1]};const t=C(e);if("List"===t||"Dictionary"===t){const i={};for(let t=1;t<T(e);t++){const n=$(L(e,t));n&&(i[n[0]]=n[1])}return i}return null}function Z(e){if(null===e)return null;if("number"==typeof e)return e;if(F(e))return parseFloat(e.num);const i=z(e);return"NaN"===i?NaN:"+Infinity"===i?1/0:"-Infinity"===i?-1/0:null}function G(e){var i,t,n,r,s,a,o,l,u,c,h;if(function(e){return null===e||!Array.isArray(e)&&("object"!=typeof e||!("fn"in e||"dic"in e))}(e))return[null,null];const m=C(e);if(!m)return[null,null];let d=null,f=null;if("Negate"===m&&([d,f]=G(null!==(i=L(e,1))&&void 0!==i?i:"Missing"),null!==d&&null!==f))return[-d,f];if("Rational"===m)return[null!==(n=Z(null!==(t=L(e,1))&&void 0!==t?t:NaN))&&void 0!==n?n:NaN,null!==(s=Z(null!==(r=L(e,2))&&void 0!==r?r:NaN))&&void 0!==s?s:NaN];if("Power"===m){const i=Z(L(e,2));1===i?(d=null!==(a=Z(L(e,1)))&&void 0!==a?a:null,f=1):-1===i&&(d=1,f=null!==(o=Z(L(e,1)))&&void 0!==o?o:null)}return"Divide"===m&&(d=null!==(l=Z(L(e,1)))&&void 0!==l?l:null,f=null!==(u=Z(L(e,2)))&&void 0!==u?u:null),"Multiply"===m&&C(L(e,2))===S&&-1===Z(L(L(e,2),2))&&(d=null!==(c=Z(L(e,1)))&&void 0!==c?c:null,f=null!==(h=Z(L(L(e,2),1)))&&void 0!==h?h:null),null===d||null===f?[null,null]:Number.isInteger(d)&&Number.isInteger(f)?[d,f]:[null,null]}function H(e){return Array.isArray(e)?e.slice(1):V(e)?e.fn.slice(1):[]}function W(e,i){let t=null;if(Array.isArray(e)&&(t=e),V(e)&&(t=e.fn),null===t)return[];let n=1;const r=[];for(;n<t.length;)r.push(i(t[n])),n+=1;return r}function B(e,i,t,n="both"){var r,s,a,o,l,u;if("non"===n)return[e,i,t];const c=C(i),h=C(t);return"left"===n?c===e?[e,...null!==(r=H(i))&&void 0!==r?r:[],t]:[e,i,t]:"right"===n?h===e?[e,i,...null!==(s=H(t))&&void 0!==s?s:[]]:[e,i,t]:c===e&&h===e?[e,...null!==(a=H(i))&&void 0!==a?a:[],...null!==(o=H(t))&&void 0!==o?o:[]]:c===e?[e,...null!==(l=H(i))&&void 0!==l?l:[],t]:h===e?[e,i,...null!==(u=H(t))&&void 0!==u?u:[]]:[e,i,t]}function Q(e){var i,t;const n=C(e);return null===e?null:("Delimiter"===n&&(e=null!==(i=L(e,1))&&void 0!==i?i:null),null===e?null:"Sequence"===n?null!==(t=H(e))&&void 0!==t?t:[]:null)}function U(e,i){return i>2?"solidus":"radical"}function K(e,i){return i>3?"inline-solidus":"quotient"}function Y(e,i,t,n){return null===t?"\\sqrt{}":(n=null!=n?n:2,"solidus"===i?e.wrapShort(t)+"^{1\\/"+e.serialize(n)+"}":"quotient"===i?e.wrapShort(t)+"^{\\frac{1}{"+e.serialize(n)+"}}":2===Z(n)?"\\sqrt{"+e.serialize(t)+"}":"\\sqrt["+e.serialize(n)+"]{"+e.serialize(t)+"}")}function J(e,i){var t,n;if(null===i)return"";const r=null!==(t=L(i,1))&&void 0!==t?t:"Missing",s=null!==(n=L(i,2))&&void 0!==n?n:"Missing";if(1===T(i))return e.serialize(r);const a=K(0,e.level);if("inline-solidus"===a||"nice-solidus"===a){const i=e.wrapShort(r),t=e.wrapShort(s);return"inline-solidus"===a?`${i}\\/${t}`:`^{${i}}\\!\\!/\\!_{${t}}`}return"reciprocal"===a?e.wrap(r)+e.wrap(s)+"^{-1}":"factor"===a?"\\frac{1}{"+e.serialize(s)+"}"+e.wrap(r):`\\frac{${e.serialize(r)}}{${e.serialize(s)}}`}function X(e,i){var t,n,r;const s=C(i),a=null!==(t=L(i,1))&&void 0!==t?t:"Missing",o=null!==(n=L(i,2))&&void 0!==n?n:"Missing";if("Sqrt"===s)return Y(e,U(0,e.level),a,2);if("Root"===s)return Y(e,U(0,e.level),a,o);const l=null!==(r=Z(o))&&void 0!==r?r:1;if(-1===l)return e.serialize([N,"1",a]);if(l<0)return e.serialize([N,"1",[S,a,-l]]);if("Divide"===C(o)||"Rational"===C(o)){if(1===Z(L(o,1)))return Y(e,U(0,e.level),a,L(o,2))}else if(C(o)===S&&-1===Z(L(o,2)))return Y(e,U(0,e.level),a,L(o,1));return e.wrapShort(a)+"^{"+e.serialize(o)+"}"}const ee=[{name:"CatalanConstant",serialize:"G"},{name:"GoldenRatio",serialize:"\\varphi"},{name:"EulerGamma",serialize:"\\gamma"},{name:"Degrees",serialize:"\\frac{\\pi}{180}"},{trigger:["\\infty"],parse:{num:"+Infinity"}},{name:A,trigger:["\\tilde","\\infty"],serialize:"\\tilde\\infty"},{trigger:["\\tilde","<{>","\\infty","<}>"],parse:A},{name:"Pi",trigger:["\\pi"]},{trigger:["\u03c0"],parse:"Pi"},{name:M,trigger:["e"],serialize:"e"},{trigger:["\\mathrm","<{>","e","<}>"],parse:M},{trigger:["\\exponentialE"],parse:M},{name:O,trigger:["\\imaginaryI"]},{trigger:["i"],parse:O},{trigger:["\\mathrm","<{>","i","<}>"],parse:O},{name:"Add",trigger:["+"],kind:"infix",associativity:"both",precedence:275,parse:(e,i,t)=>{if(275<i.minPrec)return null;const n=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:275}));return null===n?null:B("Add",t,n)},serialize:function(e,i){var t,n;e.level-=1;const r=C(i);let s="",a=L(i,1),o=!Number.isNaN(null!==(t=Z(a))&&void 0!==t?t:NaN);if(r===_)s="-"+e.wrap(a,276);else if("Add"===r){s=e.serialize(a);const t=T(i)+1;for(let r=2;r<t;r++){a=L(i,r);const t=null!==(n=Z(a))&&void 0!==n?n:NaN,l=!Number.isNaN(t);let u=!1;if(null!==a&&o){const[i,t]=G(a);null!==i&&null!==t&&isFinite(i)&&isFinite(t)&&1!==t&&(s+=e.options.invisiblePlus+e.serialize(a),u=!0)}if(!u)if(t<0)s+=e.serialize(a);else if("Negate"===C(a))s+=e.wrap(a,275);else{const i=e.wrap(a,275);"-"===i[0]||"+"===i[0]?s+=i:s=s+"+"+i}o=l}}else if(r===k){const t=L(i,2);s=null!==t?e.wrap(a,275)+"-"+e.wrap(t,275):e.wrap(a,275)}return e.level+=1,s}},{kind:"prefix",trigger:["+"],precedence:275,parse:(e,i)=>275<i.minPrec?null:e.matchExpression(Object.assign(Object.assign({},i),{minPrec:400}))},{name:"Complex",precedence:274,serialize:(e,i)=>{const t=Z(L(i,1)),n=Z(L(i,2));if(0===n)return e.serialize(L(i,1));const r=1===n?"\\imaginaryI":-1===n?"-\\imaginaryI":v([e.serialize(L(i,2)),"\\imaginaryI"]);return 0===t?r:v(null!==n&&n<0?[e.serialize(L(i,1)),r]:[e.serialize(L(i,1)),"+",r])}},{name:"Divide",trigger:["\\frac"],requiredLatexArg:2,precedence:660,parse:function(e){var i,t,n,r;const s=null!==(i=e.matchRequiredLatexArgument())&&void 0!==i?i:"Missing",a=null!==(t=e.matchRequiredLatexArgument())&&void 0!==t?t:"Missing";if("PartialDerivative"===C(s)&&("PartialDerivative"===C(a)||"Multiply"===C(a)&&"PartialDerivative"===C(L(a,1)))){const i=null!==(n=L(s,3))&&void 0!==n?n:"Missing";let t=L(s,1);null!==t&&"Missing"!==t||(t=null!==(r=e.matchExpression())&&void 0!==r?r:"Missing");let o=[];if("Multiply"===C(a)){for(const e of H(a))if("PartialDerivative"===C(e)){const i=L(e,2);i&&o.push(i)}}else{const e=L(a,2);e&&o.push(e)}return o.length>1&&(o=[y,...o]),["PartialDerivative",t,...o,"Missing"===i?1:i]}return[N,s,a]},serialize:J},{trigger:["\\/"],kind:"infix",associativity:"non",precedence:660,parse:"Divide"},{trigger:["/"],kind:"infix",associativity:"non",precedence:660,parse:"Divide"},{trigger:["\\div"],kind:"infix",associativity:"non",precedence:660,parse:"Divide"},{name:"Exp",serialize:(e,i)=>{var t;return v(["\\exponentialE^{",e.serialize(null!==(t=L(i,1))&&void 0!==t?t:"Missing"),"}"])}},{name:"Factorial",trigger:["!"],kind:"postfix",precedence:810},{name:"Factorial2",trigger:["!","!"],kind:"postfix",precedence:810},{trigger:"\\operatorname{floor}",parse:e=>{const i=e.matchArguments("enclosure");return null===i?null:["Floor",...i]}},{name:"Gcd",trigger:"\\operatorname{gcd}",parse:e=>{const i=e.matchArguments("enclosure");return null===i?null:["Gcd",...i]},serialize:(e,i)=>v(["\\operatorname{gcd}","\\left(",e.serialize(i),"\\right)"])},{name:"Half",serialize:"\\frac12"},{name:"Lcm",trigger:"\\operatorname{lcm}"},{name:"MinusPlus",trigger:["\\mp"],kind:"infix",associativity:"both",precedence:270},{name:x,trigger:["\\times"],kind:"infix",associativity:"both",precedence:390,serialize:function e(i,t){var n,r;if(null===t)return"";i.level-=1;let s="";const[a,o]=function(e){var i,t,n,r,s;if("Multiply"!==C(e))return[[],[]];const a=[],o=[],l=H(e);for(const e of l)if("Power"===C(e))if("Negate"===C(L(e,2))){const n=null!==(i=L(e,1))&&void 0!==i?i:"Missing",r=null!==(t=L(L(e,2),1))&&void 0!==t?t:"Missing";o.push([S,n,r])}else{const i=null!==(n=Z(L(e,2)))&&void 0!==n?n:NaN;-1===i?o.push(null!==(r=L(e,1))&&void 0!==r?r:"Missing"):i<0?o.push([S,null!==(s=L(e,1))&&void 0!==s?s:"Missing",-i]):a.push(e)}else a.push(e);return[a,o]}(t);if(o.length>0&&(s=1===o.length&&1===o[0]?0===a.length?"1":1===a.length?i.serialize(a[0]):e(i,[x,...a]):i.serialize([N,1===a.length?a[0]:[x,...a],1===o.length?o[0]:[x,...o]])),s)return i.level+=1,s;let l=!1,u=null;const c=T(t)+1;let h=!1;for(let e=1;e<c;e++){if(u=L(t,e),null===u)continue;let a;if("number"==typeof u||F(u))a=i.serialize(u),"-1"!==a||s?("-"===a[0]&&(a=a.slice(1),l=!l),s=s?v([s,i.options.multiply,a]):a):s="-",h=!0;else{if("Power"===C(u)){const[e,t]=G(null!==(n=L(u,2))&&void 0!==n?n:NaN);if(1===e&&null!==t){s+=Y(i,U(0,i.level),L(u,1),t),h=!1;continue}}if("Power"!==C(u)||isNaN(null!==(r=Z(L(u,1)))&&void 0!==r?r:NaN)){if("Negate"===C(u)&&(u=L(u,1),l=!l),a=i.wrap(u,390),s){const e=C(u);s=!h||"Divide"!==e&&"Rational"!==e?i.options.invisibleMultiply?v([s,i.options.invisibleMultiply,a]):v([s,a]):v([s,i.options.multiply,a])}else s=a;h=!1}else a=i.serialize(u),s=s?v([s,i.options.multiply,a]):a,h=!0}}return i.level+=1,l?"-"+s:s}},{trigger:["\\cdot"],kind:"infix",associativity:"both",precedence:390,parse:(e,i,t)=>{if(391<i.minPrec)return null;const n=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:392}));return null===n?null:B("Multiply",t,n)}},{trigger:["*"],kind:"infix",associativity:"both",precedence:390,parse:(e,i,t)=>{if(391<i.minPrec)return null;const n=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:392}));return null===n?null:["Multiply",t,n]}},{name:_,trigger:["-"],kind:"prefix",parse:(e,i)=>{if(276<i.minPrec)return null;const t=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:400}));return null===t?null:[_,t]},precedence:275},{name:"PlusMinus",trigger:["\\pm"],kind:"infix",associativity:"both",precedence:270},{name:S,trigger:["^"],kind:"infix",serialize:X},{name:"Rational",precedence:660,serialize:J},{name:E,serialize:X},{name:"Round",trigger:"\\operatorname{round}"},{name:"Square",precedence:720,serialize:(e,i)=>e.wrapShort(L(i,1))+"^2"},{name:"Sign",trigger:"\\operatorname{sgn}"},{name:I,trigger:["\\sqrt"],optionalLatexArg:1,requiredLatexArg:1,parse:function(e){const i=e.matchOptionalLatexArgument(),t=e.matchRequiredLatexArgument();return null===t?null!==i?[E,"Missing",i]:[I,"Missing"]:null!==i?[E,t,i]:[I,t]},serialize:X},{name:k,trigger:["-"],kind:"infix",associativity:"both",precedence:275,parse:(e,i,t)=>{if(276<i.minPrec)return null;const n=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:277}));return null===n?null:[k,t,n]}}];function ie(e=""){return(i,t)=>H(t).map((e=>i.serialize(e))).join(e)}function te(e,i){if(null===i)return"";const t=C(i);if("LatexString"===t)return ae(e,i);if("LatexTokens"===t)return se(e,i);const n=P(i);if(null!==n)return`\\text{${n}}`;const r=Z(i);return null!==r?r.toString():`\\text{${JSON.stringify(i)}}`}const ne=[{name:"Missing",trigger:["\\placeholder"],requiredLatexArg:1,serialize:e=>{var i;return null!==(i=e.options.missingSymbol)&&void 0!==i?i:"\\placeholder{}"}},{name:"BaseForm",serialize:(e,i)=>{var t,n;const r=null!==(t=Z(L(i,2)))&&void 0!==t?t:NaN;if(isFinite(r)&&r>=2&&r<=36){const e=null!==(n=Z(L(i,1)))&&void 0!==n?n:NaN;if(isFinite(e)){let i=Number(e).toString(r),t=0;if(2===r||10===r?t=4:16===r?t=2:r>16&&(t=4),t>0){const e=i;i="";for(let n=0;n<e.length;n++)n>0&&n%t==0&&(i="\\, "+i),i=e[e.length-n-1]+i}return`(\\text{${i}}_{${r}}`}}return"\\operatorname{BaseForm}("+e.serialize(L(i,1))+", "+e.serialize(L(i,2))+")"}},{name:"Delimiter",serialize:(e,i)=>{var t,n,r,s,a,o;const l=T(i);if(0===l)return"";if(1===l)return`\\left( ${e.serialize(L(i,1))} \\right)`;let u="",c="\\left(",h="\\left)";2===l?u=null!==(t=te(e,L(i,2)))&&void 0!==t?t:"":3===l?(c=null!==(n=te(e,L(i,2)))&&void 0!==n?n:"",h=null!==(r=te(e,L(i,3)))&&void 0!==r?r:""):(c=null!==(s=te(e,L(i,2)))&&void 0!==s?s:"",u=null!==(a=te(e,L(i,3)))&&void 0!==a?a:"",h=null!==(o=te(e,L(i,4)))&&void 0!==o?o:"");const m=L(i,1);return u&&"Sequence"===C(m)?`${c} ${ie(u)(e,m)} ${h}`:`${c} ${e.serialize(m)} ${h}`}},{name:"Error",serialize:(e,i)=>{const t=L(i,1),n="Nothing"===z(t)?"":e.serialize(t);if(T(i)>=3){const e=L(i,3);if(e&&"LatexForm"===C(e)){const i=oe(P(L(e,1)));if(i)return`${null!=n?n:""}\\texttt{\\textcolor{red}{${i}}}`}}return null!=n?n:""}},{name:"FromLatex",serialize:(e,i)=>`\\texttt{${oe(P(L(i,1)))}}`},{name:"LatexForm",serialize:ae},{name:"LatexTokens",serialize:se},{kind:"matchfix",openDelimiter:"(",closeDelimiter:")",parse:(e,i)=>null===i?null:"Sequence"===C(i)?0===T(i)?["Delimiter","Nothing"]:["Delimiter",...H(i)]:["Delimiter",i]},{name:"Sequence",trigger:[","],kind:"infix",precedence:20,parse:(e,i,t)=>{if(i.minPrec>=20)return null;"Missing"===t&&(t="Nothing");const n=["Sequence",t];let r=!1;for(;!r;){for(r=!0,e.skipSpace();e.match(",");)n.push("Nothing"),e.skipSpace();if(e.atTerminator(i))n.push("Nothing");else{const t=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:20}));n.push(null!=t?t:"Nothing"),r=null===t}r||(e.skipSpace(),r=!e.match(","))}return n},serialize:ie()},{trigger:[";"],kind:"infix",precedence:19,parse:(e,i,t)=>{var n,r;if(i.minPrec>=19)return null;"Missing"===t&&(t="Nothing");const s=["Sequence",...null!==(n=Q(t))&&void 0!==n?n:["Sequence",t]];for(;;){for(e.skipSpace();e.match(",");)s.push("Nothing"),e.skipSpace();if(e.atEnd){s.push("Nothing");break}const t=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:19}));if(null===t){s.push("Nothing");break}if(s.push(...null!==(r=Q(t))&&void 0!==r?r:["Sequence",t]),e.skipSpace(),!e.match(","))break}return s}},{name:"String",trigger:["\\text"],parse:e=>re(e),serialize:(e,i)=>{const t=H(i);return null===t||0===t.length?"\\text{}":v(["\\text{",t.map((i=>e.serialize(i))).join(""),"}"])}},{name:"Subscript",trigger:["_"],kind:"infix",serialize:(e,i)=>2===T(i)?e.serialize(L(i,1))+"_{"+e.serialize(L(i,2))+"}":"_{"+e.serialize(L(i,1))+"}"},{name:"Superplus",trigger:["^","+"],kind:"postfix"},{name:"Subplus",trigger:["_","+"],kind:"postfix"},{name:"Superminus",trigger:["^","-"],kind:"postfix"},{name:"Subminus",trigger:["_","-"],kind:"postfix"},{trigger:["^","*"],kind:"postfix",parse:(e,i)=>["Superstar",i]},{name:"Superstar",trigger:["^","\\star"],kind:"postfix"},{trigger:["_","*"],kind:"postfix",parse:(e,i)=>["Substar",i]},{name:"Substar",trigger:["_","\\star"],kind:"postfix"},{name:"Superdagger",trigger:["^","\\dagger"],kind:"postfix"},{trigger:["^","\\dag"],kind:"postfix",parse:(e,i)=>["Superdagger",i]},{name:w,trigger:["^","\\prime"],kind:"postfix"},{trigger:["^","\\doubleprime"],kind:"postfix",parse:(e,i)=>[w,null!=i?i:"Nothing",2]},{name:"Derivative",serialize:(e,i)=>{var t;const n=null!==(t=Z(L(i,1)))&&void 0!==t?t:NaN;if(!isFinite(n))return"";const r=e.serialize(L(i,2));return 1===n?r+"^{\\prime}":2===n?r+"^{\\doubleprime}":r+"^{("+Number(n).toString()+")}"}},{name:"Piecewise",trigger:"cases",kind:"environment",parse:e=>{var i;return["Piecewise",null!==(i=e.matchTabular("cases"))&&void 0!==i?i:"Nothing"]},serialize:(e,i)=>{if(C(L(i,1))!==y)return"";const t=H(L(i,1));let n="",r="";for(const i of t){n+=r;const t=L(i,1);if(null!==t){n+=e.serialize(t);const r=L(i,2);null!==r&&(n+="&"+e.serialize(r))}r="\\\\"}return"\\begin{cases}"+n+"\\end{cases}"}}];function re(e,i){var t,n,r;if(!e.match("<{>"))return"Nothing";const s=[];let a="",o=null;for(;!e.atEnd&&!e.match("<}>");)if("<{>"===e.peek)s.push(re(e));else if(e.match("\\textbf")&&e.match("<{>"))s.push(re(e,{"font-weight":"bold"}));else if(e.match("\\color")&&e.match("<{>")){const i=e.matchColor();i&&e.match("<}>")&&(null!==o&&a?s.push(["Style",a,{dict:o}]):a&&s.push(["String",a]),a="",o={color:i})}else if(e.match("<space>"))a+=" ";else if(e.match("<$>")){const i=e.index,n=null!==(t=e.matchExpression())&&void 0!==t?t:"Nothing";e.skipSpace(),e.match("<$>")?s.push(n):(a+="$",e.index=i)}else if(e.match("<$$>")){const i=e.index,t=null!==(n=e.matchExpression())&&void 0!==n?n:"Nothing";e.skipSpace(),e.match("<$$>")?s.push(t):(a+="$$",e.index=i)}else a+=null!==(r=e.matchChar())&&void 0!==r?r:"";return null!==o&&a?s.push(["Style",a,{dict:o}]):a&&s.push(["String",a]),i?["Style",["String",...s],{dict:i}]:["String",...s]}function se(e,i){return null===i?"":v(W(i,(i=>{const t=P(i);return null===t?e.serialize(i):"<{>"===t?"{":"<}>"===t?"}":"<$>"===t?"$":"<$$>"===t?"$$":"<space>"===t?" ":t})))}function ae(e,i){return null===i?"":v(W(i,(i=>{var t;return null!==(t=P(i))&&void 0!==t?t:e.serialize(i)})))}function oe(e){return null===e?"":e.replace(/[{}\[\]\\:\-\$%]/g,(e=>{var i;return null!==(i={"{":"\\lbrace ","}":"\\rbrace ","[":"\\lbrack ","]":"\\rbrack ",":":"\\colon ","\\":"\\backslash "}[e])&&void 0!==i?i:"\\"+e}))}const le=[{name:"Overscript",trigger:["\\overset"],kind:"infix",precedence:700},{name:"Underscript",trigger:["\\underset"],kind:"infix",precedence:700},{name:"Increment",trigger:["+","+"],kind:"postfix",precedence:880},{name:"Decrement",trigger:["-","-"],kind:"postfix",precedence:880},{name:"PreIncrement",trigger:["+","+"],kind:"prefix",precedence:880},{name:"PreDecrement",trigger:["-","-"],kind:"prefix",precedence:880},{name:"Ring",trigger:["\\circ"],kind:"infix",precedence:265},{name:"Transpose",trigger:["^","T"],kind:"infix"},{name:"ConjugateTranspose",trigger:["^","H"],kind:"infix"},{name:"StringJoin",trigger:["\\lt","\\gt"],kind:"infix",precedence:780},{name:"Starstar",trigger:["\\star","\\star"],kind:"infix",precedence:780},{name:"PartialDerivative",trigger:["\\partial"],kind:"prefix",parse:e=>{var i,t;let n=!1,r="Nothing",s="Nothing";for(;!n;)e.skipSpace(),e.match("_")?s=e.matchRequiredLatexArgument():e.match("^")?r=e.matchRequiredLatexArgument():n=!0;const a=Q(s);if(a&&(s=[y,...a]),!s||!r)return null;let o=null!==(i=e.matchRequiredLatexArgument())&&void 0!==i?i:"Nothing";return"Nothing"!==o&&(o=[o,...null!==(t=e.matchArguments("enclosure"))&&void 0!==t?t:"Nothing"]),["PartialDerivative",o,s,r]},serialize:(e,i)=>{let t="\\partial";const n=L(i,1),r=L(i,2),s=L(i,3);return null!==r&&"Nothing"!==r&&(C(r)===y?t+="_{"+e.serialize(["Sequence",...H(r)])+"}":t+="_{"+e.serialize(r)+"}"),null!==s&&"Nothing"!==s&&(t+="^{"+e.serialize(s)+"}"),null!==n&&"Nothing"!==n&&(t+=e.serialize(n)),t},precedence:740},{name:"OverBar",trigger:["\\overline"],requiredLatexArg:1},{name:"UnderBar",trigger:["\\underline"],requiredLatexArg:1},{name:"OverVector",trigger:["\\vec"],requiredLatexArg:1},{name:"OverTilde",trigger:["\\tilde"],requiredLatexArg:1},{name:"OverHat",trigger:["\\hat"],requiredLatexArg:1},{name:"OverRightArrow",trigger:["\\overrightarrow"],requiredLatexArg:1},{name:"OverLeftArrow",trigger:["\\overleftarrow"],requiredLatexArg:1},{name:"OverRightDoubleArrow",trigger:["\\Overrightarrow"],requiredLatexArg:1},{name:"OverLeftHarpoon",trigger:["\\overleftharpoon"],requiredLatexArg:1},{name:"OverRightHarpoon",trigger:["\\overrightharpoon"],requiredLatexArg:1},{name:"OverLeftRightArrow",trigger:["\\overleftrightarrow"],requiredLatexArg:1},{name:"OverBrace",trigger:["\\overbrace"],requiredLatexArg:1},{name:"OverLineSegment",trigger:["\\overlinesegment"],requiredLatexArg:1},{name:"OverGroup",trigger:["\\overgroup"],requiredLatexArg:1},{trigger:["\\displaystyle"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'display'","'block'"]]}},{trigger:["\\textstyle"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'display'","'inline'"]]}},{trigger:["\\scriptstyle"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'display'","'script'"]]}},{trigger:["\\scriptscriptstyle"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'display'","'scriptscript'"]]}},{trigger:["\\tiny"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",1]]}},{trigger:["\\scriptsize"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",2]]}},{trigger:["\\footnotesize"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",3]]}},{trigger:["\\small"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",4]]}},{trigger:["\\normalsize"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",5]]}},{trigger:["\\large"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",6]]}},{trigger:["\\Large"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",7]]}},{trigger:["\\LARGE"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",8]]}},{trigger:["\\huge"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",9]]}},{trigger:["\\Huge"],parse:e=>{const i=e.matchArguments("group");return null===i?null:["Style",...i,["KeyValuePair","'size'",10]]}},{name:"Style",serialize:(e,i)=>{let t=e.serialize(L(i,1));const n=j(L(i,2));if(null===n)return t;"block"===R(n.display)?t=v(["{\\displaystyle",t,"}"]):"inline"===R(n.display)?t=v(["{\\textstyle",t,"}"]):"script"===R(n.display)?t=v(["{\\scriptstyle",t,"}"]):"scriptscript"===R(n.display)&&(t=v(["{\\scriptscriptstyle",t,"}"]));const r=Z(n.size);return null!==r&&r>=1&&r<=10&&(t=v(["{",{1:"\\tiny",2:"\\scriptsize",3:"\\footnotesize",4:"\\small",5:"\\normalsize",6:"\\large",7:"\\Large",8:"\\LARGE",9:"\\huge",10:"\\Huge"}[r],t,"}"])),t}},{trigger:["\\!"],parse:()=>["HorizontalSpacing","Nothing",-3]},{trigger:["\\ "],parse:()=>["HorizontalSpacing","Nothing",6]},{trigger:["\\:"],parse:()=>["HorizontalSpacing","Nothing",4]},{trigger:["\\enskip"],parse:()=>["HorizontalSpacing","Nothing",9]},{trigger:["\\quad"],parse:()=>["HorizontalSpacing","Nothing",18]},{trigger:["\\qquad"],parse:()=>["HorizontalSpacing","Nothing",36]},{trigger:["\\,"],parse:()=>["HorizontalSpacing","Nothing",3]},{trigger:["\\;"],parse:()=>["HorizontalSpacing","Nothing",5]},{trigger:["\\enspace"],parse:()=>["HorizontalSpacing","Nothing",9]},{name:"HorizontalSpacing",serialize:(e,i)=>{var t;if("Nothing"===z(L(i,1))){const e=Z(L(i,2));return null===e?"":null!==(t={"-3":"\\!",6:"\\ ",3:"\\,",4:"\\:",5:"\\;",9:"\\enspace",18:"\\quad",36:"\\qquad"}[e])&&void 0!==t?t:""}return""}}];function ue(e){return i=>{var t,n;let r=!1,s=0;if(i.skipSpace(),i.match("^")){if(i.skipSpace(),i.match("<{>")){i.skipSpace(),i.match("-")&&i.match("1")&&(r=!0);do{i.match("\\doubleprime")&&(s+=2),i.match("\\prime")&&(s+=1),i.match("'")&&(s+=1)}while(!i.match("<}>")&&!i.atEnd)}let e=!1;for(;!e;)i.skipSpace(),i.match("\\doubleprime")?s+=2:i.match("\\prime")||i.match("'")?s+=1:e=!0}let a=null!==(n=null!==(t={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arctan","\\arcsec":"Arcsec","\\arccsc":" Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arcosh","\\artanh":"Artanh","\\arcsech":"Arcsech","\\arccsch":"Arcsch","\\ch":"Cosh","\\cos":"Cos","\\cosec":"Csc","\\cosh":"Csch","\\cot":"Cot","\\cotg":"Cot","\\coth":"Coth","\\csc":"Csc","\\ctg":"Cot","\\cth":"Coth","\\sec":"Sec","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tanh":"Tanh","\\tg":"Tan","\\th":"Tanh"}[null!=e?e:""])&&void 0!==t?t:e)&&void 0!==n?n:"";r&&(a=["InverseFunction",a]),s>=1&&(a=["Derivative",s,a]);const o=i.matchArguments("implicit");return null===o?[a,"Nothing"]:[a,...o]}}const ce=[{name:"Arcsin",trigger:["\\arcsin"],parse:ue("Arcsin")},{name:"Arccos",trigger:["\\arccos"],parse:ue("Arccos")},{name:"Arctan",trigger:["\\arctan"],parse:ue("Arctan")},{trigger:["\\arctg"],parse:ue("Arctan")},{name:"Arccot",trigger:["\\arcctg"],parse:ue("Arccot")},{name:"Arcsec",trigger:["\\arcsec"],parse:ue("Arcsec")},{name:"Arccsc",trigger:["\\arccsc"],parse:ue("Arccsc")},{name:"Arsinh",trigger:["\\arsinh"],parse:ue("Arsinh")},{name:"Arcosh",trigger:["\\arcosh"],parse:ue("Arcosh")},{name:"Artanh",trigger:["\\artanh"],parse:ue("Artanh")},{name:"Arsech",trigger:["\\arsech"],parse:ue("Arsech")},{name:"Arcsch",trigger:["\\arcsch"],parse:ue("Arcsch")},{trigger:["\\ch"],parse:ue("Cosh")},{name:"Cosec",trigger:["\\cosec"],parse:ue("Cosec")},{name:"Cosh",trigger:["\\cosh"],parse:ue("Cosh")},{name:"Cot",trigger:["\\cot"],parse:ue("Cot")},{trigger:["\\cotg"],parse:ue("Cot")},{name:"Coth",trigger:["\\coth"],parse:ue("Coth")},{name:"Csc",trigger:["\\csc"],parse:ue("Csc")},{trigger:["\\ctg"],parse:ue("Cot")},{trigger:["\\cth"],parse:ue("Cotanh")},{name:"Sec",trigger:["\\sec"],parse:ue("Sec")},{name:"Sinh",trigger:["\\sinh"],parse:ue("Sinh")},{trigger:["\\sh"],parse:ue("Sinh")},{name:"Tan",trigger:["\\tan"],parse:ue("Tan")},{trigger:["\\tg"],parse:ue("Tan")},{name:"Tanh",trigger:["\\tanh"],parse:ue("Tanh")},{trigger:["\\th"],parse:ue("Tanh")},{name:"Cos",trigger:["\\cos"],parse:ue("Cos")},{name:"Sin",trigger:["\\sin"],parse:ue("Sin")}],he=[{name:"AlgebraicNumber",trigger:"\\bar\\Q"},{name:"ComplexNumber",trigger:["\\C"]},{trigger:"\\mathbb{C}",parse:"ComplexNumber"},{name:"ImaginaryNumber",trigger:["\\imaginaryI\\R"]},{name:"ExtendedComplexNumber",trigger:["\\bar\\C"]},{name:"EmptySet",trigger:["\\emptyset"]},{trigger:["\\varnothing"],parse:"EmptySet"},{name:"Integer",trigger:["\\Z"]},{trigger:"\\mathbb{Z}",parse:"Integer"},{name:"RationalNumber",trigger:["\\Q"]},{name:"RealNumber",trigger:["\\R"]},{name:"ExtendedRealNumber",trigger:["\\bar\\R"]},{name:"TranscendentalNumber",trigger:"\\R-\\bar\\Q"},{trigger:"\\R\\backslash\\bar\\Q",parse:"TranscendentalNumber"},{name:"NegativeNumber",trigger:"\\R^-"},{trigger:"\\R^{-}",parse:"NegativeNumber"},{trigger:"\\R_-",parse:"NegativeNumber"},{trigger:"\\R_{-}",parse:"NegativeNumber"},{trigger:"\\R^{\\lt}",parse:"NegativeNumber"},{name:"PositiveNumber",trigger:"\\R^+"},{trigger:"\\R^{+}",parse:"PositiveNumber"},{trigger:"\\R_+",parse:"PositiveNumber"},{trigger:"\\R_{+}",parse:"PositiveNumber"},{trigger:"\\R^{\\gt}",parse:"PositiveNumber"},{name:"NonPositiveNumber",trigger:"\\R^{0-}"},{trigger:"\\R^{-0}",parse:"NonPositiveNumber"},{trigger:"\\R^{\\leq}",parse:"NonPositiveNumber"},{name:"NegativeInteger",trigger:"\\Z^-"},{trigger:"\\Z^-",parse:"NegativeInteger"},{trigger:"\\Z^{-}",parse:"NegativeInteger"},{trigger:"\\Z_-",parse:"NegativeInteger"},{trigger:"\\Z_{-}",parse:"NegativeInteger"},{trigger:"\\Z^{\\lt}",parse:"NegativeInteger"},{name:"PositiveInteger",trigger:"\\Z^+"},{trigger:"\\Z^{+}",parse:"PositiveInteger"},{trigger:"\\Z_+",parse:"PositiveInteger"},{trigger:"\\Z_{+}",parse:"PositiveInteger"},{trigger:"\\Z^{\\gt}",parse:"PositiveInteger"},{trigger:"\\Z^{\\gt0}",parse:"PositiveInteger"},{trigger:"\\N^+",parse:"PositiveInteger"},{trigger:"\\N^{+}",parse:"PositiveInteger"},{trigger:"\\N^*",parse:"PositiveInteger"},{trigger:"\\N^{*}",parse:"PositiveInteger"},{trigger:"\\N^\\star",parse:"PositiveInteger"},{trigger:"\\N^{\\star}",parse:"PositiveInteger"},{trigger:"\\N_1",parse:"PositiveInteger"},{trigger:"\\N_{1}",parse:"PositiveInteger"},{name:"NonNegativeInteger",trigger:["\\N"]},{trigger:"\\Z^{+0}",parse:"NonNegativeInteger"},{trigger:"\\Z^{\\geq}",parse:"NonNegativeInteger"},{trigger:"\\Z^{\\geq0}",parse:"NonNegativeInteger"},{trigger:"\\Z^{0+}",parse:"NonNegativeInteger"},{trigger:"\\mathbb{N}",parse:"NonNegativeInteger"},{trigger:"\\N_0",parse:"NonNegativeInteger"},{trigger:"\\N_{0}",parse:"NonNegativeInteger"},{name:"CartesianProduct",trigger:["\\times"],kind:"infix",associativity:"right",precedence:390,parse:(e,i,t)=>{if(390<i.minPrec)return null;const n=e.computeEngine;if(!n||!n.box(t).valueDomain.isSubdomainOf("Set"))return null;const r=e.index,s=e.matchExpression(Object.assign(Object.assign({},i),{minPrec:390}));return null===s||!0!==n.box(t).valueDomain.isSubdomainOf("Set")?(e.index=r,null):["CartesianProduct",t,s]}},{name:"Complement",trigger:["^","\\complement"],kind:"infix"},{name:"Intersection",trigger:["\\cap"],kind:"infix",precedence:350},{name:"Interval",serialize:me},{name:"Multiple",serialize:me},{name:"Union",trigger:["\\cup"],kind:"infix",precedence:350},{name:"Range",serialize:me},{name:"SetMinus",trigger:["\\setminus"],kind:"infix",precedence:650},{name:"SymmetricDifference",trigger:["\\triangle"],kind:"infix",precedence:260},{trigger:["\\ni"],kind:"infix",associativity:"right",precedence:160,parse:(e,i,t)=>{const n=e.matchExpression(i);return null===n?null:["Element",n,t]}},{name:"Element",trigger:["\\in"],kind:"infix",precedence:240},{name:"NotElement",trigger:["\\notin"],kind:"infix",precedence:240},{name:"NotSubset",trigger:["\\nsubset"],kind:"infix",associativity:"right",precedence:240},{name:"NotSuperset",trigger:["\\nsupset"],kind:"infix",associativity:"right",precedence:240},{name:"NotSubsetNotEqual",trigger:["\\nsubseteq"],kind:"infix",associativity:"right",precedence:240},{name:"NotSupersetNotEqual",trigger:["\\nsupseteq"],kind:"infix",associativity:"right",precedence:240},{name:"SquareSubset",trigger:["\\sqsubset"],kind:"infix",associativity:"right",precedence:265},{name:"SquareSubsetEqual",trigger:["\\sqsubseteq"],kind:"infix",associativity:"right",precedence:265},{name:"SquareSuperset",trigger:["\\sqsupset"],kind:"infix",associativity:"right",precedence:265},{name:"SquareSupersetEqual",trigger:["\\sqsupseteq"],kind:"infix",associativity:"right",precedence:265},{name:"Subset",trigger:["\\subset"],kind:"infix",associativity:"right",precedence:240},{trigger:["\\subsetneq"],kind:"infix",associativity:"right",precedence:240,parse:"Subset"},{trigger:["\\varsubsetneqq"],kind:"infix",associativity:"right",precedence:240,parse:"Subset"},{name:"SubsetEqual",trigger:["\\subseteq"],kind:"infix",precedence:240},{name:"Superset",trigger:["\\supset"],kind:"infix",associativity:"right",precedence:240},{trigger:["\\supsetneq"],kind:"infix",associativity:"right",precedence:240,parse:"Superset"},{trigger:["\\varsupsetneq"],kind:"infix",associativity:"right",precedence:240,parse:"Superset"},{name:"SupersetEqual",trigger:["\\supseteq"],kind:"infix",associativity:"right",precedence:240}];function me(e,i){if(null===i)return"";const t=C(i);return null===t?"":"Set"===t?0===T(i)?"\\emptyset":2===T(i)&&"Condition"===C(L(i,2))?v(["\\left\\lbrace",e.serialize(L(i,1)),"\\middle\\mid",e.serialize(L(i,2)),"\\right\\rbrace"]):v(["\\left\\lbrace",...H(i).map((i=>e.serialize(i)+" ,")),"\\right\\rbrace"]):(e.numericSetStyle(i,e.level),"")}const de=[["Alpha","\\alpha",945],["Beta","\\beta",946],["Delta","\\delta",948],["Epsilon","\\epsilon",949],["EpsilonSymbol","\\varepsilon",1013],["Zeta","\\zeta",950],["Eta","\\eta",951],["Theta","\\theta",952],["ThetaSymbol","\\vartheta",977],["Iota","\\iota",953],["Kappa","\\kappa",954],["KappaSymbol","\\varkappa",1008],["Lambda","\\lambda",955],["Mu","\\mu",956],["Nu","\\nu",957],["Xi","\\xi",958],["Omicron","\\omicron",959],["PiSymbol","\\varpi",982],["Rho","\\rho",961],["RhoSymbol","\\varrho",1009],["Sigma","\\sigma",963],["FinalSigma","\\varsigma",962],["Tau","\\tau",964],["Phi","\\phi",981],["PhiLetter","\\varphi",966],["Upsilon","\\upsilon",965],["Chi","\\chi",967],["Psi","\\psi",968],["Omega","\\omega",969],["CapitalAlpha","\\Alpha",913],["CapitalBeta","\\Beta",914],["CapitalGamma","\\Gamma",915],["CapitalDelta","\\Delta",916],["CapitalEpsilon","\\Epsilon",917],["CapitalZeta","\\Zeta",918],["CapitalEta","\\Eta",919],["CapitalTheta","\\Theta",920],["CapitaIota","\\Iota",921],["CapitalKappa","\\Kappa",922],["CapitalLambda","\\Lambda",923],["CapitalMu","\\Mu",924],["CapitalNu","\\Nu",925],["CapitalXi","\\Xi",926],["CapitalOmicron","\\Omicron",927],["CapitalPi","\\Pi",928],["CapitalRho","\\Rho",929],["CapitalSigma","\\Sigma",931],["CapitalTau","\\Tau",932],["CapitalPhi","\\Phi",934],["CapitalUpsilon","\\Upsilon",933],["CapitalChi","\\Chi",935],["CapitalPsi","\\Psi",936],["CapitalOmega","\\Omega",937],["Digamma","\\digamma",989],["Alef","\\aleph",8501],["Bet","\\beth",8502],["Gimel","\\gimel",8503],["Dalet","\\daleth",8504],["TurnedCapitalF","\\Finv",8498],["TurnedCapitalG","\\Game",8513],["Weierstrass","\\wp",8472],["Eth","\\eth",240],["InvertedOhm","\\mho",8487],["BlackClubSuit","\\clubsuit",9827],["WhiteHeartSuit","\\heartsuit",9825],["BlackSpadeSuit","\\spadesuit",9824],["WhiteDiamondSuit","\\diamondsuit",9826],["Sharp","\\sharp",9839],["Flat","\\flat",9837],["Natural","\\natural",9838]],fe=[...de.map((([e,i,t])=>({name:e,trigger:[i],parse:e}))),...de.map((([e,i,t])=>({trigger:[String.fromCodePoint(t)],parse:e})))],ge={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","|":"\\vert","||":"\\Vert","\\lceil":"\\lceil","\\lfloor":"\\lfloor","\\rceil":"\\rceil","\\rfloor":"\\rfloor"};function pe(e){return Array.isArray(e)?e.length:1}function ve(e,o){var l,u,c,h,m,d,f,g,y;if(!function(e,a){var o,l;const u=null!==(l=null!==(o=e.name)&&void 0!==o?o:e.trigger)&&void 0!==l?l:e.openDelimiter;if(void 0!==e.serialize&&!e.name)return a({severity:"warning",message:["invalid-dictionary-entry",u,"Unexpected serialize property without a name property"]}),!1;if(t(e)){if(e.trigger)return a({severity:"warning",message:["invalid-dictionary-entry",u,`Unexpected 'trigger' "${e.trigger}". 'matchfix' operators use a 'openDelimiter' and 'closeDelimiter' instead of a trigger. `]}),!1;if(!e.openDelimiter||!e.closeDelimiter)return a({severity:"warning",message:["invalid-dictionary-entry",u,"Expected `openDelimiter` and a `closeDelimiter` for matchfix operator"]}),!1;if(typeof e.openDelimiter!=typeof e.closeDelimiter)return a({severity:"warning",message:["invalid-dictionary-entry",u,"Expected `openDelimiter` and `closeDelimiter` to both be strings or array of LatexToken"]}),!1}if(n(e)||s(e)||r(e)){if(Array.isArray(e.trigger)&&("_"===e.trigger[0]||"^"===e.trigger[0])||"string"==typeof e.trigger&&(e.trigger.startsWith("^")||e.trigger.startsWith("_"))){if(void 0!==e.precedence||void 0!==e.associativity)return a({severity:"warning",message:["invalid-dictionary-entry",u,'Unexpected "precedence" or "associativity" for superscript/subscript operator']}),!1}else if(void 0===e.precedence)return a({severity:"warning",message:["invalid-dictionary-entry",u,`Expected a "precedence" for ${e.kind} operator`]}),!1}else if(void 0!==e.associativity)return a({severity:"warning",message:["invalid-dictionary-entry",u,'Unexpected "associativity" operator']}),!1;return i(e)||void 0===e.optionalLatexArg&&void 0===e.requiredLatexArg?t(e)||e.trigger||e.name?void 0!==e.parse||void 0!==e.name||(a({severity:"warning",message:["invalid-dictionary-entry",u,"Expected a 'parse' or 'name'"]}),!1):(a({severity:"warning",message:["invalid-dictionary-entry",u,"Expected at least a 'trigger' or a 'name'"]}),!1):(a({severity:"warning",message:["invalid-dictionary-entry",u,'Unexpected "optionalLatexArg" or "requiredLatexArg" for non-symbol']}),!1)}(e,o))return[null,null];const N={name:e.name,kind:"kind"in e?e.kind:"symbol"};if("matchfix"===N.kind&&t(e)){if(N.openDelimiter=e.openDelimiter,N.closeDelimiter=e.closeDelimiter,"function"==typeof e.serialize)N.serialize=e.serialize;else{const e="string"==typeof N.openDelimiter?ge[N.openDelimiter]:b(N.openDelimiter),i="string"==typeof N.closeDelimiter?ge[N.closeDelimiter]:b(N.closeDelimiter);N.serialize=(t,n)=>v([e,t.serialize(n),i])}if("function"==typeof e.parse)N.parse=e.parse;else{const i=null!==(l=e.parse)&&void 0!==l?l:e.name;N.parse=(e,t)=>[i,t]}return[null,N]}if("environment"===N.kind&&a(e)){const i=e.trigger;return N.serialize=(e,t)=>`\\begin{${i}${e.serialize(L(t,1))}\\end{${i}`,N.parse=null!==(u=e.parse)&&void 0!==u?u:()=>null,[i,N]}const x="string"==typeof e.trigger?p(e.trigger,[]):e.trigger,_=x?b(x):"";if(e.trigger,"symbol"===N.kind&&i(e)&&(N.precedence=null!==(c=e.precedence)&&void 0!==c?c:1e4,N.optionalLatexArg=null!==(h=e.optionalLatexArg)&&void 0!==h?h:0,N.requiredLatexArg=null!==(m=e.requiredLatexArg)&&void 0!==m?m:0),"infix"!==N.kind&&"prefix"!==N.kind&&"postfix"!==N.kind||!(n(e)||r(e)||s(e))||(!x||"^"!==x[0]&&"_"!==x[0]?N.precedence=null!==(d=e.precedence)&&void 0!==d?d:1e4:N.precedence=720),"infix"===N.kind&&n(e))if(N.associativity=null!==(f=e.associativity)&&void 0!==f?f:"non","function"==typeof e.parse)N.parse=e.parse;else if(!x||"^"!==x[0]&&"_"!==x[0]){const i=null!==(y=e.parse)&&void 0!==y?y:e.name,t=N.precedence,n=N.associativity;N.parse=(e,r,s)=>{if(t<r.minPrec)return null;const a=e.matchExpression(Object.assign(Object.assign({},r),{minPrec:t}));return"string"!=typeof i?[i,s,null!=a?a:"Missing"]:B(i,s,null!=a?a:"Missing",n)}}else{const i=null!==(g=e.parse)&&void 0!==g?g:e.name;N.parse=(e,t,n)=>{var r,s;return[i,null!==(r=L(n,1))&&void 0!==r?r:"Missing",null!==(s=L(n,2))&&void 0!==s?s:"Missing"]}}else if("function"==typeof e.parse)N.parse=e.parse;else if(void 0!==e.parse)N.parse=()=>e.parse;else if(void 0===e.parse&&void 0!==e.name)if("postfix"===N.kind)N.parse=(i,t)=>t?[e.name,t]:null;else if("prefix"===N.kind){const i=N.precedence,t=e.name;N.parse=(e,n)=>{if(i<n.minPrec)return null;const r=e.matchExpression(Object.assign(Object.assign({},n),{minPrec:i}));return null===r?null:[t,r]}}return"function"==typeof e.serialize||"string"==typeof e.serialize?N.serialize=e.serialize:x&&("postfix"===N.kind?N.serialize="#1"+_:"prefix"===N.kind?N.serialize=_+"#1":"infix"===N.kind?N.serialize="#1"+_+"#2":"symbol"===N.kind?N.serialize=_:N.serialize=""),[null!=x?x:null,N]}const be={algebra:[{name:"To",trigger:["\\to"],kind:"infix",precedence:270}],arithmetic:ee,calculus:[{name:"Integral",trigger:["\\int"],parse:function(e){let i="Nothing",t="Nothing",n=!1;for(;!n;)e.skipSpace(),e.match("_")?t=e.matchRequiredLatexArgument():e.match("^")?i=e.matchRequiredLatexArgument():n=!0;const r=e.matchExpression({tokens:["d"]});return["Integral",null!=r?r:"",null!=i?i:"Nothing",null!=t?t:"Nothing"]},serialize:function(e,i){return""}}],core:ne,logic:[{name:"True",trigger:["\\mathrm","<{>","T","r","u","e","<}>"],serialize:"\\mathrm{True}"},{name:"False",trigger:["\\mathrm","<{>","F","a","l","s","e","<}>"],serialize:"\\mathrm{False}"},{name:"Maybe",trigger:["\\mathrm","<{>","M","a","y","b","e","<}>"],serialize:"\\mathrm{Maybe}"}],relop:[{trigger:["!","<"],kind:"infix",associativity:"right",precedence:246,parse:"NotLess"},{name:"NotLess",trigger:["\\nless"],kind:"infix",associativity:"right",precedence:246},{trigger:["<"],kind:"infix",associativity:"right",precedence:245,parse:"Less"},{name:"Less",trigger:["\\lt"],kind:"infix",associativity:"right",precedence:245},{trigger:["<","="],kind:"infix",associativity:"right",precedence:241,parse:"LessEqual"},{name:"LessEqual",trigger:["\\le"],kind:"infix",associativity:"right",precedence:241},{trigger:["\\leq"],kind:"infix",associativity:"right",precedence:241,parse:"Equal"},{trigger:["\\leqslant"],kind:"infix",associativity:"right",precedence:265,parse:"LessEqual"},{name:"LessNotEqual",trigger:["\\lneqq"],kind:"infix",associativity:"right",precedence:260},{name:"NotLessNotEqual",trigger:["\\nleqq"],kind:"infix",associativity:"right",precedence:260},{name:"LessOverEqual",trigger:["\\leqq"],kind:"infix",associativity:"right",precedence:265},{name:"GreaterOverEqual",trigger:["\\geqq"],kind:"infix",associativity:"right",precedence:265,parse:"GreaterEqual"},{name:"Equal",trigger:["="],kind:"infix",associativity:"right",precedence:260},{trigger:["*","="],kind:"infix",associativity:"right",precedence:260,parse:"StarEqual"},{name:"StarEqual",trigger:["\\star","="],kind:"infix",associativity:"right",precedence:260},{name:"PlusEqual",trigger:["+","="],kind:"infix",associativity:"right",precedence:260},{name:"MinusEqual",trigger:["-","="],kind:"infix",associativity:"right",precedence:260},{name:"SlashEqual",trigger:["/","="],kind:"infix",associativity:"right",precedence:260},{name:"EqualEqual",trigger:["=","="],kind:"infix",associativity:"right",precedence:260},{name:"EqualEqualEqual",trigger:["=","=","="],kind:"infix",associativity:"right",precedence:265},{name:"TildeFullEqual",trigger:["\\cong"],kind:"infix",associativity:"right",precedence:260},{name:"NotTildeFullEqual",trigger:["\\ncong"],kind:"infix",associativity:"right",precedence:260},{trigger:[":","="],kind:"infix",associativity:"right",precedence:260,parse:"Assign"},{name:"Assign",trigger:["\\coloneq"],kind:"infix",associativity:"right",precedence:260},{name:"Approx",trigger:["\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"NotApprox",trigger:["\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"ApproxEqual",trigger:["\\approxeq"],kind:"infix",associativity:"right",precedence:260},{name:"NotApproxEqual",trigger:["!","\\approxeq"],kind:"infix",associativity:"right",precedence:250},{name:"NotEqual",trigger:["\\ne"],kind:"infix",associativity:"right",precedence:255},{name:"Unequal",trigger:["!","="],kind:"infix",associativity:"right",precedence:260},{name:"GreaterEqual",trigger:["\\ge"],kind:"infix",associativity:"right",precedence:242},{trigger:["\\geq"],kind:"infix",associativity:"right",precedence:242,parse:"GreaterEqual"},{trigger:[">","="],kind:"infix",associativity:"right",precedence:243,parse:"GreaterEqual"},{trigger:["\\geqslant"],kind:"infix",associativity:"right",precedence:265,parse:"GreaterEqual"},{name:"GreaterNotEqual",trigger:["\\gneqq"],kind:"infix",associativity:"right",precedence:260},{name:"NotGreaterNotEqual",trigger:["\\ngeqq"],kind:"infix",associativity:"right",precedence:260},{trigger:[">"],kind:"infix",associativity:"right",precedence:245,parse:"Greater"},{name:"Greater",trigger:["\\gt"],kind:"infix",associativity:"right",precedence:245},{name:"NotGreater",trigger:["\\ngtr"],kind:"infix",associativity:"right",precedence:244},{trigger:["!",">"],kind:"infix",associativity:"right",precedence:244,parse:"NotGreater"},{name:"RingEqual",trigger:["\\circeq"],kind:"infix",associativity:"right",precedence:260},{name:"TriangleEqual",trigger:["\\triangleq"],kind:"infix",associativity:"right",precedence:260},{name:"DotEqual",trigger:["\\doteq"],kind:"infix",associativity:"right",precedence:265},{name:"DotEqualDot",trigger:["\\doteqdot"],kind:"infix",associativity:"right",precedence:265},{name:"FallingDotEqual",trigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:265},{name:"RisingDotEqual",trigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:265},{name:"QuestionEqual",trigger:["\\questeq"],kind:"infix",associativity:"right",precedence:260},{name:"Equivalent",trigger:["\\equiv"],kind:"infix",associativity:"right",precedence:260},{trigger:["\\iff"],kind:"infix",parse:"Equivalent",associativity:"right",precedence:260},{name:"MuchLess",trigger:["\\ll"],kind:"infix",associativity:"right",precedence:260},{name:"MuchGreater",trigger:["\\gg"],kind:"infix",associativity:"right",precedence:260},{name:"Precedes",trigger:["\\prec"],kind:"infix",associativity:"right",precedence:260},{name:"Succeeds",trigger:["\\succ"],kind:"infix",associativity:"right",precedence:260},{name:"PrecedesEqual",trigger:["\\preccurlyeq"],kind:"infix",associativity:"right",precedence:260},{name:"SucceedsEqual",trigger:["\\curlyeqprec"],kind:"infix",associativity:"right",precedence:260},{name:"NotPrecedes",trigger:["\\nprec"],kind:"infix",associativity:"right",precedence:260},{name:"NotSucceeds",trigger:["\\nsucc"],kind:"infix",associativity:"right",precedence:260},{name:"Between",trigger:["\\between"],kind:"infix",associativity:"right",precedence:265}],other:le,physics:[{name:"mu-0",trigger:"\\mu_0"}],sets:he,symbols:fe,trigonometry:ce},ye={"(":["\\lparen","("],")":["\\rparen",")"],"[":["\\lbrack"],"]":["\\rbrack"],"<":["<","\\langle"],">":[">","\\rangle"],"{":["\\{","\\lbrace"],"}":["\\}","\\rbrace"],":":[":","\\colon"],"|":["|","\\|","\\lvert","\\rvert"],"||":["||","\\Vert","\\lVert","\\rVert"],"\\lfloor":["\\lfloor"],"\\rfloor":["\\rfloor"],"\\lceil":["\\lceil"],"\\rceil":["\\rceil"],"\\ulcorner":["\\ulcorner"],"\\urcorner":["\\urcorner"],"\\llcorner":["\\llcorner"],"\\lrcorner":["\\lrcorner"],"\\lgroup":["\\lgroup"],"\\rgroup":["\\rgroup"],"\\lmoustache":["\\lmoustache"],"\\rmoustache":["\\rmoustache"]},Ne={":":[":","\\colon"],"|":["|","\\|","\\mid","\\mvert"]},xe={"\\left":"\\right","\\bigl":"\\bigr","\\Bigl":"\\Bigr","\\biggl":"\\biggr","\\Biggl":"\\Biggr","\\big":"\\big","\\Big":"\\Big","\\bigg":"\\bigg","\\Bigg":"\\Bigg"},_e=["\\middle","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],Se={"(":")","[":"]","\\{":"\\}","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},we={precision:6,positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalMarker:".",groupSeparator:"\\,",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",notation:"auto",truncationMarker:"\\ldots",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}",imaginaryNumber:"\\imaginaryI",avoidExponentsInRange:[-7,20]},Ee={applyInvisibleOperator:"auto",skipSpace:!0,parseArgumentsOfUnknownLatexCommands:!0,parseNumbers:!0,parseUnknownSymbol:e=>/^[fg]$/.test(e)?"function":/^[a-zA-Z]+$/.test(e)?"symbol":"unknown",preserveLatex:!0};class Ie{constructor(e,i,t,n,r){this.index=0,this._lastPeek="",this._peekCounter=0,this.options=Object.assign(Object.assign(Object.assign({},we),Ee),i),this.engine=n,this._tokens=e,this.onError=r,this._dictionary=t}updateOptions(e){for(const[i,t]of Object.entries(e))this.options[i]=t}clone(e,i){return new Ie(this._tokens.slice(e,i),this.options,this._dictionary,this.engine,this.onError)}get atEnd(){return this.index>=this._tokens.length}get peek(){if(this._tokens[this.index]===this._lastPeek?this._peekCounter+=1:this._peekCounter=0,this._peekCounter>=1024)throw Error(`Infinite loop detected while parsing "${this.latex(0)}" at ${this._lastPeek} (index ${this.index})`);return this._lastPeek=this._tokens[this.index],this._tokens[this.index]}atTerminator(e){const i=this.index;return!!this.atEnd||!!e&&(!(!e.condition||!e.condition(this))||!!(e.tokens&&e.tokens.length>0&&this.matchAll(e.tokens))&&(this.index=i,!0))}latex(e,i){return b(this._tokens.slice(e,i))}latexAhead(e){return b(this._tokens.slice(this.index,this.index+e))}latexBefore(){return this.latex(0,this.index)}latexAfter(){return this.latex(this.index)}lookAhead(){let e=Math.min(this._dictionary.lookahead,this._tokens.length-this.index);const i=[];for(;e>0;)i[e]=this.latexAhead(e--);return i}peekDefinitions(e){let i;i="operator"===e?this.lookAhead().map(((e,i)=>{var t,n,r,s,a;return null!==(s=null!==(n=null===(t=this._dictionary.infix[i])||void 0===t?void 0:t.get(e))&&void 0!==n?n:null===(r=this._dictionary.postfix[i])||void 0===r?void 0:r.get(e))&&void 0!==s?s:null===(a=this._dictionary.prefix[i])||void 0===a?void 0:a.get(e)})):this.lookAhead().map(((i,t)=>{var n;return null===(n=this._dictionary[e][t])||void 0===n?void 0:n.get(i)}));const t=[];for(let e=i.length;e>0;e--)if(void 0!==i[e])for(const n of i[e])t.push([n,e]);return 0===t.length?null:t}next(){return this._tokens[this.index++]}skipSpace(){if(!this.atEnd&&"<{>"===this.peek&&"<}>"===this._tokens[this.index+1])return this.index+=2,this.skipSpace(),!0;let e=!1;if(!this.options.skipSpace)return!1;for(;this.match("<space>");)e=!0;return e&&this.skipSpace(),e}matchChar(){var e;const i=this.index;let t=0;for(;this.match("^");)t+=1;if(t>=2){let e="",i=0;for(;i!=t;){const t=this.matchAny(["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"]);if(!t)break;e+=t,i+=1}if(e.length===t)return String.fromCodePoint(Number.parseInt(e,16))}else{if(this.match("\\char")){let i=Math.floor(null!==(e=this.matchLatexNumber())&&void 0!==e?e:NaN);return(!Number.isFinite(i)||i<0||i>1114111)&&(i=10067),String.fromCodePoint(i)}if(this.match("\\unicode"))if("<{>"===this.peek){const e=this.matchLatexNumber();if(this.match("<}>")&&null!==e&&e>=0&&e<=1114111)return String.fromCodePoint(e)}else{const e=this.matchLatexNumber();if(null!==e&&e>=0&&e<=1114111)return String.fromCodePoint(e)}}return this.index=i,this.next()}matchColor(e=!1){let i="";for(;!this.atEnd&&"}"!==this.peek;)i+=this.next();return i}matchLatexDimension(){return null}match(e){return this._tokens[this.index]===e&&(this.index++,!0)}matchAll(e){"string"==typeof e&&(e=[e]);let i=!0,t=0;do{i=this._tokens[this.index+t]===e[t++]}while(i&&t<e.length);return i&&(this.index+=t),i}matchAny(e){return e.includes(this._tokens[this.index])?this._tokens[this.index++]:""}matchWhile(e){const i=[];for(;e.includes(this._tokens[this.index]);)i.push(this._tokens[this.index++]);return i}matchSign(){let e=!1,i=!1;for(;!i;)this.skipSpace()?i=!1:this.matchAny(["-","\u2212"])?(e=!e,i=!1):i=!this.matchAny(["+","\ufe62"]);return e?"-":"+"}matchDecimalDigits(){let e="",i=!1;for(;!i;)if(e+=this.matchWhile(["0","1","2","3","4","5","6","7","8","9"]).join(""),i=!0,this.options.groupSeparator){const e=this.index;this.skipSpace(),this.match(this.options.groupSeparator)&&(this.skipSpace(),/[0-9]/.test(this.peek)?i=!1:this.index=e)}return e}matchSignedInteger(){const e=this.index,i=this.matchSign(),t=this.matchDecimalDigits();return t?("-"===i?"-":"")+t:(this.index=e,"")}matchExponent(){const e=this.index;let i="";if(this.matchAny(["e","E"])){const e=this.matchSignedInteger();e&&(i="e"+e)}if(i)return i;if(this.match("\\times")&&(this.skipSpace(),this.match("1")&&this.match("0")&&this.match("^"))){if(/[0-9]/.test(this.peek))return"e"+this.next();if(this.match("<{>")){this.skipSpace();const e=this.matchSignedInteger();if(this.skipSpace(),this.match("<}>")&&e)return"e"+e}}return this.index=e,""}matchNumber(){var e,i;if(!this.options.parseNumbers)return"";const t=this.index;this.skipSpace(),this.match("+");let n=!1;if(this.match(this.options.decimalMarker)){const e=this.index;if(!this.matchAny(["0","1","2","3","4","5","6","7","8","9"]))return this.index=t,"";this.index=e,n=!0}let r=this.matchDecimalDigits();return r?(!n&&this.match(null!==(e=this.options.decimalMarker)&&void 0!==e?e:"")&&(r+="."+(null!==(i=this.matchDecimalDigits())&&void 0!==i?i:"0")),(n?"0.":"")+r+this.matchExponent()):(this.index=t,"")}matchLatexNumber(e=!0){var i,t;let n=!1,r=this.peek;for(;"<space>"===r||"+"===r||"-"===r;)"-"===r&&(n=!n),this.next(),r=this.peek;let s=10,a=["0","1","2","3","4","5","6","7","8","9"];if(this.match("'"))s=8,a=["0","1","2","3","4","5","6","7"],e=!0;else if(this.match('"')||this.match("x"))s=16,a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],e=!0;else if(this.match("`"))return r=this.next(),r?r.startsWith("\\")&&2===r.length?(n?-1:1)*(null!==(i=r.codePointAt(1))&&void 0!==i?i:0):(n?-1:1)*(null!==(t=r.codePointAt(0))&&void 0!==t?t:0):null;let o="";for(;a.includes(this.peek);)o+=this.next();if(!e&&this.match("."))for(o+=".";a.includes(this.peek);)o+=this.next();const l=e?Number.parseInt(o,s):Number.parseFloat(o);return Number.isNaN(l)?null:n?-l:l}matchPrefixOperator(e){e||(e={minPrec:0}),e.minPrec||(e=Object.assign(Object.assign({},e),{minPrec:0}));const i=this.peekDefinitions("prefix");if(null===i)return null;const t=this.index;for(const[n,r]of i){this.index=t+r;const i=n.parse(this,e);if(i)return i}return this.index=t,null}matchInfixOperator(e,i){i||(i={minPrec:0}),i.minPrec||(i=Object.assign(Object.assign({},i),{minPrec:0}));const t=this.peekDefinitions("infix");if(null===t)return null;const n=this.index;for(const[r,s]of t)if(r.precedence>=i.minPrec){this.index=n+s;const t=r.parse(this,i,e);if(t)return t}return this.index=n,null}matchArguments(e){if(!e)return null;const i=this.index,t=this.matchEnclosure();if("enclosure"===e&&"Delimiter"===C(t))return H(t);if("group"===e){const e=this.matchExpression({tokens:["<}>"]});return null===e?[]:[e]}if("implicit"===e){if("Delimiter"===C(t))return H(t);if(null!==t)return[t];const e=this.matchPrimary();return null!==e?[e]:null}return this.index=i,null}matchOpenDelimiter(e,i){var t;const n=this.index,r=xe[this.peek];r&&this.next();const s=null!==(t=ye[e])&&void 0!==t?t:[e],a=r?[r]:[];return s.includes("||")&&this.matchAll(["|","|"])?(a.push("|"),a.push("|"),a):s.includes(this.peek)?(Se[e]===i?a.push(Se[this.peek]):a.push(i),this.next(),a):(this.index=n,null)}matchMiddleDelimiter(e){var i;const t=null!==(i=Ne[e])&&void 0!==i?i:[e];if(_e.includes(this.peek)){const e=this.index;return this.next(),t.includes(this.peek)?(this.next(),!0):(this.index=e,!1)}return!!t.include(this.peek)&&(this.next(),!0)}matchEnclosure(){const e=this._dictionary.matchfix;if(0===e.length)return null;const i=this.index;for(const t of e){if(this.index=i,Array.isArray(t.openDelimiter)){if(!this.matchAll(t.openDelimiter))continue;const e=this.matchExpression({tokens:t.closeDelimiter,minPrec:0});if(this.skipSpace(),!this.matchAll(t.closeDelimiter))continue;if("function"==typeof t.parse){const i=t.parse(this,null!=e?e:"Nothing");if(null===i)continue;return i}return[t.name,null!=e?e:"Nothing"]}const e=this.matchOpenDelimiter(t.openDelimiter,t.closeDelimiter);if(null===e)continue;const n=this.matchExpression({minPrec:0,tokens:e});if(n&&this.matchAll(e)){if("function"==typeof t.parse){const e=t.parse(this,null!=n?n:"Nothing");if(null===e)continue;return e}return[t.name,n]}}return this.index=i,null}matchSymbol(){var e,i;const t=this.index,n=this.peekDefinitions("symbol");if(n)for(const[e,i]of n){let n=null;if(this.index=t+i,"function"!=typeof e.parse){if(0===e.optionalLatexArg&&0===e.requiredLatexArg)return e.name;{const i=[];let t=e.optionalLatexArg;for(;0!==t;){const e=this.matchOptionalLatexArgument();if(null===e)break;i.push(e),t-=1}t=e.requiredLatexArg;const n=[];for(;0!==t;){const e=this.matchRequiredLatexArgument();if(null===e)break;n.push(e),t-=1}return n.length===e.requiredLatexArg?[e.name,...n,...i]:e.name}}if(n=e.parse(this),n)return n}this.index=t;let r="";(this.matchAll(["\\operatorname","<{>"])||this.matchAll(["\\mathit","<{>"])||this.matchAll(["\\mathrm","<{>"]))&&(r=this.matchString({tokens:["<}>"]}),r&&this.match("<}>")||(this.index=t)),r||(r=this.next());const s=null===(i=(e=this.options).parseUnknownSymbol)||void 0===i?void 0:i.call(e,r,this);if("symbol"===s)return r;if("function"===s){const e=this.matchEnclosure();return null===e?r:"Delimiter"!==C(e)?null:[r,...H(e)]}return this.index=t,this.matchUnknownLatexCommand()}matchOptionalLatexArgument(){const e=this.index;if(this.skipSpace(),this.match("[")){const e=this.matchExpression();if(this.skipSpace(),this.match("]"))return e}return this.index=e,null}matchRequiredLatexArgument(){const e=this.index;if(this.skipSpace(),this.match("<{>")){const i=this.matchExpression({tokens:["<}>"]});return this.skipSpace(),this.match("<}>")?i:(this.index=e,null)}return/^[0-9]$/.test(this.peek)?parseInt(this.next()):/^[^\\#]$/.test(this.peek)?this.next():this.matchSymbol()||(this.index=e,null)}matchSupsub(e){var i,t,n;if(null===e)return null;const r=this.index;this.skipSpace();const s=[],a=[];for(;"_"===this.peek||"^"===this.peek;){if(this.match("_")){let e=this.matchRequiredLatexArgument();!e&&this.match("<{>")&&(e=this.matchString({tokens:["<}>"]}),e&&this.match("<}>")),a.push(null!=e?e:"Missing")}else this.match("^")&&s.push(null!==(i=this.matchRequiredLatexArgument())&&void 0!==i?i:"Missing");this.skipSpace()}if(0===s.length&&0===a.length)return this.index=r,e;let o=e;if(a.length>0){const e=null===(t=this._dictionary.infix[1])||void 0===t?void 0:t.get("_");if(e){const i=["Subscript",o,1===a.length?a[0]:["Sequence",...a]];for(const t of e)if(o="function"==typeof t.parse?t.parse(this,{minPrec:0},i):i,o)break}}if(s.length>0){const e=null===(n=this._dictionary.infix[1])||void 0===n?void 0:n.get("^");if(e){const i=["Superscript",o,1===s.length?s[0]:["Sequence",...s]];for(const t of e)if(o="function"==typeof t.parse?t.parse(this,{minPrec:0},i):i,o)break}}return null===o&&(this.index=r),o}matchPostfix(e){if(null===e)return null;const i=this.peekDefinitions("postfix");if(null===i)return null;const t=this.index;for(const[n,r]of i){this.index=t+r;const i=n.parse(this,e);if(null!==i)return i}return this.index=t,null}matchString(e){e.minPrec||(e=Object.assign(Object.assign({},e),{minPrec:0}));let i="",t=this.atEnd;for(;!t;){const n=this.peek;"<space>"===n?i+=" ":"\\"===n[0]?(this.onError([{severity:"warning",message:"unexpected-command"}]),i+=this.next()):/^<(\$|\$\$)>$/.test(n)?t=!0:i+=this.next(),t=t||this.atTerminator(e)}return i}matchEnvironmentName(e,i){if(!this.match(e))return!1;const t=this.index;if(this.match("<{>")){const e=this.matchString({tokens:["<}>"]});if(this.match("<}>")&&e===i)return!0}return this.index=t,!1}matchTabular(e){const i=["List"],t={minPrec:0,tokens:["\\end","<{>",...e.split(""),"<}>"]};let n=["List"],r=null;for(;!this.atTerminator(t);)this.skipSpace(),this.match("&")?(n.push(null!=r?r:"Nothing"),r=null):this.match("\\\\")||this.match("\\cr")?(this.skipSpace(),this.matchOptionalLatexArgument(),null!==r&&n.push(r),i.push(n),n=["List"],r=null):r=this.matchExpression(Object.assign(Object.assign({},t),{condition:e=>{const i=e.peek;return"&"===i||"\\\\"===i||"\\cr"===i}}));return null!==r&&n.push(r),n.length>1&&i.push(n),i}matchEnvironment(){if(!this.match("\\begin"))return null;const e=this.index;if(this.match("<{>")){const i=this.matchString({tokens:["<}>"]});if(this.match("<}>")){const t=this._dictionary.environment.get(i),n=t?t.parse(this,[],[]):this.matchTabular(i);if(this.skipSpace(),this.matchAll(["\\end","<{>",...i.split(""),"<}>"]),null!==n)return this.decorate(n,e)}}return this.index=e,null}applyInvisibleOperator(e,i){if(null===i||this.atTerminator(e))return null;if(null===this.options.applyInvisibleOperator)return null;const t=this.index,n=this.matchExpression(Object.assign(Object.assign({},e),{minPrec:390}));if(null===n)return this.index=t,null;if("function"==typeof this.options.applyInvisibleOperator)return this.options.applyInvisibleOperator(this,i,n);const r=this.engine.box(n),s=z(i);if(s&&this.engine&&this.engine.getFunctionDefinition(s)){let e=[];return e="Delimiter"===r.head?"Sequence"===r.op1.head?[...r.op1.ops]:[r.op1]:[r],[s,...e.map((e=>e.json))]}const a=this.engine.box(i);if(a.isLiteral&&a.isInteger&&r.isLiteral){const[e,t]=r.rationalValue;if(null!==e&&null!==t)return["Add",i,n]}return(a.isMissing||"Nothing"===a.symbol||a.isNumber)&&(r.isMissing||"Nothing"===r.symbol||r.isNumber)?B("Multiply",i,n):(this.index=t,null)}matchUnknownLatexCommand(){const e=this.peek;if(!e||"\\"!==e[0])return null;this.next();const i=[];if("\\operatorname"===e){if(this.match("<{>")){for(;!this.atEnd&&"<}>"!==this.peek;)i.push(this.next());this.match("<}>")}else i.push(this.next());return 0===i.length?["Error","Missing",{str:"syntax-error"},["LatexForm",{str:e}]]:["Error","Missing",{str:"unknown-command"},["LatexForm",{str:`${e}{${b(i)}}`}]]}for(;this.match("[");){i.push("[");let e=0;for(;!this.atEnd&&0===e&&"]"!==this.peek;)"["===this.peek&&(e+=1),"]"===this.peek&&(e-=1),i.push(this.next());this.match("]")&&i.push("]")}for(;this.match("<{>");){i.push("<{>");let e=0;for(;!this.atEnd&&0===e&&"<}>"!==this.peek;)"<{>"===this.peek&&(e+=1),"<}>"===this.peek&&(e-=1),i.push(this.next());this.match("<}>")&&i.push("<}>")}return["Error","Missing",{str:"unknown-command"},["LatexForm",{str:`${e}${b(i)}`}]]}matchPrimary(){let e=null;const i=this.index;if(this.match("<{>")?(e=this.matchExpression({tokens:["<}>"]}),this.match("<}>")):this.match("<}>"),null===e){const i=this.matchNumber();i&&(e={num:i})}if(null===e&&(e=this.matchEnclosure()),null===e&&(e=this.matchEnvironment()),null===e&&(e=this.matchSymbol()),null!==e){e=this.decorate(e,i);let t=null,n=this.index;do{if(t=this.matchPostfix(e),e=null!=t?t:e,this.index===n&&null!==t)break;n=this.index}while(null!==t)}return null!==e&&(e=this.matchSupsub(e)),this.decorate(e,i)}matchExpression(e){const i=this.index;e||(e={minPrec:0}),void 0===e.minPrec&&(e.minPrec=0),this.skipSpace();let t=this.matchPrefixOperator(Object.assign(Object.assign({},e),{minPrec:0}));if(null===t&&(t=this.matchPrimary()),t){let i=!1;for(;!this.atTerminator(e)&&!i;){this.skipSpace();let n=this.matchInfixOperator(t,e);null===n&&null===this.peekDefinitions("operator")&&(n=this.applyInvisibleOperator(e,t)),null!==n?t=n:i=!0}}return this.decorate(t,i)}decorate(e,i){if(null===e)return null;if(!this.options.preserveLatex)return e;const t=this.latex(i,this.index);return Array.isArray(e)?e={latex:t,fn:e}:"number"==typeof e?e={latex:t,num:Number(e).toString()}:"string"==typeof e?e={latex:t,sym:e}:"object"==typeof e&&null!==e&&(e.latex=t),e}}function ke(e,i){const t=e.length,n=e;e=e.slice(0,-1);for(let t=0;t<e.length-16;t++){const n=e.substring(0,t);for(let r=0;r<17;r++){const s=e.substring(t,t+r+1),a=Math.floor((e.length-n.length)/s.length);if(a>1&&(n+s.repeat(a+1)).startsWith(e))return"0"===s?n.replace(/(\d{3})/g,"$1"+i.groupSeparator):n.replace(/(\d{3})/g,"$1"+i.groupSeparator)+i.beginRepeatingDigits+s+i.endRepeatingDigits}}const r=t>i.precision-1;return e=n,r&&(e=e.substring(0,i.precision-1)),i.groupSeparator&&(e=e.replace(/(\d{3})/g,"$1"+i.groupSeparator)).endsWith(i.groupSeparator)&&(e=e.slice(0,-i.groupSeparator.length)),r?e+i.truncationMarker:e}function Ae(e,i){var t;return e?i.beginExponentMarker?i.beginExponentMarker+e+(null!==(t=i.endExponentMarker)&&void 0!==t?t:""):"10^{"+e+"}":""}class Me{constructor(e,i,t){this.level=-1,this.options=e,e.invisibleMultiply&&(/#1/.test(e.invisibleMultiply)&&/#2/.test(e.invisibleMultiply)||t([{severity:"warning",message:["expected-argument","invisibleMultiply"]}])),this.onError=t,this.dictionary=i}updateOptions(e){for(const i of Object.keys(this.options))i in e&&(this.options[i]=e[i])}wrap(e,i){if(null===e)return"";if(void 0===i)return"("+this.serialize(e)+")";if("number"==typeof e||F(e)||"string"==typeof e||q(e))return this.serialize(e);const t=C(e);if("string"==typeof t&&"Delimiter"!==t){const n=this.dictionary.name.get(t);if(n&&("symbol"===n.kind||"prefix"===n.kind||"infix"===n.kind||"postfix"===n.kind)&&n.precedence<i)return this.wrapString(this.serialize(e),this.options.applyFunctionStyle(e,this.level))}return this.serialize(e)}wrapShort(e){if(null===e)return"";const i=this.serialize(e);return"Delimiter"===C(e)||"number"==typeof e||F(e)||/(^(.|\\[a-zA-Z*]+))$/.test(i)?i:this.wrapString(i,this.options.groupStyle(e,this.level+1))}wrapString(e,i){return"none"===i?e:"("+e+")"}serializeSymbol(e,i){var t;const n=C(e);if(!n)return"string"==typeof(null==i?void 0:i.serialize)?i.serialize:"function"==typeof(null==i?void 0:i.serialize)?i.serialize(this,e):null!==(t=qe(z(e),"upright."))&&void 0!==t?t:"";const r=H(e);if(!i){if("string"==typeof n&&n.length>0&&"\\"===n[0]){let e=n;for(const i of r)e+="{"+this.serialize(i)+"}";return e}return"string"==typeof n?`${qe(n,"upright.")}(${r.map((e=>this.serialize(e))).join(", ")})`:`\\operatorname{Apply}(${this.serialize(n)}, ${this.serialize(["List",...r])})`}if(i.requiredLatexArg>0){let e="",t="",n=0;for(;n<i.requiredLatexArg;)t+="{"+this.serialize(r[n++])+"}";for(;n<Math.min(r.length,i.optionalLatexArg+i.requiredLatexArg);){const i=this.serialize(r[1+n++]);i&&(e+="["+i+"]")}return i.serialize+(e+t)}return"function"==typeof i.serialize?i.serialize(this,e):"none"===this.options.applyFunctionStyle(e,this.level)?i.serialize+v(r.map((e=>this.serialize(e)))):i.serialize+this.serialize(["Delimiter",...r])}serializeDictionary(e){return`\\left[\\begin{array}{lll}${Object.keys(e).map((i=>`\\textbf{${i}} & \\rightarrow & ${this.serialize(e[i])}`)).join("\\\\")}\\end{array}\\right]`}serialize(e){if(null==e)return"";this.level+=1;try{const i=(()=>{const i=function(e,i){var t,n,r;if(null===e)return"";let s;if("number"==typeof e)s=e;else{if("object"!=typeof e||!("num"in e))return"";s=e.num}if(s===1/0||"Infinity"===s||"+Infinity"===s)return i.positiveInfinity;if(s===-1/0||"-Infinity"===s)return i.negativeInfinity;if("NaN"===s||"number"==typeof s&&Number.isNaN(s))return i.notANumber;if("number"==typeof s)return"engineering"===i.notation?function(e,i){if(0===e)return"0";const t=Math.abs(e);let n=Math.round(Math.log10(t));n-=n%3,t>Math.pow(10,i.avoidExponentsInRange[0])&&t<Math.pow(10,i.avoidExponentsInRange[1])&&(n=0);const r=t/Math.pow(10,n);let s="";const a=r.toString().match(/^(.*)\.(.*)$/);(null==a?void 0:a[1])&&a[2]&&(s=a[1]+i.decimalMarker+a[2]),i.groupSeparator&&(s=ke(r.toExponential(),i));let o="";return 0!==n&&(o=Ae(n.toString(),i)),(e<0?"-":"")+s+o}(s,i):function(e,i){var t;let n,r=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/i);(null==r?void 0:r[1])&&r[2]&&(n=Ae(r[2],i));let s=null!==(t=null==r?void 0:r[1])&&void 0!==t?t:e,a="";return r=(n?r[1]:e).match(/^(.*)\.(.*)$/),(null==r?void 0:r[1])&&r[2]&&(s=r[1],a=r[2]),i.groupSeparator&&(s=s.replace(/\B(?=(\d{3})+(?!\d))/g,i.groupSeparator),a=ke(a,i)),a&&(a=i.decimalMarker+a),n?"1"!==s||a?s+a+i.exponentProduct+n:n:s+a}(s.toString(),i);if(/[0-9][nd]$/.test(s)&&(s=s.slice(0,-1)),s=s.replace(/[\u0009-\u000d\u0020\u00a0]/g,""),/\([0-9]+\)$/.test(s)){const[e,n,r]=null!==(t=s.match(/(.+)\(([0-9]+)\)$/))&&void 0!==t?t:[];s=n+r.repeat(Math.ceil(i.precision/r.length))}let a="";for("-"===s[0]?(a="-",s=s.substring(1)):"+"===s[0]&&(s=s.substring(1));"0"===s[0];)s=s.substring(1);if(0===s.length)return a+"0";"."===s[0]&&(s="0"+s);let o="";if(s.indexOf(".")>=0){const e=s.match(/(\d*)\.(\d*)([e|E]([-+]?[0-9]*))?/);if(!e)return"";const t=e[1],r=e[2];if(o=null!==(n=e[4])&&void 0!==n?n:"","0"===t){let e=0;for(;"0"===r[e]&&e<r.length;)e+=1;let t="";if(e<=4)t="0"+i.decimalMarker,t+=r.substring(0,e),t+=ke(s.substring(t.length),i);else if(e+1>=i.precision)t="0",a="";else{t=s[e];const n=ke(s.substring(e+1),i);n&&(t+=i.decimalMarker+n)}"0"!==t&&(!(s.length-1>i.precision)||i.endRepeatingDigits&&t.endsWith(i.endRepeatingDigits)||!i.truncationMarker||t.endsWith(i.truncationMarker)||(t+=i.truncationMarker),e>4&&(t+=i.exponentProduct+Ae(""+(1-e),i))),s=t}else{s=t.replace(/\B(?=(\d{3})+(?!\d))/g,i.groupSeparator);const e=ke(r,i);e&&(s+=i.decimalMarker+e)}}else if(s.length>i.precision){const e=s.length;if(e>i.avoidExponentsInRange[1]){let t=s[0];const n=ke(s.substring(1),i);n&&(t+=i.decimalMarker+n,i.truncationMarker&&!t.endsWith(i.truncationMarker)&&i.endRepeatingDigits&&!t.endsWith(i.endRepeatingDigits)&&(t+=i.truncationMarker)),"1"!==t?t+=i.exponentProduct:t="",s=t+Ae(""+(e-1),i)}}else{const e=s.match(/([0-9]*)\.?([0-9]*)([e|E]([-+]?[0-9]+))?/);e&&(s=e[1],e[2]&&(s+=i.decimalMarker+e[2]),o=null!==(r=e[4])&&void 0!==r?r:""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,i.groupSeparator)}const l=Ae(o,i);return"1"===s&&l?a+l:(l&&(s=s+i.exponentProduct+l),a+s)}(e,this.options);if(i)return i;const t=P(e);if(null!==t)return`\\text{${t}}`;const n=z(e);if(null!==n){const i=this.dictionary.name.get(n);if("symbol"===(null==i?void 0:i.kind))return this.serializeSymbol(e,i)}const r=j(e);if(null!==r)return this.serializeDictionary(r);const s=D(e);if(s){if("\\"===s[0]){const i=H(e);return 0===i.length?s:s+"{"+i.map((e=>this.serialize(e))).filter((e=>!!e)).join("}{")+"}"}const i=this.dictionary.name.get(s);if(i)return"function"==typeof i.serialize?i.serialize(this,e):"infix"===i.kind||"postfix"===i.kind||"prefix"===i.kind?function(e,i,t){let n="";const r=T(i),s=D(i);if("postfix"===t.kind)return 1!==r&&e.onError([{severity:"warning",message:["postfix-operator-requires-one-operand",e.serializeSymbol(s)]}]),Oe(t.serialize,[e.wrap(L(i,1),t.precedence)]);if("prefix"===t.kind)return 1!==r&&e.onError([{severity:"warning",message:["prefix-operator-requires-one-operand",e.serializeSymbol(s)]}]),Oe(t.serialize,[e.wrap(L(i,1),t.precedence+1)]);if("infix"===t.kind){n=e.wrap(L(i,1),t.precedence);for(let s=2;s<r+1;s++){const r=L(i,s);null!==r&&(n=Oe(t.serialize,[n,e.wrap(r,t.precedence)]))}}return n}(this,e,i):"matchfix"===i.kind?function(e,i,t){var n;return Oe(t.serialize,[e.serialize(null!==(n=L(i,1))&&void 0!==n?n:"Nothing")])}(this,e,i):"symbol"===i.kind?this.serializeSymbol(e,i):""}if(Array.isArray(e)||V(e)||null!==z(e))return this.serializeSymbol(e);this.onError([{severity:"warning",message:["syntax-error",e?JSON.stringify(e):"undefined"]}])})();return this.level-=1,null!=i?i:""}catch(e){}return this.level-=1,""}applyFunctionStyle(e,i){return this.options.applyFunctionStyle(e,i)}groupStyle(e,i){return this.options.groupStyle(e,i)}rootStyle(e,i){return this.options.rootStyle(e,i)}fractionStyle(e,i){return this.options.fractionStyle(e,i)}logicStyle(e,i){return this.options.logicStyle(e,i)}powerStyle(e,i){return this.options.powerStyle(e,i)}numericSetStyle(e,i){return this.options.numericSetStyle(e,i)}}function Oe(e,i){var t;let n=e;for(let e=0;e<i.length;e++){let r=null!==(t=i[e])&&void 0!==t?t:"";if(/[a-zA-Z*]/.test(r[0])){const i=n.match(RegExp("(.*)#"+Number(e+1).toString()));i&&/\\[a-zA-Z*]+/.test(i[1])&&(r=" "+r)}n=n.replace("#"+Number(e+1).toString(),r)}return n}const Fe=["alpha","beta","gamma","Gamma","delta","Delta","epsilon","zeta","eta","theta","Theta","iota","kappa","lambda","Lambda","mu","nu","xi","Xi","pi","Pi","rho","sigma","Sigma","tau","upsilon","phi","Phi","varphi","chi","psi","Psi","omega","Omega","aleph","ast","blacksquare","bot","bullet","circ","diamond","times","top","square","star"];function qe(e,i="italic."){var t;if(null===e)return null;const n=e.match(/^(_+)(.*)/);if(n)return`\\text{${"\\_".repeat(n[1].length)+Ve(n[2])}}`;let r;[r,e]=function(e){const i=e.match(/^([a-zA-Z-]+\.)(.*)/);return i?[i[1],i[2]]:["",e]}(e);const s=Ve(e);return 1!==s.length||r?(r||(r=i),(null!==(t={"upright.":"\\mathrm{_}","italic.":"\\mathit{_}","bold-italic.":"\\mathbf{\\mathit{_}}","script.":"\\mathscr{_}","calligraphic.":"\\mathcal{_}","bold-script.":"\\mathbf{\\mathscr{_}}","bold-calligraphic.":"\\mathbf{\\mathcal{_}}","fraktur.":"\\mathfrak{_}","gothic.":"\\mathfrak{_}","bold-gothic.":"\\mathbf{\\mathfrak{_}}","bold-fraktur.":"\\mathbf{\\mathfrak{_}}","sans-serif.":"\\mathsf{_}","bold-sans-serif.":"\\mathbf{\\mathsf{_}}","italic-sans-serif.":"\\mathit{\\mathsf{_}}","monospace.":"\\mathtt{_}","blackboard.":"\\mathbb{_}","double-struck.":"\\mathbb{_}"}[r])&&void 0!==t?t:"\\mathit{_}").replace("_",s)):s}function Ve(e){const i=e.indexOf("_");if(i>0){const t=e.substring(0,i),n=e.substring(i+1);return n?n.startsWith('"')&&n.endsWith('"')?`${Ve(t)}_\\mathrm{${Ve(n.substring(1,-1))}}`:`${Ve(t)}_{${Ve(n)}}`:qe(t)+"\\_"}const t=e.match(/([^0-9]+?)([0-9]+)$/);return t?0===t[1].length?e:`${Ve(t[1])}_{${t[2]}}`:Fe.includes(e)?"\\"+e:e=e.replace(/[{}\[\]\\:\-\$%]/g,(e=>{var i;return null!==(i={"{":"\\lbrace ","}":"\\rbrace ","[":"\\lbrack ","]":"\\rbrack ",":":"\\colon ","\\":"\\backslash ","-":'\\unicode{"2013}'}[e])&&void 0!==i?i:"\\"+e}))}const Pe={invisibleMultiply:"",invisiblePlus:"",multiply:"\\times",missingSymbol:"\\placeholder{}",applyFunctionStyle:function(e,i){return"paren"},groupStyle:function(e,i){return"paren"},rootStyle:U,fractionStyle:K,logicStyle:function(e,i){return"boolean"},powerStyle:function(e,i){return"solidus"},numericSetStyle:function(e,i){return"compact"}};class Ce{constructor(e){var i,t;this.onError=null!==(i=e.onError)&&void 0!==i?i:e=>{if("undefined"!=typeof window)for(const i of e);},this.computeEngine=e.computeEngine;const n=Object.assign({},e);delete n.dictionary,delete n.onError,this.options=Object.assign(Object.assign(Object.assign(Object.assign({},we),Pe),Ee),n),this.dictionary=function(e,i){var t,n;const r={lookahead:1,name:new Map,symbol:[],infix:[],prefix:[],postfix:[],environment:new Map,matchfix:[]};for(const s of e){const[e,a]=ve(s,i);if(null!==a)if(void 0!==a.name&&(r.name.has(a.name)&&i({severity:"warning",message:["invalid-dictionary-entry",a.name,"Duplicate definition"]}),r.name.set(a.name,a)),"matchfix"===a.kind)r.matchfix.push(a);else if("environment"===a.kind){const e=b(null!==(t=s.trigger)&&void 0!==t?t:"");r.environment.has(e)&&i({severity:"warning",message:["invalid-dictionary-entry",e,"Duplicate environment definition"]}),r.environment.set(e,a)}else if(e){const i=b(null!==(n=s.trigger)&&void 0!==n?n:""),t=pe(e);if(r.lookahead=Math.max(r.lookahead,t),"symbol"===a.kind){void 0===r.symbol[t]&&(r.symbol[t]=new Map);const e=r.symbol[t];e.has(i)?e.get(i).push(a):e.set(i,[a])}else if("prefix"===a.kind){void 0===r.prefix[t]&&(r.prefix[t]=new Map);const e=r.prefix[t];e.has(i)?e.get(i).push(a):e.set(i,[a])}else if("infix"===a.kind){void 0===r.infix[t]&&(r.infix[t]=new Map);const e=r.infix[t];e.has(i)?e.get(i).push(a):e.set(i,[a])}else if("postfix"===a.kind){void 0===r.postfix[t]&&(r.postfix[t]=new Map);const e=r.postfix[t];e.has(i)?e.get(i).push(a):e.set(i,[a])}}}return r}(null!==(t=e.dictionary)&&void 0!==t?t:Ce.getDictionary(),(e=>this.onError([e])))}updateOptions(e){for(const i of Object.keys(this.options))i in e&&(this.options[i]=e[i]);this.serializer.updateOptions(e)}static getDictionary(e="all"){if("all"===e){let e=[];for(const i of Object.keys(be))be[i]&&(e=[...e,...be[i]]);return e}return be[e]?[...be[e]]:[]}parse(e){const i=new Ie(p(e,[]),this.options,this.dictionary,this.computeEngine,this.onError);let t=i.matchExpression();if(!i.atEnd){const e=[];for(;!i.atEnd;)e.push(i.next());t=["Error",null!=t?t:"Nothing",{str:"syntax-error"},["LatexForm",{str:b(e)}]]}return t||(t="Nothing"),this.options.preserveLatex&&(Array.isArray(t)?t={latex:e,fn:t}:"number"==typeof t?t={latex:e,num:Number(t).toString()}:"string"==typeof t?t={latex:e,sym:t}:"object"==typeof t&&null!==t&&(t.latex=e)),null!=t?t:"Nothing"}serialize(e){return this.serializer.serialize(e)}get serializer(){return this._serializer||(this._serializer=new Me(this.options,this.dictionary,this.onError)),this._serializer}}const De=Math.log10(Math.pow(2,53)),Le=1e-10,Te=1e6,ze=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]);function Re(e,i){const t=function(e){if(e<=3)return{[e]:1};const i={};let t=!1;for(;!t;){if(e%2==0){i[2]?i[2]+=1:i[2]=1,e/=2;continue}if(e%3==0){i[3]?i[3]+=1:i[3]=1,e/=3;continue}if(1===e)return i;const n=Math.sqrt(e);t=!0;for(let r=6;r<=n+6;r+=6){if(e%(r-1)==0){i[r-1]?i[r-1]+=1:i[r-1]=1,e/=r-1,t=!1;break}if(e%(r+1)==0){i[r+1]?i[r+1]+=1:i[r+1]=1,e/=r+1,t=!1;break}}}return i[e]=1,i}(e);let n=1,r=1;for(const e of Object.keys(t)){const s=parseFloat(e);n*=Math.pow(s,Math.floor(t[e]/i)),r*=Math.pow(s,t[e]%i)}return[n,r]}function $e(e,i){if(0===e)return i;if(0===i)return e;if(e===i)return e;if(!Number.isInteger(e)||!Number.isInteger(i))return NaN;for(;0!==i;)[e,i]=[i,e%i];return e<0?-e:e}function je([e,i]){if(1===e||1===i)return[e,i];i<0&&([e,i]=[-e,-i]);const t=$e(e,i);return t<=1?[e,i]:[e/t,i/t]}const Ze=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],Ge=[.999999999999997,57.15623566586292,-59.59796035547549,14.13609797474174,-.4919138160976202,3399464998481188e-20,4652362892704857e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.0002174396181152126,-.0001643181065367639,8441822398385274e-20,-261908384015814e-19,3689918265953162e-21];function He(e){if(e<0)return NaN;let i=Ge[0];for(let t=14;t>0;--t)i+=Ge[t]/(e+t);const t=e+4.7421875+.5;return.9189385332046727+(e+.5)*Math.log(t)-t+Math.log(i)-Math.log(e)}function We(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*We(1-e));if(e>100)return Math.exp(He(e));e-=1;let i=Ze[0];for(let t=1;t<9;t++)i+=Ze[t]/(e+t);const t=e+7+.5;return 2.5066282746310002*Math.pow(t,e+.5)*Math.exp(-t)*i}function Be(e,i=10){let t=0;for(let n=0;n<e.length;n++){const r={" ":-1,"\xa0":-1,"\u2000":-1,"\u2001":-1,"\u2002":-1,"\u2003":-1,"\u2004":-1,"\u2005":-1,"\u2006":-1,"\u2007":-1,"\u2008":-1,"\u2009":-1,"\u200a":-1,"\u200b":-1,"\u202f":-1,"\u205f":-1,_:-1,",":-1,0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35}[e[n]];if(-1!==r){if(void 0===r)return[t,e.substring(n)];if(r>=i)return[t,e.substring(n)];t=t*i+r}}return[t,""]}class Qe{constructor(e,i){this.engine=e,(null==i?void 0:i.latex)&&(this._latex=i.latex),(null==i?void 0:i.wikidata)&&(this._wikidata=i.wikidata)}toJSON(){return JSON.stringify(this.json)}toString(){return this.latex}valueOf(){var e,i,t;const[n,r]=this.rationalValue;return null!==n&&null!==r?[n,r]:null!==(t=null!==(i=null!==(e=this.asFloat)&&void 0!==e?e:this.string)&&void 0!==i?i:this.symbol)&&void 0!==t?t:this.toString()}is(e){return null!=e&&this.isSame(this.engine.box(e))}has(e){return!1}get description(){return[]}get url(){return""}_purge(){}get isPure(){return!1}get isLiteral(){return!1}get latex(){var e;return null!==(e=this._latex)&&void 0!==e?e:this.engine.serialize(this)}set latex(e){this._latex=e}get wikidata(){var e;return null!==(e=this._wikidata)&&void 0!==e?e:""}set wikidata(e){this._wikidata=e}get complexity(){return 1}get ops(){return null}get nops(){return 0}get op1(){return this.engine.symbol("Missing")}get op2(){return this.engine.symbol("Missing")}get op3(){return this.engine.symbol("Missing")}get symbolDefinition(){}get functionDefinition(){}_repairDefinition(){}get keys(){return null}get keysCount(){return 0}getKey(e){}hasKey(e){return!1}get machineValue(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.machineValue)&&void 0!==i?i:null}get rationalValue(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.rationalValue)&&void 0!==i?i:[null,null]}get decimalValue(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.decimalValue)&&void 0!==i?i:null}get complexValue(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.complexValue)&&void 0!==i?i:null}get asFloat(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.asFloat)&&void 0!==i?i:null}get asSmallInteger(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.asSmallInteger)&&void 0!==i?i:null}get asRational(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.asRational)&&void 0!==i?i:[null,null]}get sgn(){var e,i;return null!==(i=null===(e=this.numericValue)||void 0===e?void 0:e.sgn)&&void 0!==i?i:null}get symbol(){return null}get isMissing(){return!1}get value(){return this}set value(e){throw Error(`Can't change the value of \\(${this.latex}\\)`)}get numericValue(){}isSubdomainOf(e){}get domain(){return this.engine.domain("Nothing")}set domain(e){throw Error(`Can't change the domain of \\(${this.latex}\\)`)}get valueDomain(){return this.domain}get string(){return null}isLess(e){}isLessEqual(e){}isGreater(e){}isGreaterEqual(e){}get isZero(){}get isNotZero(){}get isPositive(){}get isNonNegative(){}get isNegative(){}get isNonPositive(){}get isInfinity(){}get isNaN(){}get isFinite(){}get isNumber(){}get isInteger(){}get isRational(){}get isAlgebraic(){return!1}get isReal(){}get isExtendedReal(){}get isComplex(){}get isImaginary(){}get isExtendedComplex(){}get isOne(){}get isNegativeOne(){}get isEven(){}get isOdd(){}get isPrime(){}get isComposite(){}get canonical(){return this}apply(e,i){return this}evaluate(e){return this.simplify(e)}simplify(e){return this}N(e){return this}replace(e){return null}subs(e){return this}solve(e){return null}}function Ue(e,i){if(!i.isInteger()||i.isNegative())return e.DECIMAL_NAN;if(i.lessThan(10))return e.decimal([1,1,2,6,24,120,720,5040,40320,362880,3628800][i.toNumber()]);if(i.gt(Number.MAX_SAFE_INTEGER)){let t=e.DECIMAL_ONE,n=e.DECIMAL_TWO;for(;n.lessThan(i);)t=t.mul(n),n=n.add(1);return t}if(i.modulo(2).eq(1))return i.times(Ue(e,i.minus(1)));let t=i.toNumber(),n=i,r=i;for(;t>2;)t-=2,n=n.add(t),r=r.mul(n);return r}function Ke(e,i){if(i.isNegative())return e.DECIMAL_NAN;const t=e.cache("gamma-p-ln",(()=>["0.99999999999999709182","57.156235665862923517","-59.597960355475491248","14.136097974741747174","-0.49191381609762019978","0.33994649984811888699e-4","0.46523628927048575665e-4","-0.98374475304879564677e-4","0.15808870322491248884e-3","-0.21026444172410488319e-3","0.2174396181152126432e-3","-0.16431810653676389022e-3","0.84418223983852743293e-4","-0.2619083840158140867e-4","0.36899182659531622704e-5"].map((i=>e.decimal(i)))));let n=t[0];for(let e=t.length-1;e>0;--e)n=n.add(t[e].div(i.add(e)));const r=e.cache("gamma-g-ln",(()=>e.decimal(607).div(128))),s=i.add(r).add(e.DECIMAL_HALF);return e.DECIMAL_NEGATIVE_ONE.acos().mul(e.DECIMAL_TWO).log().mul(e.DECIMAL_HALF).add(s.log().mul(i.add(e.DECIMAL_HALF)).minus(s).add(n.log()).minus(i.log()))}function Ye(e,i){if(i.lessThan(e.DECIMAL_HALF)){const t=e.DECIMAL_NEGATIVE_ONE.acos();return t.div(t.mul(i).sin().mul(Ye(e,e.DECIMAL_ONE.sub(i))))}if(i.greaterThan(100))return Ke(e,i).exp();i=i.sub(1);const t=e.cache("lanczos-7-c",(()=>["0.99999999999980993227684700473478","676.520368121885098567009190444019","-1259.13921672240287047156078755283","771.3234287776530788486528258894","-176.61502916214059906584551354","12.507343278686904814458936853","-0.13857109526572011689554707","9.984369578019570859563e-6","1.50563273514931155834e-7"].map(e.decimal)));let n=t[0];for(let e=1;e<9;e++)n=n.add(t[e].div(i.add(e)));const r=i.add(7).add(e.DECIMAL_HALF);return e.DECIMAL_NEGATIVE_ONE.acos().times(e.DECIMAL_TWO).sqrt().mul(n.mul(r.neg().exp()).mul(r.pow(i.add(e.DECIMAL_HALF))))}function Je(e){return e.e<308&&e.e>-306}function Xe(e,i){var t;const n=[];for(const r of e)r.ops&&r.head===i?n.push(...null!==(t=Xe(r.ops,i))&&void 0!==t?t:r.ops):n.push(r);return n.length===e.length?null:n}function ei(e){if("Power"===e.head&&e.op2.isLiteral){const i=e.op2.asSmallInteger;return null!==i&&i>0?i:1}if("Multiply"===e.head){let i=1;for(const t of e.ops){const e=ei(t);e>1&&(i+=e)}return i}return 1}function ii(e){if("Power"===e.head&&e.op2.isLiteral){const i=e.op2.asSmallInteger;return null!==i&&i>0?i:1}if("Multiply"===e.head){let i=1;for(const t of e.ops)i=Math.max(i,ei(t));return i}return 1}function ti(e){return e.symbol?e.symbol:e.ops?e.ops.map((e=>ti(e))).filter((e=>e.length>0)).join('"'):""}function ni(e){return"string"==typeof e&&e.startsWith("$")&&e.endsWith("$")}function ri(e){return"string"==typeof e&&e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):null}function si(e){var i;if("ImaginaryUnit"===e.symbol)return 1;const t=e.complexValue;if(t&&0===t.re)return t.im;if("Negate"===e.head)return-si(e.op1);let n=0;if("Multiply"===e.head&&2===e.nops){let t;"ImaginaryUnit"===e.op1.symbol?t=e.op2:"ImaginaryUnit"===e.op2.symbol&&(t=e.op1),t&&t.isLiteral&&(n=null!==(i=t.asFloat)&&void 0!==i?i:0)}return n}function ai(e){if(e.symbol){const i=e.symbolDefinition;return(null==i?void 0:i.constant)?[]:[e.symbol]}if(!e.ops&&!e.keys)return[];const i=[];if(e.ops)for(const t of e.ops)i.push(...ai(t));if(e.keys)for(const t of e.keys)i.push(...ai(e.getKey(t)));return i}function oi(e){return"decimal"===e.numericMode||"auto"===e.numericMode&&e.precision>Math.floor(De)}function li(e){return"auto"===e.numericMode||"complex"===e.numericMode}function ui(e){let i=0;for(let t=0;t<e.length;t++)i=Math.imul(31,i)+e.charCodeAt(t)|0;return Math.abs(i)}const ci=1e5;function hi(e,i){var t,n,r,s;if(e.isLiteral&&null!==e.asFloat)return i.isLiteral&&null!==i.asFloat?e.asFloat-i.asFloat:-1;if(e.isLiteral&&e.complexValue)return i.isLiteral&&i.complexValue?e.complexValue.re===i.complexValue.re?Math.abs(e.complexValue.im)===Math.abs(i.complexValue.im)?e.complexValue.im-i.complexValue.im:Math.abs(e.complexValue.im)-Math.abs(i.complexValue.im):e.complexValue.re-i.complexValue.re:i.isLiteral&&i.isNumber?1:-1;if(e.symbol)return i.symbol?e.symbol===i.symbol?0:e.symbol>i.symbol?1:-1:i.isLiteral&&i.isNumber?1:-1;if(e.ops){if(i.ops){const a=null!==(n=null===(t=e.functionDefinition)||void 0===t?void 0:t.complexity)&&void 0!==n?n:ci,o=null!==(s=null===(r=i.functionDefinition)||void 0===r?void 0:r.complexity)&&void 0!==s?s:ci;return a===o?"string"==typeof e.head&&"string"==typeof i.head?e.head===i.head?mi(e)-mi(i):e.head<i.head?1:-1:mi(e)-mi(i):a-o}return i.isLiteral&&i.isNumber||i.symbol?1:-1}if(e.string)return i.string?e.string.length!==i.string.length?i.string.length-e.string.length:i.string<e.string?-1:e.string>i.string?1:0:i.keys?-1:1;if(e.keys&&i.keys){if(e.keysCount!==i.keysCount)return i.keysCount-e.keysCount;let t=0,n=0;for(const e of i.keys)t+=i.getKey(e).complexity;for(const i of e.keys)n+=e.getKey(i).complexity;return n-t}return e.complexity-i.complexity}function mi(e){return null!==e.keys?1+e.keysCount:e.ops?("string"==typeof e.head?1:mi(e.head))+[...e.ops].reduce(((e,i)=>e+mi(i)),0):1}function di(e){var i;const t=e.engine;let n=1,r=1;if("Multiply"===e.head){const i=[];for(const t of e.ops)if(t.isLiteral){const[e,s]=t.asRational;null!==e&&null!==s?(n*=e,r*=s):i.push(t)}else i.push(t);return[n,r]=je([n,r]),n===r?[[1,1],e]:0===i.length?[[n,r],t.ONE]:1===i.length?[[n,r],i[0]]:[[n,r],t.mul(i)]}if("Divide"===e.head){let[[i,n],r]=di(e.op1);const[[s,a],o]=di(e.op2),[l,u]=je([i*a,s*n]);return r.isOne&&o.isOne?[[l,u],t.ONE]:o.isOne?[[l,u],r]:[[l,u],t.fn("Divide",[r,o]).canonical]}if("Power"===e.head){if(!e.op2.isLiteral)return[[1,1],e];let[[i,n],r]=di(e.op1);if(1===i&&1===n)return[[1,1],e];const s=e.op2,a=s.asSmallInteger;if(null!==a){if(-1===a)return[[n,i],t.inverse(r)];if(Math.log10(Math.abs(i))*Math.abs(a)<15&&Math.log10(Math.abs(n))*Math.abs(a)<15)return a>0?[[Math.pow(i,a),Math.pow(n,a)],t.power(r,s)]:[[Math.pow(n,-a),Math.pow(i,-a)],t.power(r,s)]}const[o,l]=s.rationalValue;if(null!==o&&null!==l&&i>0&&1===Math.abs(o)){const[a,u]=Re(i,l),[c,h]=Re(n,l);return 1===a&&1===c?[[1,1],e]:[1===o?[a,c]:[c,a],t.power(t.mul([t.number([u,h]),r]),s)]}return[[1,1],e]}if("Negate"===e.head){const[i,t]=di(e.op1);return[[-i[0],i[1]],t]}if(e.isLiteral){if(e.decimalValue){if(e.decimalValue.isInteger()&&Je(e.decimalValue))return[[e.decimalValue.toNumber(),1],t.ONE];if(null===(i=e.decimalValue)||void 0===i?void 0:i.isNegative())return[[-1,1],t.number(e.decimalValue.neg())]}if(null!==e.machineValue){if(Number.isInteger(e.machineValue))return[[e.machineValue,1],t.ONE];if(e.machineValue<0)return[[-1,1],t.number(-e.machineValue)]}const[n,r]=e.rationalValue;if(null!==n&&null!==r)return[[n,r],t.ONE];if(null!==e.complexValue){const i=e.complexValue;if(i.re<0)return[[-1,1],t.number(t.complex(-i.re,-i.im))]}}return[[1,1],e]}function fi(e){var i;if("Negate"===e.head)return[-1,e.op1];const t=e.engine;if(null!==e.machineValue&&e.machineValue<0)return[-1,t.number(-e.machineValue)];if(null===(i=e.decimalValue)||void 0===i?void 0:i.isNegative())return[-1,t.number(e.decimalValue.neg())];if(null!==e.complexValue){const i=e.complexValue;if(i.re<0)return[-1,t.number(t.complex(-i.re,-i.im))]}const[n,r]=e.rationalValue;return null!==n&&null!==r&&n<0?[-1,t.number([-n,r])]:[1,e]}class gi{constructor(e,i){if(this._terms=[],this._literal=[1,1],this._hasInfinity=!1,this._hasZero=!1,this.engine=e,i)for(const e of i)this.addTerm(e)}get isEmpty(){return!1===this._hasInfinity&&!1===this._hasZero&&this._literal[0]===this._literal[1]&&0===this._terms.length}addTerm(e){if("Nothing"===e.symbol)return;if(e.isLiteral){if(e.isOne)return;if(e.isZero)return void(this._hasZero=!0);if(e.isNegativeOne)return void(this._literal[0]*=-1);if(e.isInfinity)return this._hasInfinity=!0,void(e.isNegative&&(this._literal[0]*=-1))}let[i,t]=di(e);if(this._literal=[this._literal[0]*i[0],this._literal[1]*i[1]],t.isLiteral&&t.isOne)return;let n=[1,1];if("Power"===t.head&&t.op2.isLiteral){const[e,i]=t.op2.asRational;null!==e&&null!==i&&(n=[e,i],t=t.op1)}let r=!1;if(1===n[1]||t.isNonNegative)for(const e of this._terms)if(e.term.isSame(t)){const[i,t]=e.exponent,[s,a]=n;e.exponent=[i*a+t*s,t*a],r=!0;break}r||this._terms.push({exponent:n,term:t})}groupedByDegrees(e){const i=this.engine,t=[],n=[];this._hasInfinity&&n.push(i.POSITIVE_INFINITY),this._literal=je(this._literal),1===this._literal[0]&&1===this._literal[1]||((null==e?void 0:e.splitRational)?(1!==this._literal[0]&&n.push(i.number(this._literal[0]).canonical),1!==this._literal[1]&&t.push({exponent:[-1,1],terms:[i.number(this._literal[1]).canonical]})):n.push(i.number(this._literal).canonical)),n.length>0&&t.push({exponent:[1,1],terms:n});for(const e of this._terms){if(0===e.exponent[0])continue;let i=!1;for(const n of t)if(e.exponent[0]===n.exponent[0]&&e.exponent[1]===n.exponent[1]){n.terms.push(e.term),i=!0;break}i||t.push({exponent:je(e.exponent),terms:[e.term]})}return t}terms(){return bi(this.engine,this.groupedByDegrees())}asNumeratorDenominator(){var e,i;const t=this.groupedByDegrees(),n=[],r=[];for(const e of t)e.exponent[0]>=0?n.push(e):r.push({exponent:[-e.exponent[0],e.exponent[1]],terms:e.terms});const s=this.engine;let a=bi(s,n);a=null!==(e=Xe(a,"Multiply"))&&void 0!==e?e:a;let o=s.ONE;1===a.length?o=a[0]:a.length>0&&(o=s._fn("Multiply",a));let l=bi(s,r);l=null!==(i=Xe(l,"Multiply"))&&void 0!==i?i:l;let u=s.ONE;return 1===l.length?u=l[0]:l.length>0&&(u=s._fn("Multiply",l)),[o,u]}asExpression(){var e;const i=this.engine;if(this._hasInfinity){if(this._hasZero)return i.NAN;if(0===this._terms.length)return this._literal[0]>0?i.POSITIVE_INFINITY:i.NEGATIVE_INFINITY}if(this._hasZero)return i.ZERO;if(0===this._terms.length)return i.number(this._literal).canonical;let t=bi(i,this.groupedByDegrees({splitRational:!1}));return this._hasInfinity&&t.push(i.POSITIVE_INFINITY),t=null!==(e=Xe(t,"Multiply"))&&void 0!==e?e:t,0===t.length?i.ONE:1===t.length?t[0]:this.engine._fn("Multiply",t)}asRationalExpression(){const[e,i]=this.asNumeratorDenominator();return i.isOne?e:i.isNegativeOne?this.engine.negate(e):this.engine._fn("Divide",[e,i])}}function pi(e){const[i,t]=e;return i===t?0:i>0&&Number.isInteger(i/t)?1:i>0?2:Number.isInteger(i/t)?3:4}function vi(e,i){const t=pi(e.exponent),n=pi(i.exponent);return t!==n?t-n:e.exponent[0]/e.exponent[1]-i.exponent[0]/i.exponent[1]}function bi(e,i){var t;const n=(i=i.sort(vi)).map((i=>{var t;const n=null!==(t=Xe(i.terms,"Multiply"))&&void 0!==t?t:i.terms,r=n.length<=1?n[0]:e._fn("Multiply",n.sort(hi));return i.exponent[0]===i.exponent[1]?r:e.power(r,i.exponent)}));return null!==(t=Xe(n,"Multiply"))&&void 0!==t?t:n}function yi(e,i,t,n){var r,s,a,o,l,u,c;const h=e.jsonSerializationOptions.exclude;if(("Rational"===i||"Divide"===i)&&(null===(r=t[0])||void 0===r?void 0:r.isLiteral)&&(null===(s=t[1])||void 0===s?void 0:s.isLiteral)&&1===(null===(a=t[0])||void 0===a?void 0:a.asSmallInteger)&&2===(null===(o=t[1])||void 0===o?void 0:o.asSmallInteger)&&!h.includes("Half"))return Ni(e,"Half",Object.assign(Object.assign({},n),{wikidata:"Q39373172"}));if("Negate"===i&&t[0].isLiteral){if(null!==t[0].machineValue)return xi(e,-t[0].machineValue);if(null!==t[0].decimalValue)return xi(e,t[0].decimalValue.neg());if(null!==t[0].complexValue)return xi(e,t[0].complexValue.neg());const[i,n]=t[0].rationalValue;if(null!==i&&null!==n)return xi(e,[-i,n])}if("Rational"===i&&h.includes(i)&&t.length>1)return yi(e,"Divide",t,n);if("Complex"===i&&h.includes(i))return yi(e,"Add",[t[0],e._fn("Multiply",[t[1],e.symbol("ImaginaryUnit")])],n);if("Sqrt"===i&&h.includes(i))return yi(e,"Power",[t[0],h.includes("Half")?e.number([1,2]):e.HALF],n);if("Root"===i&&h.includes(i)&&t[1].isLiteral){const i=t[1].asSmallInteger;if(2===i)return yi(e,"Sqrt",[t[0]]);if(null!==i)return i<0?yi(e,"Divide",[e.ONE,e._fn("Power",[t[0],e.number([1,-i])])],n):yi(e,"Power",[t[0],e.number([1,-i])],n)}if("Square"===i&&h.includes(i))return yi(e,"Power",[t[0],e.TWO],n);if("Exp"===i&&h.includes(i))return yi(e,"Power",[e.symbol("ExponentialE"),t[0]],n);if("Subtract"===i&&h.includes(i))return yi(e,"Add",[t[0],e._fn("Negate",[t[1]])],n);if("Add"===i&&2===t.length&&!h.includes("Subtract")){if(t[1].isLiteral){const i=t[1].asSmallInteger;if(null!==i&&i<0)return yi(e,"Subtract",[t[0],e.number(-i)],n)}if("Negate"===t[1].head)return yi(e,"Subtract",[t[0],t[1].op1],n)}if("Tuple"===i){if(1===t.length&&!h.includes("Single"))return yi(e,"Single",t,n);if(2===t.length&&!h.includes("Pair"))return yi(e,"Pair",t,n);if(3===t.length&&!h.includes("Triple"))return yi(e,"Triple",t,n)}const m=["string"==typeof i?i:i.json,...t.map((e=>e.json))],d=Object.assign({},null!=n?n:{});return e.jsonSerializationOptions.metadata.includes("latex")?d.latex=null!==(l=d.latex)&&void 0!==l?l:e.serialize({fn:m}):d.latex="",e.jsonSerializationOptions.metadata.includes("wikidata")?(null==n?void 0:n.wikidata)||"string"!=typeof i||(d.wikidata=null!==(c=null===(u=e.getFunctionDefinition(i,t))||void 0===u?void 0:u.wikidata)&&void 0!==c?c:""):d.wikidata="",d.latex||d.wikidata||!e.jsonSerializationOptions.shorthands.includes("function")?d.latex&&d.wikidata?{fn:m,latex:d.latex,wikidata:d.wikidata}:d.latex?{fn:m,latex:d.latex}:d.wikidata?{fn:m,wikidata:d.wikidata}:{fn:m}:m}function Ni(e,i,t){var n,r,s;return"Half"===i&&e.jsonSerializationOptions.exclude.includes("Half")?xi(e,[1,2],t):(t=Object.assign({},t),e.jsonSerializationOptions.metadata.includes("latex")?(t.latex=null!==(n=t.latex)&&void 0!==n?n:e.serialize({sym:i}),t.latex===i&&(t.latex=""),t.latex=t.latex):t.latex="",e.jsonSerializationOptions.metadata.includes("wikidata")?t.wikidata||(t.wikidata=null!==(s=null===(r=e.getSymbolDefinition(i))||void 0===r?void 0:r.wikidata)&&void 0!==s?s:""):t.wikidata="",i=i,t.latex||t.wikidata||!e.jsonSerializationOptions.shorthands.includes("symbol")?t.latex&&t.wikidata?{sym:i,latex:t.latex,wikidata:t.wikidata}:t.latex?{sym:i,latex:t.latex}:t.wikidata?{sym:i,wikidata:t.wikidata}:{sym:i}:i)}function xi(e,i,t){var n,r,s;t=Object.assign({},t),e.jsonSerializationOptions.metadata.includes("latex")||(t.latex="");const a=!t.latex&&!e.jsonSerializationOptions.metadata.includes("latex")&&e.jsonSerializationOptions.shorthands.includes("number");let o="";if(i instanceof u){if(i.isNaN()?o="NaN":i.isFinite()||(o=i.isPositive()?"+Infinity":"-Infinity"),!o){if(a&&Je(i)&&i.precision()<15)return i.toNumber();o=i.isInteger()&&i.e<i.precision()+4?i.toFixed(0):_i(e,i.toJSON())}return e.jsonSerializationOptions.metadata.includes("latex")&&(t.latex=null!==(n=t.latex)&&void 0!==n?n:e.serialize({num:o})),t.latex?{num:o,latex:t.latex}:{num:o}}if(i instanceof c.exports.Complex)return i.isInfinite()?Ni(e,"ComplexInfinity",t):i.isNaN()?(o="NaN",e.jsonSerializationOptions.metadata.includes("latex")&&(t.latex=null!==(r=t.latex)&&void 0!==r?r:e.serialize({num:o})),t.latex?{num:o,latex:t.latex}:{num:o}):yi(e,"Complex",[e.number(i.re),e.number(i.im)],Object.assign(Object.assign({},t),{wikidata:"Q11567"}));if(Array.isArray(i))return t.latex||t.wikidata||e.jsonSerializationOptions.metadata.includes("latex")||!e.jsonSerializationOptions.shorthands.includes("function")||!e.jsonSerializationOptions.shorthands.includes("number")?yi(e,"Rational",[e.number(i[0]),e.number(i[1])],t):["Rational",i[0],i[1]];if(Number.isNaN(i)&&(o="NaN"),!Number.isFinite(i)&&i>0&&(o="+Infinity"),!Number.isFinite(i)&&i<0&&(o="-Infinity"),!o){if(a)return i;o=_i(e,i.toString())}return e.jsonSerializationOptions.metadata.includes("latex")&&(t.latex=null!==(s=t.latex)&&void 0!==s?s:e.serialize({num:o})),t.latex?{num:o,latex:t.latex}:{num:o}}function _i(e,i){var t;if(!e.jsonSerializationOptions.repeatingDecimal)return i;let[n,r,s,a]=null!==(t=i.match(/^(.*)\.([0-9]+)([e|E][-+]?[0-9]+)?$/))&&void 0!==t?t:[];if(!s)return i;const o=s[s.length-1];s=s.slice(0,-1);let l="";for(let e=0;e<s.length-16;e++){l=s.substring(0,e);for(let t=0;t<=16;t++){const n=s.substring(e,e+t+1),u=Math.floor((s.length-l.length)/n.length);if(u>1&&(l+n.repeat(u+1)).startsWith(s))return"0"===n?"0"===o?r+"."+l+(null!=a?a:""):i:r+"."+l+"("+n+")"+(null!=a?a:"")}}return i}class Si extends Qe{constructor(e,i,t){super(e,t),this._value=new Map,this._isCanonical=!1;for(const t of Object.keys(i))this._value.set(t,e.box(i[t]));e._register(this)}_purge(){for(const[e,i]of this._value)i._purge()}get hash(){let e=ui("Dictionary");for(const[i,t]of this._value)e^=ui(i)^t.hash;return e}get complexity(){return 97}get head(){return"Dictionary"}get isPure(){return!1}getKey(e){return this._value.get(e)}hasKey(e){return this._value.has(e)}get keys(){return this._value.keys()}get keysCount(){return this._value.size}has(e){for(const[i,t]of this._value)if(t.has(e))return!0;return!1}get domain(){const e=["Dictionary"];for(const[i,t]of this._value)e.push(["Tuple",i,t.domain]);return this.engine.domain(e)}get json(){if(this.engine.jsonSerializationOptions.shorthands.includes("dictionary")){const e={};for(const i of this._value.keys())e[i]=this._value.get(i).json;return{dict:e}}const e=[];for(const i of this._value.keys())e.push(this.engine._fn("KeyValuePair",[this.engine.string(i),this._value.get(i)]));return yi(this.engine,"Dictionary",e,{latex:this._latex})}isSame(e){if(this===e)return!0;if(!(e instanceof Si))return!1;if(this._value.size!==e._value.size)return!1;for(const[i,t]of this._value){const n=e.getKey(i);if(!n||!t.isSame(n))return!1}return!0}match(e,i){if(!(e instanceof Si))return null;if(this._value.size!==e._value.size)return null;let t={};for(const[i,n]of this._value){const r=e.getKey(i);if(!r)return null;const s=n.match(r);if(null===s)return null;t=Object.assign(Object.assign({},t),s)}return t}isEqual(e){if(this===e)return!0;if(!(e instanceof Si))return!1;if(!e.keys||this._value.size!==e._value.size)return!1;for(const[i,t]of this._value){const n=e.getKey(i);if(!n||!t.isEqual(n))return!1}return!0}apply(e,i){const t={};for(const i of this.keys)t[i]=this.engine.box(e(this.getKey(i)));return i?this.engine.fn(i,[{dict:t}]):new Si(this.engine,t)}evaluate(e){return this.apply((i=>{var t;return null!==(t=i.evaluate(e))&&void 0!==t?t:i}))}get isCanonical(){return this._isCanonical}set isCanonical(e){this._isCanonical=e}get canonical(){if(this.isCanonical)return this;const e=this.apply((e=>e.canonical));return e.isCanonical=!0,e}simplify(e){var i;return null===(i=null==e?void 0:e.recursive)||void 0===i||i?this.apply((i=>{var t;return null!==(t=i.simplify(e))&&void 0!==t?t:i})):this}N(e){return this.apply((i=>i.N(e)))}replace(e,i){let t=0;const n={};for(const r of this.keys){const s=this.getKey(r),a=s.replace(e,i);null!==a&&(t+=1),n[r]=null!=a?a:s}return 0===t?null:new Si(this.engine,n)}subs(e){const i={};for(const t of this.keys)i[t]=this.getKey(t).subs(e);return new Si(this.engine,i)}}function wi(e,i){var t;const n=new Set;for(const[r,s,a]of i){let i=e.pattern(r);const o={};for(const t of ai(i))o[t]=e.symbol("_"+t);let l;i=i.subs(o);const u=ri(null==a?void 0:a.condition);if(u){const i=e.parse(u).subs(o);l=e=>{var t;return"True"===(null===(t=i.subs(e).value)||void 0===t?void 0:t.symbol)}}else l=null==a?void 0:a.condition;const c=ni(s)?e.parse(s):e.box(s);c&&n.add([i,c.subs(o),null!==(t=null==a?void 0:a.priority)&&void 0!==t?t:0,l])}return n}function Ei([e,i,t,n],r,s){const a=e.match(r,s);return null===a?null:"function"!=typeof n||n(a)?i.subs(a):null}function Ii(e,i,t){var n,r;const s=null!==(n=null==t?void 0:t.iterationLimit)&&void 0!==n?n:1;let a=0;const o=null!==(r=null==t?void 0:t.once)&&void 0!==r&&r;let l=!1,u=!1;try{for(;!l&&a<s;){l=!0;for(const n of i){const i=Ei(n,e,t);if(null!==i&&i!==e){if(o)return i;l=!1,u=!0,e=i}}a+=1}}catch(e){}return u?e:null}const ki=[];function Ai(e,i){if(null==i)return e;if(e===i)return e;const t=e.engine,n=t.box(i);return t.costFunction(n)<=1.7*t.costFunction(e)?n:e}class Mi extends Qe{constructor(e,i,t,n){var r;super(e,n),this._head="string"==typeof i?i:null!==(r=i.symbol)&&void 0!==r?r:i,this._ops=t,"string"==typeof this._head&&(this._def=e.getFunctionDefinition(this._head,t)),this._isCanonical=!1,e._register(this)}get hash(){if(void 0!==this._hash)return this._hash;let e=0;for(const i of this._ops)e=e<<1^i.hash|0;return e="string"==typeof this._head?e^ui(this._head)|0:e^this._head.hash|0,this._hash=e,e}_purge(){"string"!=typeof this._head&&this._head._purge();for(const e of this._ops)e._purge();this._value&&this._value._purge(),this._numericValue&&this._numericValue._purge()}get wikidata(){var e,i,t;return null!==(t=null!==(e=this._wikidata)&&void 0!==e?e:null===(i=this._def)||void 0===i?void 0:i.wikidata)&&void 0!==t?t:""}get description(){return this._def&&this._def.description?"string"==typeof this._def.description?[this._def.description]:this._def.description:[]}get url(){var e,i;return null!==(i=null===(e=this._def)||void 0===e?void 0:e.url)&&void 0!==i?i:""}get complexity(){var e,i;return null!==(i=null===(e=this._def)||void 0===e?void 0:e.complexity)&&void 0!==i?i:ci}get head(){return this._head}get value(){if(this.isPure)return this._value||(this._value=this.evaluate()),this._value}get numericValue(){if(!this.isPure)return;if(this._numericValue)return this._numericValue;const e=this.N();return this._numericValue=e.isLiteral?e:void 0,this._numericValue}get isPure(){var e;if(void 0!==this._isPure)return this._isPure;let i;return void 0!==(null===(e=this._def)||void 0===e?void 0:e.pure)&&(i=this._def.pure),!1!==i&&(i=this._ops.every((e=>e.isPure))),this._isPure=i,i}get isLiteral(){return!1}get ops(){return this._ops}get nops(){return this._ops.length}get op1(){var e;return null!==(e=this._ops[0])&&void 0!==e?e:this.engine.symbol("Missing")}get op2(){var e;return null!==(e=this._ops[1])&&void 0!==e?e:this.engine.symbol("Missing")}get op3(){var e;return null!==(e=this._ops[2])&&void 0!==e?e:this.engine.symbol("Missing")}get functionDefinition(){return this._def}_repairDefinition(){if("string"==typeof this._head){if("_"===this._head[0])return;this._def=this.engine.getFunctionDefinition(this._head,this._ops),this._def&&(this._head=this._def.name)}}get domain(){var e;if(null===(e=this._def)||void 0===e?void 0:e.domain)return"function"==typeof this._def.domain?this.engine.domain(this._def.domain(this.engine,this._ops)):this.engine.domain(this._def.domain);const i=[this.head];for(const e of this._ops)i.push(e.domain);return i.push(this.engine.domain("Anything")),this.engine.domain(i)}get valueDomain(){var e;return null!==(e=this.domain.codomain)&&void 0!==e?e:this.engine.domain("Nothing")}isLess(e){if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e<0}}isLessEqual(e){if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e<=0}}isGreater(e){if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e>0}}isGreaterEqual(e){if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e>=0}}get isZero(){const e=this.sgn;return null!==e&&("number"==typeof e?0===e:void 0)}get isNotZero(){const e=this.sgn;return null!==e&&("number"==typeof e?0!==e:void 0)}get isOne(){}get isNegativeOne(){}get isPositive(){const e=this.sgn;return null!==e&&("number"==typeof e?0!==e:void 0)}get isNonPositive(){const e=this.sgn;return null!==e&&("number"==typeof e?e<=0:void 0)}get isNegative(){const e=this.sgn;return null!==e&&("number"==typeof e?e<0:void 0)}get isNonNegative(){const e=this.sgn;return null!==e&&("number"==typeof e?e>=0:void 0)}get isNumber(){return this.valueDomain.isSubdomainOf("Number")}get isInteger(){return this.valueDomain.isSubdomainOf("Integer")}get isRational(){return this.valueDomain.isSubdomainOf("RationalNumber")}get isAlgebraic(){return this.valueDomain.isSubdomainOf("AlgebraicNumber")}get isReal(){return this.valueDomain.isSubdomainOf("RealNumber")}get isExtendedReal(){return this.valueDomain.isSubdomainOf("ExtendedRealNumber")}get isComplex(){return this.valueDomain.isSubdomainOf("ComplexNumber")}get isImaginary(){return this.valueDomain.isSubdomainOf("ImaginaryNumber")}get json(){return this._isCanonical?function(e,i,t,n){var r,s;const a=e.jsonSerializationOptions.exclude;if("Add"===i&&2===t.length&&!a.includes("Subtract")){const i=t[0].asSmallInteger;if(null!==i&&i<0)return yi(e,"Subtract",[t[1],e.number(-i)],n);if("Negate"===t[0].head)return yi(e,"Subtract",[t[1],t[0].op1],n)}if("Divide"===i&&e.jsonSerializationOptions.exclude.includes("Divide"))return yi(e,"Multiply",[t[0],e._fn("Power",[t[1],e.NEGATIVE_ONE])],n);if("Multiply"===i&&!e.jsonSerializationOptions.exclude.includes("Divide")){const i=new gi(e,t).asRationalExpression();if("Divide"===i.head)return yi(e,i.head,i.ops,n)}if("Power"===i){if(!a.includes("Exp")&&"ExponentialE"===(null===(r=t[0])||void 0===r?void 0:r.symbol))return yi(e,"Exp",[t[1]],n);if(null===(s=t[1])||void 0===s?void 0:s.isLiteral){const i=t[1].asSmallInteger;if(!a.includes("Square")&&2===i)return yi(e,"Square",[t[0]],n);if(!e.jsonSerializationOptions.exclude.includes("Divide")){if(-1===i)return yi(e,"Divide",[e.ONE,t[0]],n);if(null!==i&&i<0)return yi(e,"Divide",[e.ONE,e.power(t[0],-i)],n)}const[r,s]=t[1].rationalValue;if(1===r){if(!a.includes("Sqrt")&&2===s)return yi(e,"Sqrt",[t[0]],n);if(!a.includes("Root"))return yi(e,"Root",[t[0],e.number(s)],n)}if(-1===r){if(!a.includes("Sqrt")&&2===s)return yi(e,"Divide",[e.ONE,e._fn("Sqrt",[t[0]])],n);if(!a.includes("Root"))return yi(e,"Divide",[e.ONE,e._fn("Root",[t[0],e.number(s)])],n)}}}return yi(e,i,t,n)}(this.engine,this._head,this._ops,{latex:this._latex,wikidata:this._wikidata}):yi(this.engine,this._head,this._ops,{latex:this._latex,wikidata:this._wikidata})}has(e){if("string"==typeof this._head)if("string"==typeof e){if(this._head===e)return!0}else if(e.includes(this._head))return!0;for(const i of this._ops)if(i.has(e))return!0;return!1}isSame(e){if(this===e)return!0;if(!(e instanceof Mi))return!1;if(this.nops!==e.nops)return!1;if("string"==typeof this.head){if(this.head!==e.head)return!1}else{if("string"==typeof e.head)return!1;if(!e.head||!this.head.isSame(e.head))return!1}const i=this._ops,t=e._ops;for(let e=0;e<i.length;e++)if(!i[e].isSame(t[e]))return!1;return!0}match(e,i){if(!(e instanceof Mi))return null;let t={};if("string"==typeof this.head){if(this.head!==e.head)return null}else{if("string"==typeof e.head)return null;{if(!e.head)return null;const n=this.head.match(e.head,i);if(null===n)return null;t=Object.assign(Object.assign({},t),n)}}const n=this._ops,r=e._ops;for(let e=0;e<n.length;e++){const s=n[e].match(r[e],i);if(null===s)return null;t=Object.assign(Object.assign({},t),s)}return t}isEqual(e){if(!this.isCanonical)return this.canonical.isEqual(e);if((e=e.canonical).isNumber&&this.isNumber){const i=this.engine,t=i.add([this,i.negate(e)]).N();return!!t.isZero||null!==t.asFloat&&0===i.chop(t.asFloat)||this.evaluate().isSame(e.evaluate())}return this.domain.isRelationalOperator&&e.domain.isRelationalOperator?this.evaluate().isSame(e.evaluate()):this.isSame(e)}get sgn(){var e,i,t,n,r,s,a,o;const l=this.head;if("Negate"===l){const i=null===(e=this._ops[0])||void 0===e?void 0:e.sgn;if(void 0===i)return;return null===i?null:0===i?0:i>0?-1:1}if("Multiply"===l){const e=this._ops.reduce(((e,i)=>{var t;return e*(null!==(t=i.sgn)&&void 0!==t?t:NaN)}),1);return isNaN(e)?null:e>0?1:e<0?-1:0}if("Add"===l){let e=0,i=0,t=0;const n=this._ops.length;for(const n of this._ops){const r=n.sgn;if(null==r)break;0===r&&(t+=1),r>0&&(e+=1),r<0&&(i+=1)}return t===n?0:e===n?1:i===n?-1:null}if("Divide"===l){const e=null===(i=this._ops[0])||void 0===i?void 0:i.sgn,n=null===(t=this._ops[1])||void 0===t?void 0:t.sgn;return null===e||null===n||void 0===e||void 0===n?null:0===e?0:e>0&&n>0||e<0&&n<0?1:-1}return"Square"===l?(null===(n=this._ops[0])||void 0===n?void 0:n.isImaginary)?-1:(null===(r=this._ops[0])||void 0===r?void 0:r.isZero)?0:1:"Abs"===l?(null===(s=this._ops[0])||void 0===s?void 0:s.isZero)?0:1:"Sqrt"===l?(null===(a=this._ops[0])||void 0===a?void 0:a.isZero)?0:(null===(o=this._ops[0])||void 0===o?void 0:o.isImaginary)?null:1:null}*map(e){let i=0;for(;i<this._ops.length;)yield e(this._ops[i++])}get isCanonical(){return this._isCanonical}set isCanonical(e){this._isCanonical=e}get canonical(){var e,i,t,n,r,s,a;if(this.isCanonical)return this;let o=(null===(e=this._def)||void 0===e?void 0:e.associative)&&null!==(i=Xe(this._ops,this._def.name))&&void 0!==i?i:this._ops;if(o=Fi(o,null!==(n=null===(t=this._def)||void 0===t?void 0:t.hold)&&void 0!==n?n:"none",(e=>e.canonical)),(null===(r=this._def)||void 0===r?void 0:r.associative)&&(o=null!==(s=Xe(o,this._def.name))&&void 0!==s?s:o),null===(a=this._def)||void 0===a?void 0:a.canonical)return this._def.canonical(this.engine,o);if(!this._def)return this.engine._fn(this._head,o);if(1===o.length&&o[0].head===this._head)if(this._def.idempotent)o=o[0].ops;else if(this._def.involution)return o[0].op1;return o.length>1&&!0===this._def.commutative&&(o=o.sort(hi)),this.engine._fn(this._head,o)}apply(e,i){const t=null!=i?i:this.head;let n=!1;const r=[];for(const i of this._ops){const t=e(i);i!==t&&(n=!0),r.push(this.engine.box(t))}return n||this.head!==t?this.engine.fn(t,r):this}simplify(e){var i,t,n,r;if(!this.isCanonical)return this.canonical.simplify(e);const s=this._def;let a,o=this._ops;if(s?(s.associative&&(o=null!==(i=Xe(o,s.name))&&void 0!==i?i:o),o=Fi(o,s.hold,(i=>i.simplify(e))),s.associative&&(o=null!==(t=Xe(o,s.name))&&void 0!==t?t:o)):o=Fi(this._ops,"none",(i=>i.simplify(e))),"string"!=typeof this._head)return Oi(this._head,o).simplify(e);s&&(s.simplify?a=s.simplify(this.engine,o):s.inert&&(a=null!==(n=o[0])&&void 0!==n?n:this.engine.symbol("Missing"))),a||(a=this.engine.fn(this._head,o).canonical);const l=null!==(r=null==e?void 0:e.rules)&&void 0!==r?r:this.engine.cache("standard-simplification-rules",(()=>wi(this.engine,ki)),(e=>{for(const[i,t,n,r]of e)i._purge(),t._purge();return e}));let u=0,c=!1;do{const e=a.replace(l);null!==e?(a=Ai(e,a),a===e&&(c=!0)):c=!0,u+=1}while(!c&&u<this.engine.iterationLimit);return a}evaluate(e){var i,t,n,r;if(!this.isCanonical)return this.canonical.evaluate(e);const s=this._def;let a;return s?(a=Fi(s.associative&&null!==(i=Xe(this._ops,s.name))&&void 0!==i?i:this._ops,s.hold,(i=>i.evaluate(e))),s.associative&&(a=null!==(t=Xe(a,s.name))&&void 0!==t?t:a)):a=Fi(this._ops,"none",(i=>i.evaluate(e))),"string"!=typeof this._head?Oi(this._head,a).evaluate(e):s?void 0===s.evaluate?s.inert?null!==(n=a[0])&&void 0!==n?n:this.engine.symbol("Missing"):this.engine.fn(this._head,a).canonical:"function"!=typeof s.evaluate?Oi(s.evaluate,a).canonical:null!==(r=s.evaluate(this.engine,a))&&void 0!==r?r:this.engine.fn(this._head,a).canonical:this.engine.fn(this._head,a).canonical}N(e){var i,t,n,r;if(!this.isCanonical)return this.canonical.N(e);const s=this._def;let a;if(s?(a=Fi(s.associative&&null!==(i=Xe(this._ops,s.name))&&void 0!==i?i:this._ops,s.hold,(i=>i.N(e))),s.associative&&(a=null!==(t=Xe(a,s.name))&&void 0!==t?t:a)):a=Fi(this._ops,"none",(i=>i.N(e))),"string"!=typeof this._head)return Oi(this._head,a).N(e);if(!s)return this.engine.fn(this._head,a).canonical;const o=null!==(r=null===(n=s.N)||void 0===n?void 0:n.call(s,this.engine,a))&&void 0!==r?r:this.engine.fn(this._head,a).evaluate();if(o.isLiteral){if(!li(this.engine)&&o.complexValue)return this.engine.NAN;if(!oi(this.engine)&&o.decimalValue)return this.engine.number(o.decimalValue.toNumber())}return o}solve(e){return null}replace(e,i){return Ii(this,e,i)}subs(e){return this.engine.fn(this._head,this._ops.map((i=>i.subs(e)))).canonical}}function Oi(e,i){const t={__:e.engine.tuple(i),"_#":e.engine.number(i.length)};let n=1;for(const e of i)t["_"+n++]=e;return t._=t._1,e.subs(t)}function Fi(e,i,t){if(0===e.length)return[];const n=[];for(let r=0;r<e.length;r++)if("Nothing"!==e[r].symbol)if("Hold"===e[r].head)n.push(e[r].op1);else if("ReleaseHold"===e[r].head){const i=t(e[r].op1);null!==i&&"Nothing"!==i.symbol&&n.push(i)}else if(qi(e,i,r)){const i=t(e[r]);null!==i&&"Nothing"!==i.symbol&&n.push(i)}else n.push(e[r]);return n}function qi(e,i,t){return"all"!==i&&("none"===i||("first"===i?0!==t:"rest"===i?0===t:"last"===i?t!==e.length-1:"most"===i&&t===e.length-1))}function Vi(e){if("number"==typeof e&&!isNaN(e))return isFinite(e)?0===e?"NonNegativeInteger":Number.isInteger(e)?e>0?"PositiveInteger":e<0?"NegativeInteger":"Integer":e>0?"PositiveNumber":e<0?"NegativeNumber":"RealNumber":"ExtendedRealNumber";if(e instanceof l.exports.Decimal)return e.isNaN()?"Number":e.isFinite()?e.isZero()?"NonNegativeInteger":e.isInteger()?e.gt(0)?"PositiveInteger":e.lt(0)?"NegativeInteger":"Integer":e.gt(0)?"PositiveNumber":e.lt(0)?"NegativeNumber":"RealNumber":"ExtendedRealNumber";if(e instanceof c.exports.Complex){const i=e;return 0===i.im?Vi(i.re):0===i.re&&0!==i.im?"ImaginaryNumber":"ComplexNumber"}if(Array.isArray(e)){const[i,t]=je(e);if(!Number.isNaN(i)&&!Number.isNaN(t))return 1!==t?"RationalNumber":Vi(i)}return"Number"}function Pi(e){if(!Number.isInteger(e)||!Number.isFinite(e)||Number.isNaN(e)||e<=1)return!1;if(e<=7919)return ze.has(e);for(const i of ze)if(e%i==0)return!1;return e>=0x3ffffffffffe5?!!function(e,i){let t=0,n=e-1;for(;n%2==0;)n/=2,++t;e:do{let i=Math.pow(2+Math.floor(Math.random()*(e-3)),n)%e;if(1!==i&&i!==e-1){for(let n=t-1;n--;){if(i=i*i%e,1===i)return!1;if(i===e-1)continue e}return!1}}while(--i);return!0}(e,30)&&void 0:e===function(e){if(1===e)return 1;if(e%2==0)return 2;if(e%3==0)return 3;if(e%5==0)return 5;const i=Math.floor(Math.sqrt(e));let t=7;for(;t<=i;){if(e%t==0)return t;if(e%(t+4)==0)return t+4;if(e%(t+6)==0)return t+6;if(e%(t+10)==0)return t+10;if(e%(t+12)==0)return t+12;if(e%(t+16)==0)return t+16;if(e%(t+22)==0)return t+22;if(e%(t+24)==0)return t+24;t+=30}return e}(e)}class Ci extends Qe{constructor(e,i,t){if(super(e,t),this._isCanonical=!0,i instanceof c.exports.Complex)Number.isNaN(i.re)||Number.isNaN(i.im)?this._value=NaN:0===e.chop(i.im)?this._value=i.re:this._value=li(e)?i:NaN;else if(Array.isArray(i)){let[e,t]=i;t<0&&([e,t]=[-e,-t]),1===t?this._value=e:0===e?this._value=0===t?NaN:e:(this._value=[e,t],this._isCanonical=1===$e(e,t))}else i instanceof l.exports.Decimal?this._value=oi(e)?i:i.toNumber():"number"==typeof i?this._value=i:oi(e)?this._value=e.decimal(i):"string"==typeof i&&(this._value=Number.parseFloat(i));"number"==typeof this._value?Number.isInteger(this._value)?this._head="Integer":this._head="Number":this._value instanceof c.exports.Complex?this._head="ComplexNumber":Array.isArray(this._value)?this._head="RationalNumber":this._value instanceof l.exports.Decimal?this._value.isInteger()?this._head="Integer":this._head="RealNumber":this._head="Number",e._register(this)}get hash(){if(void 0!==this._hash)return this._hash;let e=0;return e="number"==typeof this._value?ui(this._value.toString()):this._value instanceof c.exports.Complex?ui(this._value.re.toString()+" +i "+this._value.im.toString()):this._value instanceof l.exports.Decimal?ui(this._value.toString()):ui(this._value[0].toString()+" / "+this._value[1].toString()),this._hash=e,e}get head(){return this._head}get isPure(){return!0}get isLiteral(){return!0}get isCanonical(){return this._isCanonical}set isCanonical(e){this._isCanonical=e}get numericValue(){if(!Array.isArray(this._value))return this;const[e,i]=this._value,t=this.engine;return oi(t)?new Ci(t,t.decimal(e).div(i)):new Ci(t,e/i)}get machineValue(){return"number"==typeof this._value?this._value:null}get decimalValue(){return this._value instanceof l.exports.Decimal?this._value:null}get complexValue(){return this._value instanceof c.exports.Complex?this._value:null}get rationalValue(){return Array.isArray(this._value)?this._value:[null,null]}get asFloat(){if("number"==typeof this._value)return this._value;if(this._value instanceof l.exports.Decimal){if(this._value.isNaN())return NaN;if(!this._value.isFinite())return this._value.isPositive()?1/0:-1/0;if(Je(this._value))return this._value.toNumber()}return Array.isArray(this._value)?this._value[0]/this._value[1]:null}get asSmallInteger(){if("number"==typeof this._value)return Number.isInteger(this._value)&&this._value>=-1e6&&this._value<=Te?this._value:null;if(this._value instanceof l.exports.Decimal)return this._value.isInteger()&&this._value.gte(-1e6)&&this._value.lte(Te)?this._value.toNumber():null;if(Array.isArray(this._value)){const e=this._value[0]/this._value[1];return Number.isInteger(e)&&e>=-1e6&&e<=Te?e:null}return 0===this.engine.chop(this._value.im)&&Number.isInteger(this._value.re)&&this._value.re>=-1e6&&this._value.re<=Te?this._value.re:null}get asRational(){const[e,i]=this.rationalValue;if(null!==e&&null!==i)return[e,i];const t=this.asSmallInteger;return null!==t?[t,1]:[null,null]}get domain(){return void 0===this._domain&&(this._domain=this.engine.domain(Vi(this._value))),this._domain}get json(){return xi(this.engine,this._value,{latex:this._latex})}get sgn(){if(this.isZero)return 0;if(this._value instanceof c.exports.Complex)return null;if("number"==typeof this._value)return this._value<0?-1:this._value>0?1:null;if(this._value instanceof l.exports.Decimal)return this._value.isNegative()?-1:this._value.isPositive()?1:null;if(Array.isArray(this._value)){const[e,i]=this._value;return 0===e&&0!==i?0:e<0?-1:e>0?1:null}return null}isSame(e){if(this===e)return!0;if(!(e instanceof Ci))return!1;if(Array.isArray(this._value)){if(!Array.isArray(e._value))return!1;const[i,t]=e._value;return this._value[0]===i&&this._value[1]===t}return this._value instanceof l.exports.Decimal?e._value instanceof l.exports.Decimal&&this._value.eq(e._value):this._value instanceof c.exports.Complex?e._value instanceof c.exports.Complex&&this._value.equals(e._value):"number"==typeof this._value&&"number"==typeof e._value&&this._value===e._value}isEqual(e){var i,t;if(this===e)return!0;const n=e.numericValue;if(void 0===n)return!1;if(!(n instanceof Ci))return!1;if(Array.isArray(this._value)){const e=n.asFloat;return null!==e&&0===this.engine.chop(this._value[0]/this._value[1]-e)}if(this._value instanceof l.exports.Decimal)return 0===this.engine.chop(this._value.sub(null!==(t=null!==(i=n.decimalValue)&&void 0!==i?i:n.asFloat)&&void 0!==t?t:NaN));if(this._value instanceof c.exports.Complex){if(n instanceof c.exports.Complex)return 0===this.engine.chop(n.re-this._value.re)&&0===this.engine.chop(n.im-this._value.im);if(0!==this._value.im)return!1}const r=this.asFloat,s=n.asFloat;return null!==r&&null!==s&&0===this.engine.chop(s-r)}match(e,i){var t;return this.isEqualWithTolerance(e,null!==(t=null==i?void 0:i.numericTolerance)&&void 0!==t?t:0)?{}:null}isEqualWithTolerance(e,i){var t,n;if(this===e)return!0;if(!(e instanceof Ci))return!1;if(Array.isArray(this._value)){const t=e.asFloat;return null!==t&&Math.abs(this._value[0]/this._value[1]-t)<=i}if(this._value instanceof l.exports.Decimal)return this._value.sub(null!==(n=null!==(t=e.decimalValue)&&void 0!==t?t:e.asFloat)&&void 0!==n?n:NaN).abs().lte(i);if(this._value instanceof c.exports.Complex){if(e._value instanceof c.exports.Complex)return Math.abs(e._value.re-this._value.re)<=i&&Math.abs(e._value.im-this._value.im)<=i;if(0!==this._value.im)return!1}const r=this.asFloat,s=e.asFloat;return null!==r&&null!==s&&Math.abs(s-r)<=i}isLess(e){if(e=e.N(),!this.isImaginary&&!e.isImaginary){if("number"==typeof this._value){const i=e.machineValue;if(null!==i)return this._value<i;const t=e.decimalValue;if(null!==t)return t.greaterThanOrEqualTo(this._value);const[n,r]=e.rationalValue;return null!==n&&null!==r&&this._value*r<n}if(this._value instanceof l.exports.Decimal){const i=e.machineValue;if(null!==i)return this._value.lt(i);const t=e.decimalValue;if(null!==t)return this._value.lt(t);const[n,r]=e.rationalValue;return null!==n&&null!==r&&this._value.mul(r).lt(n)}if(Array.isArray(this._value)){const[i,t]=this._value;if("number"==typeof e)return i<e*t;const[n,r]=e.rationalValue;if(null!==n&&null!==r)return i*r<n*t;const s=e.decimalValue;return null!==s&&s.mul(i).lt(t)}this._value,c.exports.Complex}}isLessEqual(e){e=e.N();const i=this.isLess(e);if(void 0===i)return;const t=this.isEqual(e);return void 0!==t?i||t:void 0}isGreater(e){const i=this.isLess(e);if(void 0!==i)return!i}isGreaterEqual(e){e=e.N();const i=this.isLess(e);if(void 0===i)return;const t=this.isEqual(e);return void 0!==t?!i||t:void 0}get isPositive(){const e=this.sgn;if(null!=e)return e>0}get isNonNegative(){const e=this.sgn;if(null!=e)return e>=0}get isNegative(){const e=this.sgn;if(null!=e)return e<0}get isNonPositive(){const e=this.sgn;if(null!=e)return e<=0}get isZero(){return!Array.isArray(this._value)&&0===this.engine.chop(this._value)}get isNotZero(){return!!Array.isArray(this._value)||0!==this.engine.chop(this._value)}get isOne(){if("number"==typeof this._value)return 1===this._value;if(this._value instanceof l.exports.Decimal)return this._value.equals(this.engine.DECIMAL_ONE);if(Array.isArray(this._value)){const[e,i]=this._value;return 0!==i&&e===i}return this._value.equals(1)}get isNegativeOne(){if("number"==typeof this._value)return-1===this._value;if(this._value instanceof l.exports.Decimal)return this._value.equals(this.engine.DECIMAL_NEGATIVE_ONE);if(Array.isArray(this._value)){const[e,i]=this._value;return e<0&&0!==i&&-e===i}return this._value.equals(-1)}get isOdd(){return!(!this.isOne&&!this.isNegativeOne)||!this.isZero&&!!this.isInteger&&("number"==typeof this._value?this._value%2!=0:this._value instanceof l.exports.Decimal?!this._value.mod(2).isZero():void 0)}get isEven(){return!this.isOne&&!this.isNegativeOne&&(!!this.isZero||!!this.isInteger&&("number"==typeof this._value?this._value%2==0:this._value instanceof l.exports.Decimal?this._value.mod(2).isZero():void 0))}get isPrime(){return!(!this.isInteger||!this.isFinite||this.isNonPositive||this.isOne||this.isZero)&&("number"==typeof this._value?Pi(this._value):void 0)}get isComposite(){return!(!this.isInteger||!this.isFinite||this.isNonPositive||this.isOne||this.isZero)&&("number"==typeof this._value?!Pi(this._value):void 0)}get isInfinity(){return"number"==typeof this._value?!Number.isFinite(this._value)&&!Number.isNaN(this._value):(this._value instanceof l.exports.Decimal||this._value instanceof c.exports.Complex)&&!this._value.isFinite()&&!this._value.isNaN()}get isNaN(){return"number"==typeof this._value?Number.isNaN(this._value):(this._value instanceof l.exports.Decimal&&this._value.isNaN(),this._value instanceof c.exports.Complex&&this._value.isNaN(),!1)}get isFinite(){return!this.isInfinity&&!isNaN}get isNumber(){return!0}get isInteger(){return"number"==typeof this._value?Number.isInteger(this._value):this._value instanceof l.exports.Decimal&&this._value.isInteger()}get isRational(){return!!Array.isArray(this._value)||this.isInteger}get isAlgebraic(){if(this.isRational)return!0}get isReal(){return!(!this.isFinite||this._value instanceof c.exports.Complex&&0!==this.engine.chop(this._value.im))}get isExtendedReal(){return this.isInfinity||this.isReal}get isComplex(){return!this.isNaN}get isImaginary(){return this._value instanceof c.exports.Complex&&0!==this._value.im}get isExtendedComplex(){return this.isInfinity||!this.isNaN}get canonical(){if(this._isCanonical)return this;if(Array.isArray(this._value)){const[e,i]=je(this._value);return Number.isNaN(e)||Number.isNaN(i)?this.engine.NAN:1===i?this.engine.number(e):0===i?0!==e&&Number.isFinite(e)?e<0?this.engine.NEGATIVE_INFINITY:this.engine.POSITIVE_INFINITY:this.engine.NAN:0===e?this.engine.ZERO:this.engine.number([e,i])}return this}simplify(e){return this.canonical}N(e){if(Array.isArray(this._value)){const e=this.engine,[i,t]=this._value;return oi(e)?e.number(e.decimal(i).div(t)):e.number(i/t)}return this}}class Di extends Qe{constructor(e,i,t){super(e,t),this._string=i.normalize(),e._register(this)}get hash(){return ui("String"+this._string)}get json(){return e=this.engine,i=i=this._string,e.jsonSerializationOptions.shorthands.includes("string")?`'${i}'`:{str:i};var e,i}get head(){return"String"}get isPure(){return!0}get isLiteral(){return!0}get isCanonical(){return!0}set isCanonical(e){}get domain(){return this.engine.domain("String")}get complexity(){return 19}get string(){return this._string}isEqual(e){return e.string===this._string}isSame(e){return e.string===this._string}match(e,i){return e instanceof Di&&this._string===e._string?{}:null}}function Li(e,i){if(null==i)return e.symbol("Nothing");if(i instanceof Qe)return i;if(Array.isArray(i)){if("number"!=typeof i[0])return new Mi(e,"string"==typeof i[0]?i[0]:Li(e,i[0]),i.slice(1).map((i=>Li(e,i))));const[t,n]=i;return"number"==typeof n&&Number.isInteger(t)&&Number.isInteger(n)?e.number(i):e.fn("Divide",i)}if("number"==typeof i||i instanceof c.exports.Complex||i instanceof l.exports.Decimal)return e.number(i);if("string"==typeof i)return i.startsWith("'")&&i.endsWith("'")?new Di(e,i.slice(1,-1)):e.symbol(i);if("object"==typeof i){const t={latex:i.latex,wikidata:i.wikidata};if("dict"in i)return new Si(e,i.dict,t);if("fn"in i)return"string"==typeof i.fn[0]?function(e,i,t,n){var r,s,a;if("Hold"===i)return new Mi(e,"Hold",[zi(e,null!==(r=t[0])&&void 0!==r?r:"Missing")],n);if("String"===i)return 0===t.length?new Di(e,"",n):new Di(e,t.map((e=>{var i;return null!==(i=Ri(e))&&void 0!==i?i:""})).join(""),n);if("Symbol"===i&&t.length>0)return e.symbol(t.map((e=>{var i;return null!==(i=Ri(e))&&void 0!==i?i:""})).join(""),n);if(("Divide"===i||"Rational"===i)&&2===t.length){const i=Z(t[0]),n=Z(t[1]);if(null!==i&&null!==n&&Number.isInteger(i)&&Number.isInteger(n))return e.number([i,n])}if("Number"===i&&1===t.length)return Li(e,t[0]);if("Complex"===i){if(1===t.length){const i=Li(e,t[0]),r=i.asFloat;return null!==r&&0!==r?new Ci(e,e.complex(0,r),n):e.mul([i,e.I])}if(2===t.length){const i=Li(e,t[0]),r=Li(e,t[1]),s=i.asFloat,a=r.asFloat;return null!==a&&null!==s?0===a&&0===s?e.ZERO:null!==a&&0!==a?new Ci(e,e.complex(s,a),n):i:e.add([i,e.mul([r,e.I])],n)}}if("Negate"===i&&t.length>0&&"number"==typeof t[0])return e.number(-t[0],n);if("Single"===i||"Pair"===i||"Triple"===i)return e.fn("Tuple",t,n);if("Dictionary"===i){const i={};for(const n of t){const t=e.box(n),r=t.head;if("KeyValuePair"===r||"Pair"===r||"Tuple"===r){const e=t.op1;if(!e.isMissing){const n=t.op2;let r=null!==(s=e.symbol)&&void 0!==s?s:e.string;if(!r&&e.isLiteral){const i=null!==(a=e.machineValue)&&void 0!==a?a:e.asSmallInteger;i&&Number.isFinite(i)&&Number.isInteger(i)&&(r=i.toString())}r&&(i[r]=n)}}}return new Si(e,i,n)}return new Mi(e,i,t.map((i=>Li(e,i))),n)}(e,i.fn[0],i.fn.slice(1),t):e.fn(Li(e,i.fn[0]),i.fn.slice(1).map((i=>Li(e,i))),t);if("str"in i)return new Di(e,i.str,t);if("sym"in i)return e.symbol(i.sym,t);if("num"in i)return e.number(i,t)}return e.symbol("Undefined")}function Ti(e,i,t){var n;if(i instanceof Ci)return i;if(Array.isArray(i)){if(2!==i.length)throw Error("Array argument to boxNumber() should be two integers");const[n,r]=i;if("number"!=typeof n||"number"!=typeof r)throw Error("Array argument to boxNumber() should be two integers");if(!Number.isInteger(n)||!Number.isInteger(r))throw Error("Array argument to boxNumber() should be two integers");if(r===n)return 0===r?e.NAN:e.ONE;if(1===r)i=n;else{if(-1!==r)return 1===n&&2===r?e.HALF:new Ci(e,[n,r],t);i=-n}}if(i instanceof c.exports.Complex){if(i.isNaN())return e.NAN;if(i.isZero())return e.ZERO;if(i.isInfinite())return e.COMPLEX_INFINITY;if(0!==i.im)return li(e)?new Ci(e,i,t):e.NAN;i=i.re}if(i instanceof l.exports.Decimal)return i.isNaN()?e.NAN:i.equals(e.DECIMAL_NEGATIVE_ONE)?e.NEGATIVE_ONE:i.isZero()?e.ZERO:i.equals(e.DECIMAL_ONE)?e.ONE:i.equals(e.DECIMAL_TWO)?e.TWO:!i.isFinite()&&i.isPositive()?e.POSITIVE_INFINITY:!i.isFinite()&&i.isNegative()?e.NEGATIVE_INFINITY:new Ci(e,oi(e)?i:i.toNumber(),t);if("object"==typeof i&&"num"in i)if("number"==typeof i.num)i=i.num;else if("string"==typeof i.num){let r=i.num.toLowerCase();if(/[0-9][nd]$/.test(r)&&(r=r.slice(0,-1)),r=r.replace(/[\u0009-\u000d\u0020\u00a0]/g,""),/\([0-9]+\)$/.test(r)){const[i,t,s]=null!==(n=r.match(/(.+)\(([0-9]+)\)$/))&&void 0!==n?n:[];r=t+s.repeat(Math.ceil(e.precision/s.length))}return"nan"===r?e.NAN:"infinity"===r||"+infinity"===r?e.POSITIVE_INFINITY:"-infinity"===r?e.NEGATIVE_INFINITY:"0"===r?e.ZERO:"1"===r?e.ONE:"-1"===r?e.NEGATIVE_ONE:"2"===r?e.TWO:new Ci(e,r,t)}if("number"==typeof i){if(Number.isNaN(i))return e.NAN;if(!Number.isFinite(i)&&i>0&&e.POSITIVE_INFINITY,!Number.isFinite(i)&&i<0&&e.NEGATIVE_INFINITY,-1===i)return e.NEGATIVE_ONE;if(0===i)return e.ZERO;if(1===i)return e.ONE;if(2===i)return e.TWO}return"number"==typeof i?new Ci(e,i,t):null}function zi(e,i){if("object"==typeof i&&i instanceof Qe)return i;if("string"==typeof i)return Li(e,i);if(Array.isArray(i)){const t=i.map((i=>zi(e,i)));return new Mi(e,t[0],t.slice(1))}if("object"==typeof i){if("dict"in i)return new Si(e,i.dict);if("fn"in i)return zi(e,i.fn);if("str"in i)return new Di(e,i.str);if("sym"in i)return Li(e,i.sym);if("num"in i)return Li(e,i.num)}return Li(e,i)}function Ri(e){var i,t;if("string"==typeof e)return e;if(e instanceof Qe)return null!==(t=null!==(i=e.string)&&void 0!==i?i:e.symbol)&&void 0!==t?t:e.toString();if("object"==typeof e){if("str"in e)return e.str;if("fn"in e&&"String"===e.fn[0]&&"string"==typeof e.fn[1])return e.fn[1]}return Array.isArray(e)&&"String"===e[0]&&"string"==typeof e[1]?e[1]:null}function $i(e,i){if(!e.isLiteral)return null;let t;null!==e.machineValue&&(t=-e.machineValue),e.decimalValue&&(t=e.decimalValue.neg()),e.complexValue&&(t=e.complexValue.neg());const[n,r]=e.rationalValue;return null!==n&&null!==r&&(t=[-n,r]),void 0!==t?e.engine.number(t,i):null}function ji(e,i){var t;if("Negate"===e.head)return e.op1;if(e.isLiteral)return $i(e,i);if("Add"===e.head){let n=e.ops.map((e=>ji(e)));return n=null!==(t=Xe(n,"Add"))&&void 0!==t?t:n,e.engine.add(n,i)}return e.engine._fn("Negate",[e],i)}function Zi(e){var i;if("Negate"===e.head)return e.op1;if(e.isLiteral)return $i(e);const t=e.engine;if("Add"===e.head){let n=e.ops.map((e=>Zi(e)));return n=null!==(i=Xe(n,"Add"))&&void 0!==i?i:n,t.add(n)}return"Multiply"===e.head?function(e,i){let t=[],n=!1;for(const e of i)n||"Negate"!==e.head?t.push(e):(n=!0,t.push(e.op1));if(n)return e.mul(t);t=[];for(const e of i)!n&&e.isLiteral&&e.isInteger?(n=!0,t.push(Zi(e))):t.push(e);if(n)return e.mul(t);t=[];for(const e of i)!n&&e.isLiteral&&e.isNumber?(n=!0,t.push(Zi(e))):t.push(e);return n?e.mul(t):e._fn("Negate",[e._fn("Multiply",i)])}(t,e.ops):"Divide"===e.head?t.divide(Zi(e.op1),e.op2):t._fn("Negate",[e])}function Gi(e,i,t="simplify"){return Zi(i)}class Hi{constructor(e,i){if(this._literal=[0,1],this._imaginary=0,this._posInfinityCount=0,this._negInfinityCount=0,this._terms=[],this.engine=e,i)for(const e of i)this.addTerm(e)}get isEmpty(){return 0===this._terms.length&&0===this._literal[0]&&0===this._imaginary&&0===this._negInfinityCount&&0===this._posInfinityCount}addTerm(e,i){if("Nothing"===e.symbol)return;if(void 0===i&&(i=[1,1]),e.isLiteral){if(e.isInfinity)return void(e.isPositive?this._posInfinityCount+=1:this._negInfinityCount+=1);const[t,n]=e.asRational;if(null!==t&&null!==n)return void(this._literal=[i[0]*(this._literal[0]*n+t*this._literal[1]),i[1]*n*this._literal[1]]);if(e.complexValue){let t=e.complexValue.re,n=e.complexValue.im;if(Number.isInteger(t)&&Math.abs(t)<=Te&&(this._literal[0]+=this._literal[1]*t*i[0]/i[1],t=0),Number.isInteger(n)&&Math.abs(n)<=Te&&(this._imaginary+=n*i[0]/i[1],n=0),0===t&&0===n)return;e=this.engine.number(this.engine.complex(t,n)).canonical}}let t;if([t,e]=di(e),0===t[0])return;if(t=[t[0]*i[0],t[1]*i[1]],"Add"===e.head){for(const i of e.ops)this.addTerm(i,t);return}let n=!1;if(!e.isLiteral)if(this._terms.length>500){const i=e.hash;for(let r=0;r<this._terms.length;r++)if(!this._terms[r].term.isLiteral&&i===this._terms[r].term.hash&&e.isSame(this._terms[r].term)){const[e,i]=this._terms[r].coef,[s,a]=t;this._terms[r].coef=[e*a+i*s,i*a],n=!0;break}}else for(let i=0;i<this._terms.length;i++)if(!this._terms[i].term.isLiteral&&e.isSame(this._terms[i].term)){const[e,r]=this._terms[i].coef,[s,a]=t;this._terms[i].coef=[e*a+r*s,r*a],n=!0;break}n||this._terms.push({term:e,coef:t})}terms(){var e;const i=this.engine;if(this._posInfinityCount>0&&this._negInfinityCount>0)return[i.NAN];if(this._posInfinityCount>0)return[i.POSITIVE_INFINITY];if(this._negInfinityCount>0)return[i.NEGATIVE_INFINITY];if(0===this._terms.length)return 0===this._literal[0]&&0===this._imaginary?[]:0===this._imaginary?[i.number(this._literal).canonical]:0===this._literal[0]?[i.number(i.complex(0,this._imaginary)).canonical]:[i.number(this._literal).canonical,i.number(i.complex(0,this._imaginary)).canonical];const t=[];for(const{coef:[e,n],term:r}of this._terms)0!==e&&(e===n?t.push(r):e===-n?t.push(i.negate(r)):1===n?t.push(i.mul([i.number(e).canonical,r])):1===e?t.push(i.divide(r,i.number(n).canonical)):0!==e&&t.push(i.mul([i.number([e,n]).canonical,r])));return 0!==this._literal[0]&&t.push(i.number(this._literal).canonical),0!==this._imaginary&&t.push(i.number(i.complex(0,this._imaginary)).canonical),null!==(e=Xe(t,"Add"))&&void 0!==e?e:t}asExpression(){const e=this.engine,i=this.terms();return 0===i.length?e.ZERO:1===i.length?i[0]:e._fn("Add",i.sort(((e,i)=>{const t=ti(e),n=ti(i);if(t<n)return-1;if(t>n)return 1;const r=ei(e),s=ei(i);if(r!==s)return s-r;const a=ii(e),o=ii(i);return a!==o?a-o:hi(e,i)})))}}function Wi(e,i){var t,n,r,s;if((i=null!==(t=Xe(i,"Add"))&&void 0!==t?t:i).length<=1)return null!==(n=i[0])&&void 0!==n?n:e.symbol("Nothing");if(2===i.length){let t=0,n=0;if(i[0].isLiteral&&(n=i[0].machineValue,n=null===n&&i[0].decimalValue&&null!==(r=i[0].asFloat)&&void 0!==r?r:0),0!==n?t=si(i[1]):(t=si(i[0]),0!==t&&(n=i[1].machineValue,n=null===n&&i[1].decimalValue&&null!==(s=i[1].asFloat)&&void 0!==s?s:0)),0!==t)return e.number(e.complex(n,t));if(i[0].isLiteral&&i[1].isLiteral){if(i[0].isZero)return i[1];if(i[1].isZero)return i[0];const[t,n]=i[0].asRational,[r,s]=i[1].asRational;if(null!==t&&null!==n&&null!==r&&null!==s)return e.number([t*s+r*n,n*s])}}return new Hi(e,i).asExpression()}function Bi(e,i,t){const n=new Hi(e);for(const t of i){if(t.isImaginary&&t.isInfinity)return e.symbol("ComplexInfinity");if(t.isNaN||t.isMissing||"Undefined"===t.symbol)return e.NAN;n.addTerm(t)}return n.asExpression()}function Qi(e,i,t,n){if("ComplexInfinity"===t.symbol)return e.NAN;if(t.isLiteral){if(t.isZero)return e.ONE;if(i.isLiteral){if(i.isOne)return e.ONE;if(i.isZero){if(t.isPositive)return e.ZERO;if(t.isNegative)return e.COMPLEX_INFINITY}if(t.isOne)return i;if(t.isNegativeOne){if(i.isOne)return e.ONE;if(i.isNegativeOne)return e.NEGATIVE_ONE;if(i.isInfinity)return e.ZERO;const[t,r]=i.rationalValue;if(null!==t&&null!==r)return e.number([r,t],n);const s=i.asFloat;return null!==s&&Number.isInteger(s)?e.number([1,s],n):e._fn("Power",[i,e.NEGATIVE_ONE],n)}const r=t.asFloat;if(.5===r||-.5===r){const t=i.asSmallInteger;if(null!==t&&t>0){const[i,n]=Re(t,2);if(1===n&&1===i)return e.ONE;if(1!==i)return 1===n?e.number(r>=0?i:[1,i]):e.mul([e.number(i),e.power(e.number(n),e.HALF)])}return r>0?e._fn("Power",[i,e.HALF],n):e._fn("Power",[i,e.number([-1,2])],n)}if(i.isInfinity){if(t.complexValue){const i=t.complexValue.re;if(0===i)return e.NAN;if(i<0)return e.ZERO;if(i>0)return e.COMPLEX_INFINITY}if(i.isNegative){if(t.isInfinity)return e.NAN}else if(i.isPositive){if(t.isNegativeOne)return e.ZERO;if(t.isInfinity)return t.isNegative?e.ZERO:e.POSITIVE_INFINITY}}if(t.isInfinity&&(i.isOne||i.isNegativeOne))return e.NAN;const[s,a]=i.asRational;if(null!==s&&null!==a){const i=t.asSmallInteger;if(null!==i)return-1===i?e.number([a,s]):i>0?e.number([Math.pow(s,i),Math.pow(a,i)]):e.number([Math.pow(a,-i),Math.pow(s,-i)])}}}if("Power"===i.head&&i.op1.isReal){const n=t.asSmallInteger;if(null!==n){const t=i.op2.asSmallInteger;if(null!==t)return e._fn("Power",[i.op1,e.number(n*t)])}if(i.op1.isNonNegative){const[n,r]=t.asRational;if(null!==n&&null!==r){const[t,s]=i.op2.asRational;if(null!==t&&null!==s)return e._fn("Power",[i.op1,e.number([n*t,r*s])])}}}return"Multiply"===i.head&&null!==t.asSmallInteger?e._fn("Multiply",i.ops.map((i=>e.power(i,t)))):null}function Ui(e,i){if(i.machineValue)return e.number(Math.pow(i.machineValue,2));if(i.decimalValue)return e.number(i.decimalValue.pow(2));if(i.complexValue)return e.number(i.complexValue.pow(2));const[t,n]=i.rationalValue;if(null!==t&&null!==n)return e.number([Math.pow(n,2),Math.pow(t,2)]);if("Multiply"===i.head)return e._fn("Multiply",i.ops.map((i=>Ui(e,i))));if("Power"===i.head){const t=i.op2.asSmallInteger;return null!==t?e._fn("Power",[i.op1,e.number(2*t)]):e._fn("Power",[i.op1,e.mul([e.TWO,i.op2])])}return e._fn("Power",[i,e.TWO])}function Ki(e,i,t,n){var r,s,a,o,l,u;if("N"===n&&i.isLiteral&&t.isLiteral)return i.complexValue?e.number(i.complexValue.pow(null!==(s=null!==(r=t.complexValue)&&void 0!==r?r:t.asFloat)&&void 0!==s?s:NaN)):t.complexValue&&i.asFloat?e.number(e.complex(i.asFloat).pow(t.complexValue)):i.decimalValue?e.number(i.decimalValue.pow(null!==(a=t.decimalValue)&&void 0!==a?a:t.asFloat)):i.asFloat&&(t.decimalValue||oi(e))?e.number(e.decimal(i.asFloat).pow(null!==(o=t.decimalValue)&&void 0!==o?o:t.asFloat)):e.number(Math.pow(null!==(l=i.asFloat)&&void 0!==l?l:NaN,null!==(u=t.asFloat)&&void 0!==u?u:NaN));if(null!==i.asSmallInteger){const[n,r]=t.rationalValue;if(!(1!==n&&-1!==n||2!==r&&3!==r)){const[s,a]=Re(i.asSmallInteger,r);if(1===a&&1===s)return e.ONE;if(1===s)return;return 1===a?e.number(n>=0?s:[1,s]):e.mul([e.number(s),e.power(e.number(a),t)])}}}function Yi(e,i){var t;return 0===(i=null!==(t=Xe(i,"Multiply"))&&void 0!==t?t:i).length?e.symbol("Nothing"):1===i.length?i[0]:2===i.length?Xi(i[0],i[1]):new gi(e,i).asExpression()}function Ji(e,i,t){const n=new gi(e);for(const t of i){if(t.isNaN||t.isMissing||"Undefined"===t.symbol)return e.NAN;n.addTerm(t)}return n.asExpression()}function Xi(e,i,t){const n=e.engine;if(e.isLiteral&&i.isLiteral&&e.isInteger&&i.isInteger){if(e.decimalValue&&i.decimalValue)return n.number(e.decimalValue.mul(i.decimalValue));if(e.machineValue&&i.machineValue)return n.number(e.machineValue*i.machineValue)}if("Nothing"===e.symbol)return i;if("Nothing"===i.symbol)return e;if(e.isLiteral&&e.isOne)return i;if(i.isLiteral&&i.isOne)return e;if(e.isLiteral&&e.isNegativeOne)return ji(i);if(i.isLiteral&&i.isNegativeOne)return ji(e);if(e.isMissing||i.isMissing)return n._fn("Multiply",[e,i]);let r=1,s=e,a=i;s.isLiteral&&null!==s.asRational||(a=i,s=e),"Negate"===a.head&&(a=a.op1,r=-r);const[o,l]=s.asRational;if(s.isLiteral&&null!==o&&null!==l){if(o===l)return a;if(0===o)return n.ZERO;if("Add"===a.head)return r<0&&(s=ji(s)),n.add(a.ops.map((e=>Xi(s,e))),t);if(a.isLiteral){const[e,i]=a.asRational;if(null!==e&&null!==i)return n.number(je([r*o*e,i*l]),t)}return r<0?n._fn("Multiply",[ji(s),a],t):n._fn("Multiply",[s,a],t)}if(s.hash===a.hash&&s.isSame(a))return Ui(n,s);const u=new gi(n,[s,a]);return r>0?u.asExpression():ji(u.asExpression(),t)}function et(e,i,t){if(i.isLiteral&&t.isLiteral){if(i.isOne)return e.inverse(t);if(i.isNegativeOne)return ji(e.inverse(t));if(t.isOne)return i;if(t.isNegativeOne)return ji(i);const[n,r]=[i.asSmallInteger,t.asSmallInteger];if(null!==n&&null!==r&&0!==r)return e.number(je([n,r]))}if("Divide"===i.head&&"Divide"===t.head)return e.divide(e.mul([i.op1,t.op2]),e.mul([i.op2,t.op1]));if("Divide"===i.head)return e.divide(e.mul([i.op1,t]),i.op2);if("Divide"===t.head)return e.divide(e.mul([i,t.op2]),t.op1);let[n,r]=fi(i),[s,a]=fi(t);return r=r.canonical,a=a.canonical,a.isLiteral&&a.isOne?n*s<0?ji(r):r:(a=e.inverse(a),r.isOne?a:r.isNegativeOne?ji(a):n*s>0?e.mul([r,a]):e.negate(e.mul([r,a])))}const it=[{functions:[{name:"Abs",domain:["Function","ExtendedRealNumber","ExtendedRealNumber"],range:[0,1/0],wikidata:"Q3317982",threadable:!0,idempotent:!0,complexity:1200,simplify:(e,i)=>tt(e,i[0],"simplify"),evaluate:(e,i)=>tt(e,i[0],"evaluate"),N:(e,i)=>tt(e,i[0],"N")},{name:"Add",wikidata:"Q32043",associative:!0,commutative:!0,threadable:!0,idempotent:!0,domain:"NumericFunction",complexity:1300,canonical:(e,i)=>Wi(e,i),simplify:(e,i)=>Bi(e,i),evaluate:(e,i)=>Bi(e,i),N:(e,i)=>function(e,i){for(const t of i){if(t.isImaginary&&t.isInfinity)return e.symbol("ComplexInfinity");if(t.isNaN||t.isMissing||"Undefined"===t.symbol)return e.NAN}let[t,n]=[0,1],r=0,s=e.DECIMAL_ZERO,a=c.exports.Complex.ZERO;const o=new Hi(e);for(const l of i)if("Nothing"!==l.symbol&&!l.isZero){const[i,u]=l.rationalValue;null!==i&&null!==u?[t,n]=[t*u+n*i,n*u]:null!==l.decimalValue?s=s.add(l.decimalValue):null!==l.machineValue?oi(e)?s=s.add(l.machineValue):r+=l.machineValue:null!==l.complexValue?a=a.add(l.complexValue):o.addTerm(l)}if(!li(e)&&0!==a.im)return e.NAN;if(oi(e)||0!==e.chop(s)){let i=s;if(0!==t&&(i=i.mul(n).add(t).div(n)),0!==r&&(i=i.add(r)),0!==a.re&&(i=i.add(a.re)),0!==a.im)if(Je(i)){const t=e.number(e.complex(i.toNumber(),a.im));if(o.isEmpty)return t;o.addTerm(t)}else o.addTerm(e.number(e.complex(0,a.im))),o.addTerm(e.number(i));else{if(o.isEmpty)return e.number(i);o.addTerm(e.number(i))}}else{const i=r+a.re+t/n,s=e.number(0===a.im?i:e.complex(i,a.im));if(o.isEmpty)return s;o.addTerm(s)}return o.asExpression()}(e,i)},{name:"Ceil",description:"Rounds a number up to the next largest integer",complexity:1250,domain:"NumericFunction",evaluate:(e,i)=>{const t=i[0];return t.decimalValue?e.number(t.decimalValue.ceil()):t.complexValue?e.number(t.complexValue.ceil(0)):null!==t.asFloat?e.number(Math.ceil(t.asFloat)):void 0}},{name:"Chop",associative:!0,threadable:!0,idempotent:!0,complexity:1200,domain:"NumericFunction",N:(e,i)=>{const t=i[0];return t.decimalValue?e.number(e.chop(t.decimalValue)):t.complexValue?e.number(e.chop(t.complexValue)):null!==t.asFloat?e.number(e.chop(t.asFloat)):void 0}},{name:"Complex",wikidata:"Q11567",domain:"NumericFunction",complexity:500},{name:"Divide",wikidata:"Q1226939",domain:"NumericFunction",complexity:2500,canonical:(e,i)=>i[0]&&i[1]?et(e,i[0],i[1]):e.symbol("Missing")},{name:"Exp",domain:"NumericFunction",wikidata:"Q168698",threadable:!0,complexity:3500,canonical:(e,i)=>i[0]?e.power(e.symbol("ExponentialE"),i[0]):e.symbol("Missing")},{name:"Erf",description:"Complementary Error Function",domain:"NumericFunction",complexity:7500},{name:"Erfc",description:"Complementary Error Function",domain:"NumericFunction",complexity:7500},{name:"Factorial",description:"The factorial function",wikidata:"Q120976",complexity:9e3,domain:"NumericFunction",evaluate:(e,i)=>{const t=i[0].asSmallInteger;return null!==t&&t>=0?oi(e)?e.number(Ue(e,e.decimal(t))):e.number(function(e){if(!Number.isInteger(e)||e<0)return NaN;let i=1;for(let t=2;t<=e;t++)i*=t;return i}(t)):i[0].complexValue?e.number(i[0].complexValue.add(1)):null!==i[0].asFloat?e.number(We(1+i[0].asFloat)):void 0}},{name:"Floor",wikidata:"Q56860783",domain:["Function","ExtendedRealNumber","ExtendedRealNumber"],complexity:1250,evaluate:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.floor()):i[0].complexValue?e.number(i[0].complexValue.floor(0)):null!==i[0].asFloat?e.number(Math.floor(i[0].asFloat)):void 0},{name:"Gamma",wikidata:"Q190573",domain:["Function","Number","Number"],complexity:8e3,N:(e,i)=>i[0].decimalValue?e.number(Ye(e,i[0].decimalValue)):i[0].complexValue?e.number(i[0].complexValue):null!==i[0].asFloat?e.number(We(i[0].asFloat)):void 0},{name:"LogGamma",domain:["Function","Number","Number"],complexity:8e3,N:(e,i)=>i[0].decimalValue?e.number(Ke(e,i[0].decimalValue)):i[0].complexValue?e.number(i[0].complexValue):null!==i[0].asFloat?e.number(He(i[0].asFloat)):void 0},{name:"Ln",description:"Natural Logarithm",domain:["Function","Number","Number"],wikidata:"Q204037",complexity:4e3,N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.log()):i[0].complexValue?e.number(i[0].complexValue.log()):null!==i[0].asFloat?e.number(Math.log(i[0].asFloat)):void 0},{name:"Log",description:"Log(b, z) = Logarithm of base b",wikidata:"Q11197",domain:["Function","Number","Number","Number"],complexity:4100,N:(e,i)=>{var t,n,r,s,a;const o=i[0],l=i[1];return o.decimalValue?e.number(o.decimalValue.log().div(null!==(n=null!==(t=l.decimalValue)&&void 0!==t?t:l.asFloat)&&void 0!==n?n:NaN)):o.complexValue?e.number(o.complexValue.log().div(null!==(s=null!==(r=l.complexValue)&&void 0!==r?r:l.asFloat)&&void 0!==s?s:NaN)):null!==o.asFloat?e.number(Math.log(o.asFloat)/Math.log(null!==(a=l.asFloat)&&void 0!==a?a:NaN)):void 0}},{name:"Lb",description:"Base-2 Logarithm",domain:["Function","Number","Number"],wikidata:"Q581168",complexity:4100,N:(e,i)=>{const t=i[0];return t.decimalValue?e.number(t.decimalValue.log().div(e.DECIMAL_TWO)):t.complexValue?e.number(t.complexValue.log().div(e.complex(2))):null!==t.asFloat?e.number(Math.log2(t.asFloat)):void 0}},{name:"Lg",description:"Base-10 Logarithm",domain:["Function","Number","Number"],wikidata:"Q966582",complexity:4100,N:(e,i)=>{const t=i[0];return t.decimalValue?e.number(t.decimalValue.log().div(e.decimal(10))):t.complexValue?e.number(t.complexValue.log().div(e.complex(10))):null!==t.asFloat?e.number(Math.log10(t.asFloat)):void 0}},{name:"Multiply",domain:"NumericFunction",wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,complexity:2100,canonical:(e,i)=>Yi(e,i),simplify:(e,i)=>Ji(e,i),evaluate:(e,i)=>Ji(e,i),N:(e,i)=>function(e,i){for(const t of i)if(t.isNaN||t.isMissing||"Undefined"===t.symbol)return e.NAN;let[t,n]=[1,1],r=1,s=e.DECIMAL_ONE,a=c.exports.Complex.ONE;const o=new gi(e);for(const l of i)if("Nothing"!==l.symbol&&!l.isOne){const[i,u]=l.rationalValue;null!==i&&null!==u?[t,n]=[t*i,n*u]:null!==l.decimalValue?s=s.mul(l.decimalValue):null!==l.machineValue?oi(e)?s=s.mul(l.machineValue):r*=l.machineValue:null!==l.complexValue?a=a.mul(l.complexValue):o.addTerm(l)}if(!li(e)&&0!==a.im)return e.NAN;if(oi(e)||!s.eq(e.DECIMAL_ONE)){const i=s.mul(t).div(n).mul(r);if(1!==a.re||0!==a.im)if(Je(i)){const t=e.number(e.complex(a.mul(i.toNumber())));if(o.isEmpty)return t;o.addTerm(t)}else{if(o.isEmpty)return e._fn("Multiply",[e.number(a),e.number(i)]);o.addTerm(e.number(a)),o.addTerm(e.number(i))}else{if(o.isEmpty)return e.number(i);o.addTerm(e.number(i))}}else{const i=r*t/n;let s;if(s=1!==a.re||0!==a.im?e.number(a.mul(i)):e.number(i),o.isEmpty)return s;o.addTerm(s)}return o.asExpression()}(e,i)},{name:"Negate",description:"Additive Inverse",wikidata:"Q715358",domain:["Function","Number","Number"],complexity:2e3,canonical:(e,i)=>i[0]?ji(i[0]):e.box("Missing"),simplify:(e,i)=>Gi(0,i[0],"simplify"),evaluate:(e,i)=>Gi(0,i[0],"evaluate"),N:(e,i)=>Gi(0,i[0],"N"),sgn:(e,i)=>{var t;const n=null!==(t=i[0])&&void 0!==t?t:e.symbol("Missing");return n.isZero?0:n.isPositive?-1:n.isNegative?1:void 0}},{name:"Power",domain:["Function","Number","Number","Number"],wikidata:"Q33456",commutative:!1,complexity:3500,canonical:(e,i)=>{var t,n,r;const s=null!==(t=i[0])&&void 0!==t?t:e.symbol("Missing"),a=null!==(n=i[1])&&void 0!==n?n:e.symbol("Missing");return null!==(r=Qi(e,s,a))&&void 0!==r?r:e._fn("Power",i)},simplify:(e,i)=>Ki(e,i[0],i[1],"simplify"),evaluate:(e,i)=>Ki(e,i[0],i[1],"evaluate"),N:(e,i)=>Ki(e,i[0],i[1],"N")},{name:"Rational",domain:["Function","Number",["Optional","Number"],"RationalNumber"],complexity:2400,canonical:(e,i)=>2===i.length?et(e,i[0],i[1]):e._fn("Rational",i),simplify:(e,i)=>{if(2===i.length)return null!==i[0].asSmallInteger&&null!==i[1].asSmallInteger?e.number([i[0].asSmallInteger,i[1].asSmallInteger]):void 0},evaluate:(e,i)=>{if(2===i.length)return null!==i[0].asSmallInteger&&null!==i[1].asSmallInteger?e.number([i[0].asSmallInteger,i[1].asSmallInteger]):void 0;const t=i[0].asFloat;if(null===t)return i[0];const n=function(e){if(!Number.isFinite(e))return e;if(0==e%1)return e;let i=Math.floor(e),t=1,n=0,r=i,s=1;for(;e-i>1e-15*s*s;){i=Math.floor(e=1/(e-i));const a=t;t=r;const o=n;n=s,r=a+i*t,s=o+i*n}return[r,s]}(t);return"number"==typeof n?e.number(n):e.number([n[0],n[1]])},N:(e,i)=>{if(2===i.length){if(null===i[0].asSmallInteger||null===i[1].asSmallInteger)return;return e.number(i[0].asSmallInteger/i[1].asSmallInteger)}}},{name:"Root",domain:["Function","Number","RationalNumber","Number"],complexity:3200,canonical:(e,i)=>{var t,n,r;const s=null!==(t=i[0])&&void 0!==t?t:e.symbol("Missing"),a=null!==(n=i[1])&&void 0!==n?n:e.symbol("Missing"),o=e.inverse(a);return null!==(r=Qi(e,s,o))&&void 0!==r?r:e._fn("Power",[s,o])},N:(e,i)=>{var t,n,r;const s=i[0],a=i[1];if(s.decimalValue)return e.number(s.decimalValue.pow(e.DECIMAL_ONE.div(null!==(t=a.asFloat)&&void 0!==t?t:NaN)));if(s.complexValue){const i=a.complexValue?c.exports.Complex.ONE.div(a.complexValue):e.complex(1/(null!==(n=a.asFloat)&&void 0!==n?n:NaN));return e.number(s.complexValue.pow(i))}return null!==s.asFloat?e.number(Math.pow(s.asFloat,null!==(r=a.asFloat)&&void 0!==r?r:NaN)):void 0}},{name:"Round",domain:["Function","Number","Number"],complexity:1250,N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.round()):i[0].complexValue?e.number(i[0].complexValue.round(0)):null!==i[0].asFloat?e.number(Math.round(i[0].asFloat)):void 0},{name:"Sign",domain:["Function","Number","Integer"],range:[-1,1],complexity:1200,simplify:(e,i)=>{const t=i[0].sgn;return 0===t?e.ZERO:1===t?e.ONE:-1===t?e.NEGATIVE_ONE:void 0},evaluate:(e,i)=>{const t=i[0].sgn;return 0===t?e.ZERO:1===t?e.ONE:-1===t?e.NEGATIVE_ONE:void 0},N:(e,i)=>{const t=i[0].sgn;return 0===t?e.ZERO:1===t?e.ONE:-1===t?e.NEGATIVE_ONE:void 0}},{name:"SignGamma",description:"The sign of the gamma function: -1 or +1",domain:["Function","Number","Integer"],complexity:7900,range:[-1,1]},{name:"Sqrt",description:"Square Root",domain:["Function","Number","Number"],wikidata:"Q134237",complexity:3e3,canonical:(e,i)=>{var t;return i[0]?null!==(t=Qi(e,i[0],e.HALF))&&void 0!==t?t:e._fn("Power",[i[0],e.HALF]):e._fn("Power",[e.symbol("Missing"),e.HALF])},simplify:(e,i)=>nt(e,i[0],"simplify"),evaluate:(e,i)=>nt(e,i[0],"evaluate"),N:(e,i)=>nt(e,i[0],"N")},{name:"Square",domain:["Function","Number","Number"],wikidata:"Q3075175",complexity:3100,canonical:(e,i)=>{var t;return i[0]?null!==(t=Qi(e,i[0],e.TWO))&&void 0!==t?t:e._fn("Power",[i[0],e.TWO]):e._fn("Power",[e.symbol("Missing"),e.TWO])},N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.mul(i[0].decimalValue)):i[0].complexValue?e.number(i[0].complexValue.mul(i[0].complexValue)):null!==i[0].asFloat?e.number(i[0].asFloat*i[0].asFloat):void 0},{name:"Subscript",domain:["Function","Anything","Anything","Anything"],hold:"last",canonical:(e,i)=>{var t,n,r,s;const a=null!==(t=i[0])&&void 0!==t?t:e.symbol("Missing"),o=null!==(n=i[1])&&void 0!==n?n:e.symbol("Missing");if(a.string&&o.isLiteral&&null!==o.asSmallInteger){const i=o.asSmallInteger;if(i>1&&i<=36){const[t,n]=Be(a.string,i);return n?e._fn("Error",[e.number(t),e.string("unexpected-digits"),e._fn("LatexForm",[e.string(n)])]):e.number(t)}}if(a.symbol){if(null===(r=a.symbolDefinition)||void 0===r?void 0:r.at)return e._fn("At",[a,o]);let i=null!==(s=o.string)&&void 0!==s?s:o.symbol;if(i||null!==o.asSmallInteger&&(i=o.asSmallInteger.toString()),i)return e.symbol(a.symbol+"_"+i)}return e._fn("Subscript",i)}},{name:"Subtract",domain:["Function","Number","Number","Number"],wikidata:"Q40754",complexity:1350,canonical:(e,i)=>0===i.length?e.symbol("Nothing"):1===i.length?ji(i[0]):Wi(e,[i[0],ji(i[1])]),N:(e,i)=>{var t,n,r,s,a,o;const l=i[0],u=i[1];return l.complexValue||u.complexValue?e.number(e.complex(null!==(t=l.complexValue)&&void 0!==t?t:l.asFloat).sub(null!==(n=u.complexValue)&&void 0!==n?n:u.asFloat)):l.decimalValue||u.decimalValue?e.number(e.decimal(null!==(s=null!==(r=l.decimalValue)&&void 0!==r?r:l.asFloat)&&void 0!==s?s:NaN).sub(null!==(o=null!==(a=u.decimalValue)&&void 0!==a?a:u.asFloat)&&void 0!==o?o:NaN)):null!==l.asFloat&&null!==u.asFloat?e.number(l.asFloat-u.asFloat):void 0}}]},{symbols:[{name:"MachineEpsilon",domain:"RealNumber",constant:!0,real:!0,value:{num:Number.EPSILON.toString()}},{name:"Half",constant:!0,hold:!1,value:["Rational",1,2]},{name:"ImaginaryUnit",domain:"ImaginaryNumber",constant:!0,hold:!0,wikidata:"Q193796",imaginary:!0,value:["Complex",0,1]},{name:"ExponentialE",domain:"TranscendentalNumber",algebraic:!1,wikidata:"Q82435",constant:!0,hold:!0,real:!0,value:e=>oi(e)?e.DECIMAL_ONE.exp():Math.exp(1)},{name:"GoldenRatio",domain:"AlgebraicNumber",wikidata:"Q41690",constant:!0,algebraic:!0,hold:!1,value:["Divide",["Add",1,["Sqrt",5]],2]},{name:"CatalanConstant",domain:"RealNumber",algebraic:void 0,wikidata:"Q855282",constant:!0,value:{num:"0.91596559417721901505460351493238411077414937428167\n                  21342664981196217630197762547694793565129261151062\n                  48574422619196199579035898803325859059431594737481\n                  15840699533202877331946051903872747816408786590902\n                  47064841521630002287276409423882599577415088163974\n                  70252482011560707644883807873370489900864775113225\n                  99713434074854075532307685653357680958352602193823\n                  23950800720680355761048235733942319149829836189977\n                  06903640418086217941101917532743149978233976105512\n                  24779530324875371878665828082360570225594194818097\n                  53509711315712615804242723636439850017382875977976\n                  53068370092980873887495610893659771940968726844441\n                  66804621624339864838916280448281506273022742073884\n                  31172218272190472255870531908685735423498539498309\n                  91911596738846450861515249962423704374517773723517\n                  75440708538464401321748392999947572446199754961975\n                  87064007474870701490937678873045869979860644874974\n                  64387206238513712392736304998503539223928787979063\n                  36440323547845358519277777872709060830319943013323\n                  16712476158709792455479119092126201854803963934243\n                  "}},{name:"EulerGamma",domain:"RealNumber",algebraic:void 0,wikidata:"Q273023",constant:!0,value:{num:"0.57721566490153286060651209008240243104215933593992359880576723488486772677766\n          467093694706329174674951463144724980708248096050401448654283622417399764492353\n          625350033374293733773767394279259525824709491600873520394816567085323315177661\n          152862119950150798479374508570574002992135478614669402960432542151905877553526\n          733139925401296742051375413954911168510280798423487758720503843109399736137255\n          306088933126760017247953783675927135157722610273492913940798430103417771778088\n          154957066107501016191663340152278935867965497252036212879226555953669628176388\n          792726801324310104765059637039473949576389065729679296010090151251959509222435\n          014093498712282479497471956469763185066761290638110518241974448678363808617494\n          551698927923018773910729457815543160050021828440960537724342032854783670151773\n          943987003023703395183286900015581939880427074115422278197165230110735658339673"}}]},{functions:[{name:"PreIncrement",domain:["Function","Number","Number"]},{name:"PreDecrement",domain:["Function","Number","Number"]}]}];function tt(e,i,t){if("simplify"!==t||i.isLiteral){if(null!==i.machineValue)return e.number(Math.abs(i.machineValue));if(i.decimalValue)return e.number(i.decimalValue.abs());if(i.complexValue)return e.number(i.complexValue.abs());const[n,r]=i.rationalValue;if(null===n||null===r)return;return e.number("N"===t?Math.abs(n/r):[Math.abs(n),r])}if(!i.isMissing)return i.isNonNegative?i:i.isNegative?e.negate(i):void 0}function nt(e,i,t){if(i.isOne)return e.ONE;if(i.isZero)return e.ZERO;if("N"===t)return i.complexValue?e.number(i.complexValue.sqrt()):i.isNonNegative?i.decimalValue?e.number(i.decimalValue.sqrt()):null!==i.asFloat?e.number(Math.sqrt(i.asFloat)):void 0:li(e)?e.number(e.complex(i.asFloat).sqrt()):e.NAN;if(null!==i.asSmallInteger){const[t,n]=Re(i.asSmallInteger,2);if(1===n)return e.number(t);if(1!==t)return this._fn("Multiply",[t,e._fn("Sqrt",[e.box(n).canonical])])}}const rt=[{symbols:[{name:"Missing",domain:"Anything"},{name:"Nothing",domain:"Nothing"}]},{functions:[{name:"KeyValuePair",domain:["Function","String","Anything",["Tuple","String","Anything"]],description:"A key/value pair",complexity:8200,canonical:(e,i)=>e.tuple(i)},{name:"Single",domain:["Function","Anything",["Tuple","Anything"]],description:"A tuple with a single element",complexity:8200,canonical:(e,i)=>e.tuple(i)},{name:"Pair",domain:["Function","Anything","Anything",["Tuple","Anything","Anything"]],description:"A tuple of two elements",complexity:8200,canonical:(e,i)=>e.tuple(i)},{name:"Triple",domain:["Function","Anything","Anything","Anything",["Tuple","Anything","Anything","Anything"]],description:"A tuple of three elements",complexity:8200,canonical:(e,i)=>e.tuple(i)},{name:"Tuple",domain:["Function",["Some","Anything"],["Tuple",["Some","Anything"]]],description:"A fixed number of heterogeneous elements",complexity:8200}]},{functions:[{name:"BaseForm",domain:["Function","Anything",["Optional","Integer"],"String"],description:"`BaseForm(expr, base=10)`",complexity:9e3,inert:!0},{name:"Delimiter",domain:(e,i)=>{if(!i[0])return"Nothing";const t=i[0].domain.domainExpression;return["Function",t,["Optional","String"],t]},complexity:9e3,inert:!0,canonical:(e,i)=>!i[0]||i[0].isMissing?e.symbol("Nothing"):i[0]},{name:"Error",domain:(e,i)=>{if(!i[0])return"Nothing";const t=i[0].domain.domainExpression;return["Function",t,["Optional","String"],["Optional","Expression"],t]},complexity:500,inert:!0,hold:"all",evaluate:(e,i)=>i[0].evaluate()},{name:"Style",domain:(e,i)=>{if(!i[0])return"Nothing";const t=i[0].domain.domainExpression;return["Function",t,["Optional",["Head","Dictionary"]],t]},complexity:9e3,inert:!0}]},{functions:[{name:"Apply",domain:"Function"},{name:"About",domain:"Function"},{name:"Block",domain:"Function"},{name:"Domain",domain:"Function"},{name:"Evaluate",domain:"Function",hold:"all",evaluate:(e,i)=>i[0].evaluate()},{name:"FromDigits",description:"`FromDigits(s, base=10)`       return an integer representation of the string `s` in base `base`.",evaluate:(e,i)=>{const t=i[0];if(t.isMissing)return;if(!t.string)return e.error(e._fn("FromDigits",i),"Expected first argument as a string",["LatexForm",t.latex]);const n=i[1];if(n.isMissing&&e.number(Number.parseInt(t.string,10)),null===n.machineValue)return["Error",e._fn("FromDigits",i),{str:"Expected `base` as an integer between 2 and 36"},["LatexForm",n.latex]];const r=n.machineValue;if(r<2||r>36)return["Error",e._fn("FromDigits",i),{str:"Expected `base` as an integer between 2 and 36"},["LatexForm",n.latex]];const[s,a]=Be(t.string,r);return a?["Error",s,{str:"unexpected-digits"},["LatexForm",a]]:e.number(s)}},{name:"Head",domain:"Function",evaluate:(e,i)=>{const t=i[0];return"string"==typeof t.head?e.symbol(t.head):t.head}},{name:"Html",domain:["Function","Expression","String"],evaluate:(e,i)=>(i.length,e.string(""))},{name:"IntegerString",domain:["Function","Integer",["Optional","Integer"],"String"],description:"`IntegerString(n, base=10)`       return a string representation of the integer `n` in base `base`.",evaluate:(e,i)=>{var t,n,r,s;const a=i[0];if(a.isMissing)return;const o=null!==(r=null!==(t=a.machineValue)&&void 0!==t?t:null===(n=a.decimalValue)||void 0===n?void 0:n.toNumber())&&void 0!==r?r:NaN;if(Number.isNaN(o)||!Number.isInteger(o))return void e.signal(e._fn("IntegerString",i),`Expected first argument as an integer. Got \\(${a.latex}$\\)`);const l=i[1];if(l.isMissing)return a.machineValue?e.string(Math.abs(a.machineValue).toString()):a.decimalValue?e.string(a.decimalValue.abs().toString()):e.string(Math.abs(Math.round(null!==(s=a.asFloat)&&void 0!==s?s:NaN)).toString());if(null===l.asSmallInteger)return void e.signal(e._fn("IntegerString",i),`Expected \`base\` as an integer between 2 and 36. Got \\(${l.latex}$\\)`);const u=l.asSmallInteger;if(!(u<2||u>36))return e.string(Math.abs(o).toString(u));e.signal(e._fn("IntegerString",i),"Expected `base` as an integer between 2 and 36. Got "+u)}},{name:"Lambda",domain:"Function",wikidata:"Q567612",hold:"all"},{name:"Latex",domain:"Function",evaluate:(e,i)=>0===i.length?e._fn("LatexString",[]):e._fn("LatexString",[e.string(v(i.map((e=>e.latex))))])},{name:"LatexString",domain:"Function",evaluate:(e,i)=>0===i.length?e._fn("LatexString",[]):e._fn("LatexString",[e.string(v(i.map((i=>e.serialize(i)))))])},{name:"LatexTokens",domain:"Function",evaluate:(e,i)=>0===i.length?e._fn("LatexString",[]):e._fn("LatexString",[e.string(v(i.map((i=>e.serialize(i)))))])},{name:"Parse",domain:"Function",evaluate:(e,i)=>{if(0===i.length)return e.symbol("Nothing");const t=v(i.map((i=>e.serialize(i))));return e.parse(t)}},{name:"String",domain:["Function",["Some","Anything"],"String"],threadable:!0,evaluate:(e,i)=>0===i.length?e.string(""):e.string(i.map((e=>{var i;return null!==(i=e.string)&&void 0!==i?i:`\\(${e.latex}$\\)`})).join(""))},{name:"Symbol",complexity:500,description:"Construct a new symbol with a name formed by concatenating the arguments",domain:["Function",["Some","Anything"],"Symbol"],threadable:!0,evaluate:(e,i)=>{if(0===i.length)return e.symbol("Nothing");const t=i.map((e=>{const i=e.symbol;if(null!==i)return i;const n=t.string;if(null!==n)return n;const r=t.smallIntegerValue;return null!==r?r.toString():""})).join("");return t.length>0?e.symbol(t):e.symbol("Nothing")}},{name:"SymbolName",domain:["Function","Anything","String"],evaluate:(e,i)=>i[0].symbol?e.string(i[0].symbol):e.symbol("Nothing")},{name:"Tail",domain:["Function","Expression",["List","Expression]"]],evaluate:(e,i)=>{var t;return e._fn("List",null!==(t=i[0].ops)&&void 0!==t?t:[])}},{name:"Timing",description:"`Timing(expr)` evaluates `expr` and return a `Pair` of the number of second elapsed for the evaluation, and the value of the evaluation",domain:["Function","Expression",["Tuple","Expression","Number"]],evaluate:(e,i)=>{var t;if(!i[1]||i[1].isMissing){const t=globalThis.performance.now(),n=i[0].evaluate(),r=1e3*(globalThis.performance.now()-t);return e.pair(e.number(r),n)}let n,r=Math.max(3,Math.round(null!==(t=i[1].asSmallInteger)&&void 0!==t?t:3)),s=[];for(;r>0;){const e=globalThis.performance.now();n=i[0].evaluate(),s.push(1e3*(globalThis.performance.now()-e)),r-=1}const a=Math.max(...s),o=Math.min(...s);s=s.filter((e=>e>o&&e<a));const l=s.reduce(((e,i)=>e+i),0);return 0===l?e.pair(e.number(a),n):e.pair(e.number(l/s.length),n)}}]}],st={symbols:[{name:"True",wikidata:"Q16751793",domain:"Boolean",constant:!0},{name:"False",wikidata:"Q5432619",domain:"Boolean",constant:!0},{name:"Maybe",wikidata:"Q781546",domain:"MaybeBoolean",constant:!0}],functions:[{name:"And",wikidata:"Q191081",domain:"LogicOperator",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,simplify:at,evaluate:at},{name:"Or",wikidata:"Q1651704",domain:"LogicOperator",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,simplify:ot,evaluate:ot},{name:"Not",wikidata:"Q190558",domain:"LogicOperator",involution:!0,complexity:10100,simplify:lt,evaluate:lt},{name:"Equivalent",wikidata:"Q220433",domain:"LogicOperator",complexity:10200,simplify:ut,evaluate:ut},{name:"Implies",wikidata:"Q7881229",domain:"LogicOperator",complexity:10200,simplify:ct,evaluate:ct},{name:"Exists",domain:"MaybeBoolean"}]};function at(e,i){if(0===i.length)return e.symbol("True");const t=[];for(const n of i){if("False"===n.symbol)return e.symbol("False");if("True"!==n.symbol){let i=!1;for(const r of t)if(r.isSame(n))i=!0;else if("Not"===n.head&&n.op1.isSame(r)||"Not"===r.head&&r.op1.isSame(n))return e.symbol("False");i||t.push(n)}}return 0===t.length?e.symbol("True"):1===t.length?t[0]:e._fn("And",t)}function ot(e,i){if(0===i.length)return e.symbol("True");const t=[];for(const n of i){if("True"===n.symbol)return e.symbol("True");if("False"!==n.symbol){let i=!1;for(const r of t)if(r.isSame(n))i=!0;else if("Not"===n.head&&n.op1.isSame(r)||"Not"===r.head&&r.op1.isSame(n))return e.symbol("True");i||t.push(n)}}return 0===t.length?e.symbol("True"):1===t.length?t[0]:e._fn("Or",t)}function lt(e,i){const t=i[0].symbol;return"True"===t?e.symbol("False"):"False"===t?e.symbol("True"):"Maybe"===t?e.symbol("Maybe"):void 0}function ut(e,i){const t=i[0].symbol,n=i[1].symbol;return"True"===t&&"True"===n||"False"===t&&"False"===n?e.symbol("True"):"True"===t&&"False"===n||"False"===t&&"True"===n?e.symbol("False"):"Maybe"===t||"Maybe"===n?e.symbol("Maybe"):void 0}function ct(e,i){const t=i[0].symbol,n=i[1].symbol;return"True"===t&&"True"===n||"False"===t&&"False"===n||"False"===t&&"True"===n?e.symbol("True"):"True"===t&&"False"===n?e.symbol("False"):"Maybe"===t||"Maybe"===n?e.symbol("Maybe"):void 0}const ht=[{symbols:[{name:"Degrees",domain:"RealNumber",constant:!0,value:["Divide","Pi",180]},{name:"Pi",domain:"TranscendentalNumber",algebraic:!1,constant:!0,hold:!0,wikidata:"Q167",value:e=>oi(e)?e.DECIMAL_PI:Math.PI}],functions:[{name:"Hypot",evaluate:["Sqrt",["Square","_1"],["Square","_2"]],domain:["Function","Number","Number","Number"]},{name:"Sin",domain:["Function","Number","Number"],complexity:5e3,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Sin",i[0]))&&void 0!==t?t:li(e)?e.box(["Divide",["Subtract",["Exp",["Multiply","ImaginaryUnit",i[0]]],["Exp",["Multiply","ImaginaryUnit",["Negate",i[0]]]]],["Complex",0,2]]).canonical:void 0},evaluate:(e,i)=>{var t;return null!==(t=bt(e,"Sin",i[0]))&&void 0!==t?t:li(e)?e.box(["Divide",["Subtract",["Exp",["Multiply","ImaginaryUnit",i[0]]],["Exp",["Multiply","ImaginaryUnit",["Negate",i[0]]]]],["Complex",0,2]]).canonical:void 0},N:(e,i)=>i[0].decimalValue?e.number(e.chop(i[0].decimalValue.sin())):i[0].complexValue?e.number(i[0].complexValue.sin()):null!==i[0].asFloat?e.number(Math.sin(i[0].asFloat)):void 0}]},{functions:[{name:"Arctan",wikidata:"Q2257242",domain:["Function","Number","ExtendedRealNumber"],complexity:5200,simplify:(e,i)=>bt(e,"Arctan",i[0]),N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.atan()):i[0].complexValue?e.number(i[0].complexValue.atan()):null!==i[0].asFloat?e.number(Math.atan(i[0].asFloat)):void 0},{name:"Arctan2",wikidata:"Q776598",domain:["Function","Number","Number","Number"],complexity:5200,N:(e,i)=>i[0].decimalValue&&i[1].decimalValue?e.number(l.exports.Decimal.atan2(i[0].decimalValue,i[1].decimalValue)):null!==i[0].asFloat&&null!==i[1].asFloat?e.number(Math.atan2(i[0].asFloat,i[1].asFloat)):void 0},{name:"Cos",domain:["Function","Number","Number"],complexity:5050,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Cos",i[0]))&&void 0!==t?t:e.box(["Sin",["Add",i[0],["Multiply","Half","Pi"]]]).canonical},evaluate:["Sin",["Add","_1",["Multiply","Half","Pi"]]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.cos()):i[0].complexValue?e.number(i[0].complexValue.cos()):null!==i[0].asFloat?e.number(Math.cos(i[0].asFloat)):void 0},{name:"Tan",domain:["Function","Number","Number"],complexity:5100,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Tan",i[0]))&&void 0!==t?t:e.box(["Divide",["Sin",i[0]],["Cos",i[0]]]).canonical},evaluate:["Divide",["Sin","_1"],["Cos","_1"]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.tan()):i[0].complexValue?e.number(i[0].complexValue.tan()):null!==i[0].asFloat?e.number(Math.tan(i[0].asFloat)):void 0}]},{functions:[{name:"Arcosh",domain:["Function","Number","Number"],complexity:6200,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Arcoshh",i[0]))&&void 0!==t?t:e.box(["Ln",["Add",i[0],["Sqrt",["Subtract",["Square",i[0]],1]]]]).canonical},evaluate:["Ln",["Add","_1",["Sqrt",["Subtract",["Square","_1"],1]]]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.acosh()):i[0].complexValue?e.number(i[0].complexValue.acosh()):null!==i[0].asFloat?e.number(Math.acosh(i[0].asFloat)):void 0},{name:"Arcsin",domain:["Function","Number","Number"],complexity:5500,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Arcsin",i[0]))&&void 0!==t?t:e.box(["Multiply",2,["Arctan2",i[0],["Add",1,["Sqrt",["Subtract",1,["Square",i[0]]]]]]]).canonical},evaluate:["Multiply",2,["Arctan2","_1",["Add",1,["Sqrt",["Subtract",1,["Square","_1"]]]]]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.asin()):i[0].complexValue?e.number(i[0].complexValue.asin()):null!==i[0].asFloat?e.number(Math.asin(i[0].asFloat)):void 0},{name:"Arsinh",domain:["Function","Number","Number"],complexity:6100,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Arsinh",i[0]))&&void 0!==t?t:e.box(["Ln",["Add",i[0],["Sqrt",["Add",["Square",i[0]],1]]]]).canonical},evaluate:["Ln",["Add","_1",["Sqrt",["Add",["Square","_1"],1]]]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.asinh()):i[0].complexValue?e.number(i[0].complexValue.asinh()):null!==i[0].asFloat?e.number(Math.asinh(i[0].asFloat)):void 0},{name:"Artanh",domain:["Function","Number","Number"],complexity:6300,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Artanh",i[0]))&&void 0!==t?t:e.box(["Multiply","Half",["Ln",["Divide",["Add",1,i[0]],["Subtract",1,i[0]]]]]).canonical},evaluate:["Multiply","Half",["Ln",["Divide",["Add",1,"_1"],["Subtract",1,"_1"]]]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.atanh()):i[0].complexValue?e.number(i[0].complexValue.atanh()):null!==i[0].asFloat?e.number(Math.atanh(i[0].asFloat)):void 0},{name:"Cosh",domain:["Function","Number","Number"],complexity:6050,simplify:(e,i)=>bt(e,"Cosh",i[0]),evaluate:["Multiply","Half",["Add",["Exp","_1"],["Exp",["Negate","_1"]]]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.cosh()):i[0].complexValue?e.number(i[0].complexValue.cosh()):null!==i[0].asFloat?e.number(Math.cosh(i[0].asFloat)):void 0},{name:"Cot",domain:["Function","Number","Number"],complexity:5600,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Cot",i[0]))&&void 0!==t?t:e.box(["Divide",["Cos",i[0]],["Sin",i[0]]]).canonical},evaluate:["Divide",["Cos","_1"],["Sin","_1"]],N:(e,i)=>i[0].decimalValue?e.number(e.DECIMAL_ONE.div(i[0].decimalValue.tan())):i[0].complexValue?e.number(i[0].complexValue.tan().inverse()):null!==i[0].asFloat?e.number(1/Math.tan(i[0].asFloat)):void 0},{name:"Csc",description:"Cosecant",domain:["Function","Number","Number"],complexity:5600,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Csc",i[0]))&&void 0!==t?t:e.box(["Divide",1,["Sin",i[0]]]).canonical},evaluate:["Divide",1,["Sin","_1"]],N:(e,i)=>i[0].decimalValue?e.number(e.DECIMAL_ONE.div(i[0].decimalValue.sin())):i[0].complexValue?e.number(i[0].complexValue.sin().inverse()):null!==i[0].asFloat?e.number(1/Math.sin(i[0].asFloat)):void 0},{name:"Haversine",wikidata:"Q2528380",domain:["Function","ExtendedRealNumber","RealNumber"],evaluate:["Divide",["Subtract",1,["Cos","_1"]],2]},{name:"InverseHaversine",domain:["Function","ExtendedRealNumber","RealNumber"],evaluate:["Multiply",2,["Arcsin",["Sqrt","_1"]]]},{name:"Sec",description:"Secant, inverse of cosine",domain:["Function","Number","Number"],complexity:5500,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Sec",i[0]))&&void 0!==t?t:e.box(["Divide",1,["Cos",i[0]]]).canonical},evaluate:["Divide",1,["Cos","_1"]],N:(e,i)=>i[0].decimalValue?e.number(e.DECIMAL_ONE.div(i[0].decimalValue.cos())):i[0].complexValue?e.number(i[0].complexValue.cos().inverse()):null!==i[0].asFloat?e.number(1/Math.cos(i[0].asFloat)):void 0},{name:"Sinh",domain:["Function","Number","Number"],complexity:6e3,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Sinh",i[0]))&&void 0!==t?t:e.box(["Multiply","Half",["Subtract",["Exp",i[0]],["Exp",["Negate",i[0]]]]]).canonical},evaluate:["Multiply","Half",["Subtract",["Exp","_1"],["Exp",["Negate","_1"]]]]}]},{functions:[{name:"Csch",domain:["Function","Number","ExtendedRealNumber"],complexity:6200,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Csch",i[0]))&&void 0!==t?t:e.box(["Divide",1,["Sinh",i[0]]]).canonical},evaluate:["Divide",1,["Sinh","_1"]],N:(e,i)=>i[0].decimalValue?e.number(e.DECIMAL_ONE.div(i[0].decimalValue.sinh())):i[0].complexValue?e.number(i[0].complexValue.sinh().inverse()):null!==i[0].asFloat?e.number(1/Math.sinh(i[0].asFloat)):void 0},{name:"Sech",domain:["Function","Number","Number"],complexity:6200,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Sech",i[0]))&&void 0!==t?t:e.box(["Divide",1,["Cosh",i[0]]]).canonical},evaluate:["Divide",1,["Cosh","_1"]],N:(e,i)=>i[0].decimalValue?e.number(e.DECIMAL_ONE.div(i[0].decimalValue.cosh())):i[0].complexValue?e.number(i[0].complexValue.cosh().inverse()):null!==i[0].asFloat?e.number(1/Math.cosh(i[0].asFloat)):void 0},{name:"Tanh",domain:["Function","Number","Number"],complexity:6200,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Tanh",i[0]))&&void 0!==t?t:e.box(["Divide",["Sinh",i[0]],["Cosh",i[0]]]).canonical},evaluate:["Divide",["Sinh","_1"],["Cosh","_1"]],N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.tanh()):i[0].complexValue?e.number(i[0].complexValue.tanh()):null!==i[0].asFloat?e.number(Math.tanh(i[0].asFloat)):void 0}]},{functions:[{name:"Arccos",domain:["Function","Number","ExtendedRealNumber"],complexity:5550,evaluate:["Subtract",["Divide","Pi",2],["Arcsin","_1"]],simplify:(e,i)=>{var t;return null!==(t=bt(e,"Arccos",i[0]))&&void 0!==t?t:e.box(["Subtract",["Divide","Pi",2],["Arcsin",i[0]]]).canonical},N:(e,i)=>i[0].decimalValue?e.number(i[0].decimalValue.acos()):i[0].complexValue?e.number(i[0].complexValue.acos()):null!==i[0].asFloat?e.number(Math.acos(i[0].asFloat)):void 0},{name:"Coth",domain:["Function","Number","Number"],complexity:6300,simplify:(e,i)=>{var t;return null!==(t=bt(e,"Coth",i[0]))&&void 0!==t?t:e.box(["Divide",1,["Tanh",i[0]]]).canonical},evaluate:["Divide",1,["Tanh","_1"]],N:(e,i)=>i[0].decimalValue?e.number(e.DECIMAL_ONE.div(i[0].decimalValue.tanh())):i[0].complexValue?e.number(i[0].complexValue.tanh().inverse()):null!==i[0].asFloat?e.number(1/Math.tanh(i[0].asFloat)):void 0},{name:"InverseFunction",domain:"Function",simplify:(e,i)=>yt(e,i[0]),evaluate:(e,i)=>yt(e,i[0])}]}],mt=["Sqrt",2],dt=["Sqrt",3],ft=["Sqrt",5],gt=["Sqrt",6],pt=[[[0,1],{Sin:0,Cos:1,Tan:0,Cot:NaN,Sec:1,Csc:NaN}],[[1,12],{Sin:["Divide",["Subtract",gt,mt],4],Cos:["Divide",["Add",gt,mt],4],Tan:["Subtract",2,dt],Cot:["Add",2,dt],Sec:["Subtract",gt,mt],Csc:["Add",gt,mt]}],[[1,10],{Sin:["Divide",["Subtract",ft,1],4],Cos:["Divide",["Sqrt",["Add",10,["Multiply",2,ft]]],4],Tan:["Divide",["Sqrt",["Subtract",25,["Multiply",10,ft]]],4],Cot:["Sqrt",["Add",5,["Multiply",2,ft]]],Sec:["Divide",["Sqrt",["Subtract",50,["Multiply",10,ft]]],5],Csc:["Add",1,ft]}],[[1,8],{Sin:"$\\frac\\sqrt{2-\\sqrt2}{2}$",Cos:"$\\frac {\\sqrt {2+{\\sqrt {2}}}}{2}$",Tan:"$\\sqrt{2} - 1$",Cot:"$\\sqrt{2} + 1$",Sec:"$\\sqrt{ 4 - 2\\sqrt{2}$",Csc:"$\\sqrt{ 4 + 2\\sqrt{2}$"}],[[1,6],{Sin:"$\\frac{1}{2}$",Cos:"$\\frac{\\sqrt{3}}{2}$",Tan:"$\\frac{\\sqrt{3}}{3}$",Cot:"$\\frac{2\\sqrt{3}}{3}$",Sec:"$\\sqrt{3}$",Csc:2}],[[1,5],{Sin:"$\\frac{\\sqrt{10- 2\\sqrt{5}}} {4}$",Cos:"$\\frac{1+ \\sqrt{5}} {4}$",Tan:"$\\sqrt{5-2\\sqrt5}$",Cot:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Sec:"$\\sqrt{5} - 1$",Csc:"$\\frac{\\sqrt{50+10\\sqrt{5}}} {5}$"}],[[1,4],{Sin:["Divide",mt,2],Cos:["Divide",mt,2],Tan:1,Cot:1,Sec:mt,Csc:mt}],[[3,10],{Sin:"$\\frac{1+ \\sqrt{5}} {4}$",Cos:"$\\frac{\\sqrt{10- 2\\sqrt{5}}} {4}$",Tan:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Cot:"$\\sqrt{5-2\\sqrt5}$",Sec:"$$",Csc:"$\\frac{\\sqrt{50+10\\sqrt{5}}} {5}$"}],[[1,3],{Sin:["Divide",dt,2],Cos:"Half",Tan:dt,Cot:["Divide",dt,3],Sec:2,Csc:["Divide",["Multiply",2,dt],3]}],[[3,8],{Sin:"$\\frac{ \\sqrt{2 + \\sqrt{2}} } {2}$",Cos:"$\\frac{ \\sqrt{2 - \\sqrt{2}} } {2}$",Tan:"$\\sqrt{2} + 1$",Cot:"$\\sqrt{2} - 1$",Sec:"$\\sqrt{ 4 + 2 \\sqrt{2} }$",Csc:"$\\sqrt{ 4 - 2 \\sqrt{2} }$"}],[[2,5],{Sin:"$\\frac{\\sqrt{10+ 2\\sqrt{5}}} {4}$",Cos:"$\\frac{\\sqrt{5}-1} {4}$",Tan:"$\\sqrt{5+2\\sqrt{5}}$",Cot:"$\\frac{\\sqrt{25-10\\sqrt{5}}} {5}$",Sec:"$1 + \\sqrt{5}$",Csc:"$\\frac{\\sqrt{50-10\\sqrt{5}}} {5}$"}],[[5,12],{Sin:"$\\frac{\\sqrt{6} + \\sqrt{2}} {4}$",Cos:"$\\frac{ \\sqrt{6} - \\sqrt{2}} {4}$",Tan:"$2+\\sqrt{3}$",Cot:"$2-\\sqrt{3}$",Sec:"$\\sqrt{6}+\\sqrt{2}$",Csc:"$\\sqrt{6} - \\sqrt{2}$"}],[[1,2],{Sin:1,Cos:0,Tan:NaN,Cot:0,Sec:NaN,Csc:1}]],vt={Sin:[[1,"Sin"],[1,"Cos"],[-1,"Sin"],[-1,"Cos"]],Cos:[[1,"Cos"],[-1,"Sin"],[-1,"Cos"],[1,"Sin"]],Sec:[[1,"Sec"],[-1,"Csc"],[-1,"Sec"],[1,"Csc"]],Csc:[[1,"Csc"],[1,"Sec"],[-1,"Csc"],[-1,"Sec"]],Tan:[[1,"Tan"],[-1,"Cot"],[1,"Tan"],[-1,"Cot"]],Cot:[[1,"Cot"],[-1,"Tan"],[1,"Cot"],[-1,"Tan"]]};function bt(e,i,t){var n;if(!t||t.isMissing)return;const r=e.cache("constructible-trigonometric-values",(()=>{var i;const t=[];for(const[n,r]of pt){const s={};for(const t of Object.keys(r))s[t]=(null!==(i=e.parse(ri(r[t])))&&void 0!==i?i:e.box(r[t])).canonical;t.push([n,s])}return t}),(e=>{for(const[i,t]of e)for(const e of Object.values(t))e._purge();return e}));if(!(t=null!==(n=t.numericValue)&&void 0!==n?n:t).isLiteral)return;let s=t.asFloat;if(null===s)return;s%=2*Math.PI;const a="Cos"!==i&&"Sec"!==i?Math.sign(s):1;s=Math.abs(s);const o=Math.floor(2*s/Math.PI);let l;s%=Math.PI/2,[l,i]=vt[i][o],l*=a;for(const[[t,n],a]of r)if(0===e.chop(s-Math.PI*t/n))return l<0?ji(a[i]):a[i]}function yt(e,i){const t=i.op1.head;if("string"!=typeof t)return i;const n={Sin:"Arcsin",Cos:"Arccos",Tan:"Arctan",Sec:"Arcsec",Csc:" Arccsc",Sinh:"Arsinh",Cosh:"Arcosh",Tanh:"Artanh",Sech:"Arcsech",Csch:"Arcsch",Arcosh:"Cosh",Arcos:"Cos",Arccsc:"Csc",Arcsch:"Csch",Arcsec:"Sec",Arcsin:"Sin",Arsinh:"Sinh",Arctan:"Tan",Artanh:"Tanh"}[t];return n?e._fn(n,[i.op1.op1]):i}function Nt(e){return Object.fromEntries(Object.entries(e).filter((([e,i])=>void 0!==i)))}function xt(e){const i=Object.assign({},e);return e.zero||e.one||e.negativeOne?(i.number=!0,i.integer=!0,i.rational=!0,i.algebraic=!0,i.real=!0,i.extendedReal=!0,i.complex=!0,i.extendedComplex=!0,i.imaginary=!1,i.positive=!1,i.nonPositive=!0,i.negative=!1,i.nonNegative=!0,i.zero=e.zero,i.notZero=!e.zero,i.one=e.one,i.negativeOne=e.negativeOne,i.negativeOne=!1,i.infinity=!1,i.NaN=!1,i.finite=!0,i.even=e.one,i.odd=!e.one,i.prime=!1,i.composite=!1,i):(!0===i.notZero&&(i.imaginary||(i.real=!0),i.zero=!1),(i.positive||i.nonNegative)&&(i.negativeOne=!1),i.positive?(i.nonPositive=!1,i.negative=!1,i.nonNegative=!0):i.nonPositive?(i.positive=!1,i.negative=i.notZero,i.nonNegative=!i.zero):i.negative?(i.positive=!1,i.nonPositive=i.notZero,i.nonNegative=!1):i.nonNegative&&(i.positive=i.notZero,i.nonPositive=!i.zero,i.negative=!1),(i.positive||i.negative||i.nonPositive||i.nonNegative)&&(i.number=!0,i.finite?i.real=!0:i.finite||(i.complex=!0),i.imaginary=!1),i.infinity&&(i.finite=!1,i.NaN=!1),i.finite&&(i.number=!0,i.complex=!0,i.infinity=!1,i.NaN=!1),e.even&&(i.odd=!1),e.odd&&(i.even=!1),i.integer&&(i.rational=!0),i.rational&&(i.algebraic=!0),i.algebraic&&(i.real=!0),i.extendedReal&&(i.real=!0),i.real&&(i.complex=!0),i.imaginary&&(i.complex=!0),i.extendedComplex&&(i.complex=!0),i.complex&&(i.number=!0),i.real&&i.infinity&&(i.extendedReal=!0),i.complex&&i.infinity&&(i.extendedComplex=!0),(i.even||i.infinity||i.NaN||i.negative||i.imaginary||!1===i.integer)&&(i.prime=!1),i.number&&i.prime&&(i.composite=!1),i)}function _t(e){if(!e)return{};const i=e.domainExpression,t={};return e.isSubdomainOf("Number")?(t.number=!0,"Integer"===i&&(t.integer=!0),"RationalNumber"===i&&(t.rational=!0),"AlgebraicNumber"===i&&(t.algebraic=!0),"TranscendentalNumber"===i&&(t.algebraic=!1,t.real=!0),"ExtendedRealNumber"===i&&(t.extendedReal=!0),"RealNumber"===i&&(t.real=!0),"ImaginaryNumber"===i&&(t.imaginary=!0),"ExtendedComplexNumber"===i&&(t.extendedComplex=!0),"ComplexNumber"===i&&(t.complex=!0)):(t.number=!1,t.integer=!1,t.rational=!1,t.algebraic=!1,t.real=!1,t.extendedReal=!1,t.complex=!1,t.extendedComplex=!1,t.imaginary=!1,t.positive=!1,t.nonPositive=!1,t.negative=!1,t.nonNegative=!1,t.zero=!1,t.notZero=!1,t.one=!1,t.negativeOne=!1,t.infinity=!1,t.NaN=!1,t.odd=!1,t.even=!1,t.prime=!1,t.composite=!1),Nt(xt(t))}function St(e){return Nt({number:(e=e.canonical).isNumber,integer:e.isInteger,rational:e.isRational,algebraic:e.isAlgebraic,real:e.isReal,extendedReal:e.isExtendedReal,complex:e.isComplex,extendedComplex:e.isExtendedComplex,imaginary:e.isImaginary,positive:e.isPositive,nonPositive:e.isNonPositive,negative:e.isNegative,nonNegative:e.isNonNegative,zero:e.isZero,notZero:e.isNotZero,one:e.isOne,negativeOne:e.isNegativeOne,infinity:e.isInfinity,NaN:e.isNaN,finite:e.isFinite,even:e.isEven,odd:e.isOdd,prime:e.isPrime,composite:e.isComposite})}class wt{constructor(e,i){var t,n;this._engine=e,this._def=i,this.scope=e.context,this.name=i.name,this.constant=null!==(t=i.constant)&&void 0!==t&&t,this.hold=null===(n=i.hold)||void 0===n||n,this._purge()}_purge(){var e,i,t,n;this._value=null===(e=this._value)||void 0===e?void 0:e._purge();const r=this._def,s=this._engine,a=Nt({description:r.description,wikidata:r.wikidata,number:r.number,integer:r.integer,rational:r.rational,algebraic:r.algebraic,real:r.real,extendedReal:r.extendedReal,complex:r.complex,zero:r.zero,notZero:r.notZero,one:r.one,negativeOne:r.negativeOne,infinity:r.infinity,NaN:r.NaN,finite:r.finite,even:r.even,odd:r.odd,prime:r.prime,composite:r.composite});if("value"in r&&"number"==typeof r.value){const e=s.number(r.value);let i;const t=r.domain?s.domain(r.domain):void 0;return i=t&&e.valueDomain.isSubdomainOf(t)?t:e.valueDomain,this._value=e,this._domain=i,this.setProps(St(e)),this.setProps(_t(i)),void this.setProps(a)}let o,l;if(ni(r.value)?o=s.parse(r.value):"function"==typeof r.value?o=s.box(null!==(i=r.value(s))&&void 0!==i?i:"Undefined"):r.value&&(o=s.box(r.value)),!o&&!1===r.hold)throw Error(`Symbol definition "${r.name}": Expected a value "hold=false" `);o=null==o?void 0:o.canonical;const u=r.domain?s.domain(r.domain):void 0;if(l=!u||o&&!o.valueDomain.isSubdomainOf(u)?null!==(n=null!==(t=null==o?void 0:o.valueDomain)&&void 0!==t?t:s.defaultDomain)&&void 0!==n?n:s.domain("Anything"):u,!o)return this._value=void 0,this._domain=l,this.setProps(_t(l)),void this.setProps(a);this._value=o,this._domain=l,this.setProps(St(o)),this.setProps(_t(l)),this.setProps(a)}get value(){return this._value}set value(e){if(this.constant)throw Error(`The value of the constant "${this.name}" cannot be changed`);"number"==typeof e&&(e=this._engine.box(e)),this._value=e,e&&this.setProps(St(e))}get domain(){return this._domain}set domain(e){var i;if(!e)return void(this._domain=void 0);e=this._engine.domain(e);const t=null===(i=this.value)||void 0===i?void 0:i.valueDomain;t&&!t.isSubdomainOf(e)&&(e=t),this._domain=e,this.setProps(_t(e))}updateFlags(e){this.setProps(xt(e))}setProps(e){e.wikidata&&(this.wikidata=e.wikidata),e.description&&(this.description=e.description),void 0!==e.number&&(this._number=e.number),void 0!==e.integer&&(this._integer=e.integer),void 0!==e.rational&&(this._rational=e.rational),void 0!==e.algebraic&&(this._algebraic=e.algebraic),void 0!==e.real&&(this._real=e.real),void 0!==e.extendedReal&&(this._extendedReal=e.extendedReal),void 0!==e.complex&&(this._complex=e.complex),void 0!==e.extendedComplex&&(this._extendedComplex=e.extendedComplex),void 0!==e.imaginary&&(this._imaginary=e.imaginary),void 0!==e.positive&&(this._positive=e.positive),void 0!==e.nonPositive&&(this._nonPositive=e.nonPositive),void 0!==e.negative&&(this._negative=e.negative),void 0!==e.nonNegative&&(this._nonNegative=e.nonNegative),void 0!==e.zero&&(this._zero=e.zero),void 0!==e.notZero&&(this._notZero=e.notZero),void 0!==e.one&&(this._one=e.one),void 0!==e.negativeOne&&(this._negativeOne=e.negativeOne),void 0!==e.infinity&&(this._infinity=e.infinity),void 0!==e.finite&&(this._finite=e.finite),void 0!==e.NaN&&(this._NaN=e.NaN),void 0!==e.even&&(this._even=e.even),void 0!==e.odd&&(this._odd=e.odd),void 0!==e.prime&&(this._prime=e.prime),void 0!==e.composite&&(this._composite=e.composite)}get number(){return this._number}set number(e){this.updateFlags({number:e})}get integer(){return this._integer}set integer(e){this.updateFlags({integer:e})}get rational(){return this._rational}set rational(e){this.updateFlags({rational:e})}get algebraic(){return this._algebraic}set algebraic(e){this.updateFlags({algebraic:e})}get real(){return this._real}set real(e){this.updateFlags({real:e})}get extendedReal(){return this._extendedReal}set extendedReal(e){this.updateFlags({extendedReal:e})}get complex(){return this._complex}set complex(e){this.updateFlags({complex:e})}get extendedComplex(){return this._extendedComplex}set extendedComplex(e){this.updateFlags({extendedComplex:e})}get imaginary(){return this._imaginary}set imaginary(e){this.updateFlags({imaginary:e})}get positive(){return this._positive}set positive(e){this.updateFlags({positive:e})}get nonPositive(){return this._nonPositive}set nonPositive(e){this.updateFlags({nonPositive:e})}get negative(){return this._negative}set negative(e){this.updateFlags({negative:e})}get nonNegative(){return this._nonNegative}set nonNegative(e){this.updateFlags({nonNegative:e})}get zero(){return this._zero}set zero(e){this.updateFlags({zero:e})}get notZero(){return this._notZero}set notZero(e){this.updateFlags({notZero:e})}get one(){return this._one}set one(e){this.updateFlags({one:e})}get negativeOne(){return this._negativeOne}set negativeOne(e){this.updateFlags({negativeOne:e})}get infinity(){return this._infinity}set infinity(e){this.updateFlags({infinity:e})}get finite(){return this._finite}set finite(e){this.updateFlags({finite:e})}get NaN(){return this._NaN}set NaN(e){this.updateFlags({NaN:e})}get even(){return this._even}set even(e){this.updateFlags({even:e})}get odd(){return this._odd}set odd(e){this.updateFlags({odd:e})}get prime(){var e;if(void 0===this._prime&&(null===(e=this._value)||void 0===e?void 0:e.isNumber))if(!this._value.isInteger||this._value.isNonPositive)this._prime=!1,this._composite=!1;else{const e=this._value.asFloat;null!==e?(this._prime=Pi(e),this._composite=!this._prime):(this._prime=void 0,this._composite=void 0)}return this._prime}set prime(e){this.updateFlags({prime:e})}get composite(){if(void 0===this._composite){const e=this.prime;this._composite=void 0===e?void 0:!e}return this._composite}set composite(e){this.updateFlags({composite:e})}}class Et{constructor(e,i){var t,n,r,s,a,o,l,u,c,h;const m=i.domain?"function"==typeof i.domain?i.domain:e.domain(i.domain):e.domain("Function"),d=null!==(t=i.hold)&&void 0!==t?t:"none",f=null!==(n=i.idempotent)&&void 0!==n&&n,g=null!==(r=i.involution)&&void 0!==r&&r;if(f&&g)throw Error(`Function Definition "${i.name}": the 'idempotent' and 'involution' flags are mutually exclusive in function `);this.name=i.name,this.description=i.description,this.wikidata=i.wikidata,this.scope=e.context,this.threadable=null!==(s=i.threadable)&&void 0!==s&&s,this.associative=null!==(a=i.associative)&&void 0!==a&&a,this.commutative=null!==(o=i.commutative)&&void 0!==o&&o,this.idempotent=f,this.involution=g,this.inert=null!==(l=i.inert)&&void 0!==l&&l,this.pure=null===(u=i.pure)||void 0===u||u,this.complexity=null!==(c=i.complexity)&&void 0!==c?c:ci,this.hold=d,this.sequenceHold=null!==(h=i.sequenceHold)&&void 0!==h&&h,this.range=i.range,this.domain=m,this.canonical=i.canonical,this.simplify=i.simplify,this.evaluate=i.evaluate?"function"==typeof i.evaluate?i.evaluate:e.box(i.evaluate).canonical:void 0,this.N=i.N,this.evalDimension=i.evalDimension,this.sgn=i.sgn,this.compile=i.compile}_purge(){}}function It(e,i){return new Et(e,i)}function kt(e,i){const t=e.engine;return"Negate"===e.head&&"Negate"===i.head?kt(e.op1,i.op1):"Negate"===e.head?ji(kt(e.op1,i)):"Negate"===i.head?ji(kt(e,i.op1)):"Add"===e.head?t.add(e.ops.map((e=>kt(e,i)))):"Add"===i.head?t.add(i.ops.map((i=>kt(e,i)))):t.mul([e,i])}function At(e,i){if(1===i)return e;const t=kt(e,e);return 2===i?t:i%2==0?At(t,i/2):kt(At(t,Math.round(i/2)-1),e)}function Mt(e="all"){if("all"===e)return Mt(["domains","core","collections","algebra","arithmetic","calculus","combinatorics","dimensions","linear-algebra","logic","numeric","other","physics","polynomials","relop","statistics","trigonometry","units"]);const i=[];for(const t of e){const e=Ot[t];e&&Array.isArray(e)?i.push(...e):e&&i.push(e)}return i}const Ot={arithmetic:it,core:rt,collections:[{symbols:[{name:"EmptySet",domain:"Set",constant:!0,wikidata:"Q226183"}],functions:[{name:"Element",domain:"Predicate",complexity:11200},{name:"NotElement",domain:"Predicate",complexity:11200,canonical:(e,i)=>e.fn("Not",[e.fn("Element",i)])},{name:"Subset",domain:"Predicate",complexity:11200},{name:"NotSubset",domain:"Predicate",complexity:11200,canonical:(e,i)=>e.fn("Not",[e.fn("Subset",i)])},{name:"Superset",domain:"Predicate",complexity:11200},{name:"SupersetEqual",domain:"Predicate",complexity:11200},{name:"NotSuperset",domain:"Predicate",complexity:11200,canonical:(e,i)=>e.fn("Not",[e.fn("Superset",i)])},{name:"NotSupersetEqual",domain:"Predicate",complexity:11200,canonical:(e,i)=>e.fn("Not",[e.fn("SupersetEqual",i)])},{name:"SubsetEqual",domain:"Predicate",complexity:11200},{name:"NotSubsetNotEqual",domain:"Predicate",complexity:11200,canonical:(e,i)=>e.fn("Not",[e.fn("SubsetEqual",i)])},{name:"CartesianProduct",domain:["Function",["Some","Set"],"Set"],wikidata:"Q173740"},{name:"Complement",domain:["Function","Set","Set"],wikidata:"Q242767"},{name:"Intersection",domain:["Function",["Some","Set"],"Set"],wikidata:"Q185837",threadable:!0,associative:!0,commutative:!0,involution:!0,evaluate:function(e,i){return e.symbol("EmptySet")}},{name:"Union",domain:["Function",["Some","Set"],"Set"],wikidata:"Q185359",threadable:!0,associative:!0,commutative:!0,involution:!0,evaluate:function(e,i){return e.symbol("False")}},{name:"Set",domain:["Function",["Some","Anything"],"Set"]},{name:"SetMinus",domain:["Function","Set","Expresison","Set"],wikidata:"Q18192442",evaluate:function(e,i){return e.symbol("EmptySet")}},{name:"SymmetricDifference",domain:["Function",["Some","Set"],"Set"],wikidata:"Q1147242"}]},{functions:[{name:"Sequence"}]}],logic:st,relop:{functions:[{name:"Equal",domain:"RelationalOperator",commutative:!0,complexity:11e3,evaluate:(e,i)=>{if(i.length<2)return e.symbol("True");let t;for(const n of i)if(t){if(!1===t.isEqual(n))return e.symbol("False")}else t=n;return e.symbol("True")}},{name:"NotEqual",wikidata:"Q28113351",commutative:!0,complexity:11e3,domain:"RelationalOperator",evaluate:(e,i)=>{if(i.length<2)return e.symbol("False");let t;for(const n of i)if(t){if(!0===t.isEqual(n))return e.symbol("False")}else t=n;return e.symbol("True")}},{name:"Less",complexity:11e3,domain:"RelationalOperator",evaluate:(e,i)=>{if(i.length<2)return e.symbol("True");let t;for(const n of i){if(!n.isNumber)return;if(t){const i=e.fn("Subtract",[n,t]).N().sgn;if(null==i)return;if(i<=0)return e.symbol("False");t=n}else t=n}return e.symbol("True")}},{name:"NotLess",complexity:11e3,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("Less",i)])},{name:"Greater",complexity:11e3,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Less",i.reverse()),evaluate:(e,i)=>{if(i.length<2)return e.symbol("True");let t;for(const n of i){if(!n.isNumber)return;if(t){const i=e.fn("Subtract",[n,t]).N().sgn;if(null==i)return;if(i>=0)return e.symbol("False");t=n}else t=n}return e.symbol("True")}},{name:"NotGreater",complexity:11e3,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("Greater",i)])},{name:"LessEqual",complexity:11e3,domain:"RelationalOperator",evaluate:(e,i)=>{if(i.length<2)return e.symbol("True");let t;for(const n of i){if(!n.isNumber)return;if(t){const i=e.fn("Subtract",[n,t]).N().sgn;if(null==i)return;if(i<0)return e.symbol("False");t=n}else t=n}return e.symbol("True")}},{name:"NotLessNotEqual",complexity:11e3,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("LessEqual",i)])},{name:"GreaterEqual",complexity:11e3,domain:"RelationalOperator",canonical:(e,i)=>e._fn("LessEqual",i.reverse()),evaluate:(e,i)=>{if(i.length<2)return e.symbol("True");let t;for(const n of i){if(!n.isNumber)return;if(t){const i=e.fn("Subtract",[n,t]).N().sgn;if(null==i)return;if(i>0)return e.symbol("False");t=n}else t=n}return e.symbol("True")}},{name:"NotGreaterNotEqual",complexity:11e3,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("GreaterEqual",i)])},{name:"TildeFullEqual",description:"Indicate isomorphism, congruence and homotopic equivalence",domain:"RelationalOperator"},{name:"NotTildeFullEqual",complexity:11100,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("TildeFullEqual",i)])},{name:"TildeEqual",description:"Approximately or asymptotically equal",domain:"RelationalOperator",complexity:11e3},{name:"NotTildeEqual",complexity:11100,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("TildeEqual",i)])},{name:"Approx",complexity:11100,domain:"RelationalOperator"},{name:"NotApprox",complexity:11100,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("Approx",i)])},{name:"ApproxEqual",complexity:11100,domain:"RelationalOperator"},{name:"NotApproxEqual",complexity:11100,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("ApproxEqual",i)])},{name:"ApproxNotEqual",domain:"RelationalOperator",complexity:11100},{name:"NotApproxNotEqual",complexity:11100,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("ApproxNotEqual",i)])},{name:"Precedes",complexity:11100,domain:"RelationalOperator"},{name:"NotPrecedes",complexity:11100,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("Precedes",i)])},{name:"Succeeds",domain:"RelationalOperator"},{name:"NotSucceeds",complexity:11100,domain:"RelationalOperator",canonical:(e,i)=>e._fn("Not",[e._fn("Succeeds",i)])}]},polynomials:[{functions:[{name:"Expand",description:"Expand out products and positive integer powers",evaluate:(e,i)=>i[0]?function(e){if("Multiply"===(e=e.simplify()).head)return 2===e.nops?kt(e.op1,e.op2):e.ops.reduce(((e,i)=>kt(e,i)),e.engine.ONE);if("Power"===e.head){const i=e.op1.head;if("Multiply"===i)return e.engine.mul(e.op1.ops.map((i=>e.engine.power(i,e.op2))));if("Negate"===i){const i=e.op2.asSmallInteger;if(null!==i&&i>0)return i%2==0?e.engine.power(e.op1.op1,e.op2):e.engine.negate(e.engine.power(e.op1.op1,e.op2))}if("Add"===i){const i=e.op2.asSmallInteger;if(null!==i)return i>0?At(e.op1,i):e.engine.inverse(At(e.op1,-i))}}return e}(i[0]):e.symbol("Nothing")}]}],physics:{symbols:[{name:"Mu-0",description:"Vaccum permeability",constant:!0,wikidata:"Q1515261",domain:"RealNumber",value:125663706212e-17}]},trigonometry:ht};function Ft(e,i){if("object"!=typeof i||!("name"in i)||!i.name)throw Error("Missing name for definition "+JSON.stringify(i));if(!/[A-Za-z][A-Za-z0-9-]*/.test(i.name)&&1!==i.name.length)throw Error("Invalid definition name "+i.name)}function qt(e,i){if(void 0===i)return;if(Array.isArray(i)){for(const t of i)qt(e,t);return}e.context.dictionary||(e.context.dictionary={symbols:new Map,functions:new Map,symbolWikidata:new Map,functionWikidata:new Map});const t=e.context.dictionary;if(i.symbols)for(const n of i.symbols){Ft(0,n);const i=new wt(e,n);if(n.wikidata){if(t.symbolWikidata.has(n.wikidata))throw Error(`Duplicate symbol with wikidata ${n.wikidata}, ${n.name} and ${t.symbolWikidata.get(n.wikidata).name}`);t.symbolWikidata.set(n.wikidata,i)}if(t.symbols.has(n.name))throw Error(`Duplicate symbol definition ${n.name}:\n${JSON.stringify(t.symbols.get(n.name))}\n${JSON.stringify(n)}`);t.symbols.set(n.name,i)}if(i.functions)for(const n of i.functions){Ft(0,n);const i=It(e,n);if(t.functions.has(n.name)?t.functions.set(n.name,[...t.functions.get(n.name),i]):t.functions.set(n.name,[i]),n.wikidata){if(t.functionWikidata.has(n.wikidata))throw Error(`Duplicate function with wikidata ${n.wikidata}, ${n.name} and ${t.functionWikidata.get(n.wikidata).name}`);t.functionWikidata.set(n.wikidata,i)}}}function Vt(e){return Number.isInteger(e)?Math.floor(Math.log2(Math.abs(e))/Math.log2(10))+(e>0?1:2):2}const Pt=function e(i){var t,n;if(i.symbol)return 1;if(i.isLiteral){if(i.isZero)return 1;if(i.isInteger&&null!==i.asFloat)return Vt(i.asFloat);const[e,t]=i.rationalValue;if(null!==e&&null!==t)return Vt(e)+Vt(t)+1;if(i.complexValue){const e=i.complexValue;return Vt(e.re)+Vt(e.im)+1}if(i.isNumber)return 2}const r=i.head;return("string"==typeof r?1:e(r))+(null!==(n=null===(t=i.ops)||void 0===t?void 0:t.reduce(((i,t)=>i+e(t)),0))&&void 0!==n?n:0)};class Ct{constructor(e){this._items=e?e instanceof Ct?new Map(e._items):new Map(e):new Map}has(e){for(const i of this._items.keys())if(i.isSame(e))return!0;return!1}get(e){for(const[i,t]of this._items)if(i.isSame(e))return t}clear(){this._items.clear()}set(e,i){for(const t of this._items.keys())if(t.isSame(e))return void this._items.set(t,i);this._items.set(e,i)}delete(e){this._items.delete(e)}[Symbol.iterator](){return this._items.entries()}entries(){return this._items.entries()}}class Dt extends Qe{constructor(e,i,t){super(e,t),this._pattern=ni(i)?e.parse(i):e.box(i),this._pattern.isCanonical&&(this._canonicalPattern=this._pattern)}get hash(){return ui("Pattern")^this._pattern.hash}_purge(){var e;this._pattern._purge(),null===(e=this._canonicalPattern)||void 0===e||e._purge()}get json(){return yi(this.engine,"Pattern",[this._pattern])}get head(){return"Pattern"}get valueDomain(){return this.engine.domain("Pattern")}get isCanonical(){return!0}set isCanonical(e){}isSame(e){return this===e||e instanceof Dt&&this._pattern.isSame(e._pattern)}isEqual(e){return e instanceof Dt&&this._pattern.isEqual(e._pattern)}match(e,i){var t,n,r;let s=this._pattern;return null!==(t=null==i?void 0:i.exact)&&void 0!==t&&t||(this._canonicalPattern||(this._canonicalPattern=this._pattern.canonical),s=this._canonicalPattern),function(e,i,t){var n;return Tt(e,i,{},{numericTolerance:null!==(n=null==t?void 0:t.numericTolerance)&&void 0!==n?n:Le})||null}(e,s,{recursive:null!==(n=null==i?void 0:i.recursive)&&void 0!==n&&n,numericTolerance:null!==(r=null==i?void 0:i.numericTolerance)&&void 0!==r?r:0})}test(e,i){return null!==this.match(e,i)}count(e,i){let t=0;for(const n of e)null!==this.match(n,i)&&(t+=1);return t}subs(e){return new Dt(this.engine,this._pattern.subs(e).canonical)}}function Lt(e,i,t){const n=function(e){const i=e.match(/^__?_?([a-zA-Z0-9]+)/);return null===i?"":i[1]}(e);return""===n?t:t[n]?i.isSame(t[n])?t:null:(t[n]=i,t)}function Tt(e,i,t,n){const r=e.engine;if(i instanceof Ci)return e instanceof Ci?0===n.numericTolerance?i.isSame(e)?t:null:i.isEqualWithTolerance(e,n.numericTolerance)?t:null:null;const s=i.string;if(null!==s)return e.string===s?t:null;const a=i.symbol;if(null!==a)return a.startsWith("_")?Lt(a,e,t):a===e.symbol?t:null;if(i.nops!==e.nops)return null;const o=i.keys;if(null!==o){const i=e.keys;if(null===i)return null;for(const e of o){const r=Tt(i[e],o[e],t,n);if(null===r)return null;t=r}return t}if(i.ops){const s=i.head;if("string"==typeof s&&s.startsWith("_"))return Lt(s,r.box(e.head),t);{const i=Tt(r.box(e.head),r.pattern(s),t,n);if(null===i)return null;t=i}const a=e.ops;let o=Object.assign({},t),l=0;const u=i.ops.map((e=>r.pattern(e)));for(;l<i.nops;){const e=u[l],i=e.symbol;if(null!==i)if(i.startsWith("__")){let e=0;if(void 0===u[l+1])e=a.length+1;else{let i=!1;for(;!i&&e<a.length;)i=null!==Tt(a[e],u[l+1],t,n),e+=1;if(!i)return null}if(!i.startsWith("___")&&e<=1)return null;o=Lt(i,r.fn("Sequence",a.splice(0,e-1)),o)}else if(i.startsWith("_"))o=Lt(i,a.shift(),o);else{const i=Tt(a.shift(),e,t,n);if(null===i)return null;o=Object.assign(Object.assign({},o),i)}else{const i=Tt(a.shift(),e,t,n);if(null===i)return null;o=Object.assign(Object.assign({},o),i)}if(null===o)return null;l+=1}return o}return null}class zt extends Qe{constructor(e,i,t){if(super(e,t),this._name=i.normalize(),n=this._name,/[\u0000-\u0020\u0022\u0060\ufffe\uffff]/.test(n)||/^[\u0021\u0022\u0024-\u002e\u003a\u003f\u0040\u005b\u005d\u005e\u007b\u007d\u007e]$/.test(n[0]))throw Error(`The name "${this._name}" cannot be used as a symbol name`);var n;this._repairDefinition(),e._register(this)}get hash(){return void 0===this._hash&&(this._hash=ui(this._name)),this._hash}_purge(){var e;return null===(e=this._def)||void 0===e?void 0:e._purge()}get isPure(){var e,i,t;return null!==(t=(null===(e=this._def)||void 0===e?void 0:e.constant)&&(null===(i=this._def.value)||void 0===i?void 0:i.isPure))&&void 0!==t&&t}get isCanonical(){return!0}set isCanonical(e){}get wikidata(){var e,i,t;return null!==(t=null!==(e=this._wikidata)&&void 0!==e?e:null===(i=this._def)||void 0===i?void 0:i.wikidata)&&void 0!==t?t:""}get description(){return this._def&&this._def.description?"string"==typeof this._def.description?[this._def.description]:this._def.description:[]}get url(){var e,i;return null!==(i=null===(e=this._def)||void 0===e?void 0:e.url)&&void 0!==i?i:""}get complexity(){return 7}get head(){return"Symbol"}get symbol(){return this._name}get isMissing(){return"Missing"===this._name}get isLiteral(){return!1}get symbolDefinition(){return this._def}_repairDefinition(){if("_"===this._name[0])return;let e;this._wikidata&&(e=this.engine.getSymbolDefinition("",this._wikidata)),e||(e=this.engine.getSymbolDefinition(this._name),e&&e.wikidata&&this._wikidata&&e.wikidata!==this._wikidata&&(e=void 0)),e?(this._name=e.name,this._def=e):null!==this.engine.defaultDomain?(this._def=this.engine.defineSymbol(Object.assign({name:this._name,wikidata:this._wikidata,domain:this.engine.defaultDomain},_t(this.engine.defaultDomain))),this._name=this._def.name):this._def=void 0}get value(){var e;return null===(e=this._def)||void 0===e?void 0:e.value}set value(e){var i,t;if("_"===this._name[0])throw Error(`The value of the wildcard "${this._name}" cannot be changed`);let n;if(this.engine.forget(this._name),void 0!==e){const t=this.engine.box(e);n=null!==(i=t.value)&&void 0!==i?i:t.evaluate()}this._def?this._def.value=n:this._def=this.engine.defineSymbol({name:this._name,value:n,domain:null!==(t=this.engine.defaultDomain)&&void 0!==t?t:this.engine.domain("Anything")})}get numericValue(){var e,i;return null===(i=null===(e=this._def)||void 0===e?void 0:e.value)||void 0===i?void 0:i.numericValue}get domain(){var e,i,t;return"function"==typeof(null===(e=this._def)||void 0===e?void 0:e.domain)?this.engine.domain(this._def.domain(this.engine,[])):null!==(t=null===(i=this._def)||void 0===i?void 0:i.domain)&&void 0!==t?t:this.engine.domain("Anything")}set domain(e){if("_"===this._name[0])throw Error(`The domain of the wildcard "${this._name}" cannot be changed`);this._def?this._def.domain=e:this._def=this.engine.defineSymbol(Object.assign({name:this._name,domain:e},_t(e)))}get json(){return Ni(this.engine,this._name,{wikidata:this._wikidata})}get sgn(){var e,i,t,n;const r=null===(e=this.value)||void 0===e?void 0:e.sgn;return void 0!==r?r:!0===(null===(i=this._def)||void 0===i?void 0:i.zero)?0:!0===(null===(t=this._def)||void 0===t?void 0:t.positive)?1:!0===(null===(n=this._def)||void 0===n?void 0:n.negative)?-1:void 0}has(e){return"string"==typeof e?this._name===e:e.includes(this._name)}isSame(e){return e instanceof zt&&this._name===e._name}match(e,i){return e instanceof zt&&this._name===e._name?{}:null}isEqual(e){var i;if(this===e)return!0;if(null!==e.symbol)return e.symbol===this._name;const t=null===(i=this._def)||void 0===i?void 0:i.value;if(t)return t.isEqual(e);if(e.isZero){if(this.isZero)return!0;if(this.isNotZero)return!1}return this.isZero&&e.isNotZero||this.engine.ask(["NotEqual",this,e]).length,!1}isLess(e){if(null!==e.symbol&&e.symbol===this._name)return!1;if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e<0}}isLessEqual(e){if(null!==e.symbol&&e.symbol===this._name)return!0;if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e<=0}return this.isLess(e)||this.isEqual(e)}isGreater(e){if(null!==e.symbol&&e.symbol===this._name)return!1;if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e>0}}isGreaterEqual(e){if(null!==e.symbol&&e.symbol===this._name)return!0;if(e.isZero){const e=this.sgn;if(null===e)return!1;if(void 0!==e)return e>=0}return this.isGreater(e)||this.isEqual(e)}get isZero(){var e,i,t,n;return null!==(i=null===(e=this._def)||void 0===e?void 0:e.zero)&&void 0!==i?i:null===(n=null===(t=this._def)||void 0===t?void 0:t.value)||void 0===n?void 0:n.isZero}get isNotZero(){var e;const i=null===(e=this._def)||void 0===e?void 0:e.notZero;if("boolean"==typeof i)return i;const t=this.sgn;return"number"==typeof t?0!==t:void 0}get isOne(){var e;return null===(e=this._def)||void 0===e?void 0:e.one}get isNegativeOne(){var e;return null===(e=this._def)||void 0===e?void 0:e.negativeOne}get isOdd(){var e;return null===(e=this._def)||void 0===e?void 0:e.odd}get isEven(){var e;return null===(e=this._def)||void 0===e?void 0:e.even}get isPrime(){var e;return null===(e=this._def)||void 0===e?void 0:e.prime}get isComposite(){var e;return null===(e=this._def)||void 0===e?void 0:e.composite}get isInfinity(){var e;return null===(e=this._def)||void 0===e?void 0:e.infinity}get isNaN(){var e;return null===(e=this._def)||void 0===e?void 0:e.NaN}get isPositive(){var e;return null===(e=this._def)||void 0===e?void 0:e.positive}get isNonPositive(){var e;return null===(e=this._def)||void 0===e?void 0:e.nonPositive}get isNegative(){var e;return null===(e=this._def)||void 0===e?void 0:e.negative}get isNonNegative(){var e;return null===(e=this._def)||void 0===e?void 0:e.nonNegative}get isNumber(){var e;return null===(e=this._def)||void 0===e?void 0:e.number}get isInteger(){var e;return null===(e=this._def)||void 0===e?void 0:e.integer}get isRational(){var e;return null===(e=this._def)||void 0===e?void 0:e.rational}get isAlgebraic(){var e;return null===(e=this._def)||void 0===e?void 0:e.rational}get isReal(){var e;return null===(e=this._def)||void 0===e?void 0:e.real}get isExtendedReal(){var e;return null===(e=this._def)||void 0===e?void 0:e.extendedReal}get isComplex(){var e;return null===(e=this._def)||void 0===e?void 0:e.complex}get isImaginary(){var e;return null===(e=this._def)||void 0===e?void 0:e.imaginary}get canonical(){var e,i,t,n,r,s;return!1===(null===(e=this._def)||void 0===e?void 0:e.hold)&&null!==(s=null!==(n=null===(t=null===(i=this._def)||void 0===i?void 0:i.value)||void 0===t?void 0:t.value)&&void 0!==n?n:null===(r=this._def)||void 0===r?void 0:r.value)&&void 0!==s?s:this}simplify(e){var i,t;const n=(null==e?void 0:e.rules)&&null!==(i=this.replace(e.rules))&&void 0!==i?i:this;if(!1===(null===(t=n.symbolDefinition)||void 0===t?void 0:t.hold)){const i=n.value;if(i)return i.simplify(e)}return n}evaluate(e){var i,t,n,r;return!0===(null===(i=this.symbolDefinition)||void 0===i?void 0:i.hold)?this:null!==(r=null===(n=null===(t=this._def)||void 0===t?void 0:t.value)||void 0===n?void 0:n.evaluate(e))&&void 0!==r?r:this}N(e){var i,t,n,r;const s=null===(i=this._def)||void 0===i?void 0:i.value;return null!==(r=null!==(n=null!==(t=null==s?void 0:s.N(e))&&void 0!==t?t:null==s?void 0:s.evaluate(e))&&void 0!==n?n:s)&&void 0!==r?r:this}replace(e,i){return Ii(this,e,i)}subs(e){var i;return null!==(i=e[this._name])&&void 0!==i?i:this}}class Rt extends Qe{constructor(e,i,t){super(e,t),this._value=i}get domainExpression(){return this._value}get hash(){return void 0===this._hash&&(this._hash=Gt(this._value)),this._hash}get isCanonical(){return!0}isEqual(e){return!1}isSame(e){return!1}isSubdomainOf(e){return function(e,i){const t=i instanceof Rt?i._value:i,n=e instanceof Rt?e._value:e;if("string"==typeof n&&"string"==typeof t){const e=jt(n,t);if("boolean"==typeof e)return e}return!0}(this,e)}isMemberOf(e){return!1}get json(){return"string"==typeof this._value?Ni(this.engine,this._value,{wikidata:this._wikidata}):["Domain",this._value]}match(e,i){return e instanceof Rt&&this.isSame(e)?{}:null}get head(){return"Domain"}get domain(){return this.engine.domain("Domain")}get codomain(){return"string"==typeof this._value||"Function"!==this._value[0]?null:this.engine.domain(this._value[this._value.length-1])}is(e){return this.isSame(e)}get isNothing(){return"Nothing"===this._value}get isFunction(){return"string"!=typeof this._value&&"Function"===this._value[0]}get isPredicate(){if("string"==typeof this._value)return!1;if("Function"!==this._value[0])return!1;const e=this._value[this._value.length];return e instanceof Rt&&e.isBoolean}get isNumericFunction(){if("string"==typeof this._value)return!1;if("Function"!==this._value[0])return!1;for(const e of this._value)if(!jt(e,"Number"))return!1;return!0}get isBoolean(){return Zt(this._value)}get isRealFunction(){if("string"==typeof this._value)return!1;if("Function"!==this._value[0])return!1;for(const e of this._value)if(!jt(e,"ExtendedRealNumber"))return!1;return!0}get isNumeric(){return this.isSubdomainOf("Number")}get isLogicOperator(){return!("string"==typeof this._value||"Function"!==this._value[0]||this._value.length<2||this._value.length>3||!Zt(this._value[this._value.length-1])||!Zt(this._value[1])||3===this._value.length&&!Zt(this._value[2]))}get isRelationalOperator(){return"string"!=typeof this._value&&"Function"===this._value[0]&&3===this._value.length&&!!Zt(this._value[this._value.length-1])}}function $t(e,i,t){if(i instanceof Rt)return i;let n;if(!n&&"string"==typeof i){const r={Function:["Function",["Optional",["Some","Anything"]],"Anything"],NumericFunction:["Function",["Optional",["Some","Number"]],"Number"],RealFunction:["Function",["Optional",["Some","ExtendedRealNumber"]],"ExtendedRealNumber"],TrigonometricFunction:["Function","Number","Number"],HyperbolicFunction:["Function","Number","Number"],LogicOperator:["Function","MaybeBoolean",["Optional","MaybeBoolean"],"MaybeBoolean"],Predicate:["Function",["Optional",["Some","Anything"]],"MaybeBoolean"],RelationalOperator:["Function","Anything","Anything","MaybeBoolean"]}[i];r&&(n=new Rt(e,r,t))}return n||(n=new Rt(e,i,t)),n}function jt(e,i){var t,n;return"string"==typeof e&&(null!==(n=null===(t={Number:["Number","ExtendedComplexNumber","ExtendedRealNumber","ComplexNumber","ImaginaryNumber","RealNumber","TranscendentalNumber","AlgebraicNumber","RationalNumber","Integer","NegativeInteger","NegativeNumber","NonNegativeNumber","NonNegativeInteger","NonPositiveNumber","NonPositiveInteger","PositiveInteger","PositiveNumber"],ExtendedComplexNumber:["Number","ExtendedRealNumber","ComplexNumber","ImaginaryNumber","RealNumber","TranscendentalNumber","AlgebraicNumber","RationalNumber","Integer","NegativeInteger","NegativeNumber","NonNegativeNumber","NonNegativeInteger","NonPositiveNumber","NonPositiveInteger","PositiveInteger","PositiveNumber"],ExtendedRealNumber:["ExtendedRealNumber","RealNumber","TranscendentalNumber","AlgebraicNumber","RationalNumber","Integer","NegativeInteger","NegativeNumber","NonNegativeNumber","NonNegativeInteger","NonPositiveNumber","NonPositiveInteger","PositiveInteger","PositiveNumber"],ComplexNumber:["ComplexNumber","ImaginaryNumber"],ImaginaryNumber:["ImaginaryNumber"],RealNumber:["RealNumber","TranscendentalNumber","AlgebraicNumber","RationalNumber","Integer","NegativeInteger","NegativeNumber","NonNegativeNumber","NonNegativeInteger","NonPositiveNumber","NonPositiveInteger","PositiveInteger","PositiveNumber"],TranscendentalNumber:["TranscendentalNumber"],AlgebraicNumber:["AlgebraicNumber","RationalNumber","Integer","NegativeInteger","NonNegativeInteger","NonPositiveInteger","PositiveInteger"],RationalNumber:["RationalNumber","Integer","NegativeInteger","NonNegativeInteger","NonPositiveInteger","PositiveInteger"],Integer:["Integer","NegativeInteger","NonNegativeInteger","NonPositiveInteger","PositiveInteger"],NegativeNumber:["NegativeNumber","NegativeInteger"],NonNegativeNumber:["NonNegativeNumber","PositiveNumber","NonNegativeInteger","PositiveInteger"],NonPositiveNumber:["NonPositiveNumber","NegativeNumber","NegativeInteger"],PositiveNumber:["PositiveNumber","PositiveInteger"],NegativeInteger:["NegativeInteger"],PositiveInteger:["PositiveInteger"],NonNegativeInteger:["NonNegativeInteger","PositiveInteger"],NonPositiveInteger:["NegativeInteger"]}[i])||void 0===t?void 0:t.includes(e))&&void 0!==n?n:void 0)}function Zt(e){return"string"==typeof e&&["Boolean","MaybeBoolean","True","False","Maybe"].includes(e)}function Gt(e){if("string"==typeof e)return ui("domain:"+e);let i="";for(const t of e)i+=""+Gt(t);return ui(i)}class Ht{constructor(e){var i,t,n,r,s;this._cache={},this._commonSymbols={True:null,False:null,Maybe:null,All:null,Missing:null,Nothing:null,None:null,Undefined:null,Pi:null,ImaginaryUnit:null},this._commonNumbers={0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null},this._commonDomains={Anything:null,Nothing:null,Boolean:null,MaybeBoolean:null,String:null,Domain:null,Symbol:null,Integer:null,RationalNumber:null,AlgebraicNumber:null,RealNumber:null,ExtendedRealNumber:null,ImaginaryNumber:null,ComplexNumber:null,ExtendedComplexNumber:null,Number:null,PositiveInteger:null,TranscendentalNumber:null,PositiveNumber:null,Function:null,NumericFunction:null,RealFunction:null,TrigonometricFunction:null,HyperbolicFunction:null,LogicOperator:null,Predicate:null,RelationalOperator:null,Expression:null,BooleanExpression:null,NumericExpression:null},this._latexDictionary=null==e?void 0:e.latexDictionary,this._jsonSerializationOptions={exclude:[],shorthands:["function","symbol","string","dictionary","number"],metadata:[],repeatingDecimal:!0},this._stats={highwaterMark:0,symbols:new Set,expressions:new Set},this._defaultDomain=null,this._numericMode=null!==(i=null==e?void 0:e.numericMode)&&void 0!==i?i:"auto",this._precision=Math.max(null!==(t=null==e?void 0:e.numericPrecision)&&void 0!==t?t:100,Math.floor(De)),this._decimal=l.exports.Decimal.clone({precision:this._precision}),this.decimal=e=>new this._decimal(e),this.complex=(e,i)=>new c.exports.Complex(e,i),this.tolerance=null!==(n=null==e?void 0:e.tolerance)&&void 0!==n?n:Le,this.ZERO=new Ci(this,0),this.ONE=new Ci(this,1),this.TWO=new Ci(this,2),this.HALF=new Ci(this,[1,2]),this.NEGATIVE_ONE=new Ci(this,-1),this.I=new Ci(this,c.exports.Complex.I),this.NAN=new Ci(this,NaN),this.POSITIVE_INFINITY=new Ci(this,1/0),this.NEGATIVE_INFINITY=new Ci(this,-1/0),this.COMPLEX_INFINITY=new Ci(this,c.exports.Complex.INFINITY),this.purge();const a=null!==(r=null==e?void 0:e.dictionaries)&&void 0!==r?r:Ht.getDictionaries();this.pushScope({dictionary:a,scope:{warn:e=>{for(const i of e)i.message},timeLimit:2,memoryLimit:1,recursionLimit:1024}}),null===(null==e?void 0:e.assumptions)?this.pushScope():this.pushScope({assumptions:null==e?void 0:e.assumptions});for(const e of Object.keys(this._commonDomains))this._commonDomains[e]&&!this._commonDomains[e].symbolDefinition&&this._commonDomains[e]._repairDefinition();for(const e of Object.keys(this._commonSymbols))this._commonSymbols[e]&&!this._commonSymbols[e].symbolDefinition&&this._commonSymbols[e]._repairDefinition();this._defaultDomain=null===(null==e?void 0:e.defaultDomain)?null:this.domain(null!==(s=null==e?void 0:e.defaultDomain)&&void 0!==s?s:"ExtendedRealNumber")}static getDictionaries(e="all"){return Mt(e)}purge(){var e,i;this.DECIMAL_NEGATIVE_ONE=this.decimal(-1),this.DECIMAL_NAN=this.decimal(NaN),this.DECIMAL_ZERO=this.decimal(0),this.DECIMAL_ONE=this.decimal(1),this.DECIMAL_TWO=this.decimal(2),this.DECIMAL_HALF=this.DECIMAL_ONE.div(this.DECIMAL_TWO),this.DECIMAL_PI=this.DECIMAL_NEGATIVE_ONE.acos();const t=this._stats.symbols.values(),n=this._stats.expressions.values();this._stats.symbols=new Set,this._stats.expressions=new Set;for(const e of t)e._purge();for(const e of n)e._purge();for(const e of Object.values(this._commonDomains))null==e||e._purge();for(const e of Object.values(this._commonSymbols))null==e||e._purge();let r=this.context;for(;r;){if(null===(e=r.dictionary)||void 0===e?void 0:e.functions)for(const[e,i]of r.dictionary.functions)for(const e of i)e._purge();if(null===(i=r.dictionary)||void 0===i?void 0:i.symbols)for(const[e,i]of r.dictionary.symbols)i._purge();r=r.parentScope}for(const e of Object.keys(this._cache))this._cache[e].value&&(this._cache[e].purge?this._cache[e].value=this._cache[e].purge(this._cache[e].value):delete this._cache[e])}_register(e){this._stats.highwaterMark+=1}_unregister(e){}get stats(){const e=this._stats.expressions;return this._stats.expressions=null,this._stats.expressions=e,Object.assign({},this._stats)}get precision(){return this._precision}set precision(e){const i=this._precision;"machine"===e&&(e=Math.floor(De)),e!==i&&(this._latexSyntax&&this.latexSyntax.updateOptions({precision:e,avoidExponentsInRange:[-6,e]}),this._precision=Math.max(e,Math.floor(De)),this._decimal=this._decimal.config({precision:this._precision}),this.purge())}get numericMode(){return this._numericMode}set numericMode(e){e!==this._numericMode&&(this._numericMode=e,"complex"!==e&&"machine"!==e||(this._precision=Math.floor(De)),this._latexSyntax&&this.latexSyntax.options.precision>this._precision&&this.latexSyntax.updateOptions({precision:this._precision}),this.purge())}get timeLimit(){let e=this.context;for(;e;){if(void 0!==e.timeLimit)return e.timeLimit;e=e.parentScope}return 2}get iterationLimit(){let e=this.context;for(;e;){if(void 0!==e.iterationLimit)return e.iterationLimit;e=e.parentScope}return 1024}get recursionLimit(){let e=this.context;for(;e;){if(void 0!==e.recursionLimit)return e.recursionLimit;e=e.parentScope}return 1024}get defaultDomain(){return this._defaultDomain}set defaultDomain(e){this._defaultDomain=null===e?null:this.domain(e)}get tolerance(){return this._tolerance}set tolerance(e){this._tolerance="number"==typeof e&&Number.isFinite(e)?Math.max(e,0):Le,this._decimalTolerance=this.decimal(this._tolerance)}chop(e){return"number"==typeof e&&Math.abs(e)<=this._tolerance||e instanceof l.exports.Decimal&&e.abs().lte(this._decimalTolerance)||e instanceof c.exports.Complex&&Math.abs(e.re)<=this._tolerance&&Math.abs(e.im)<=this._tolerance?0:e}get latexSyntax(){return this._latexSyntax||(this._latexSyntax=new Ce({computeEngine:this,dictionary:this._latexDictionary,precision:this.precision,avoidExponentsInRange:[-6,this.precision],onError:e=>{throw Error(e[0].message.toString())}})),this._latexSyntax}static getLatexDictionary(e="all"){return Ce.getDictionary(e)}set costFunction(e){"function"!=typeof e&&(this._cost=Pt),this._cost=e}get costFunction(){var e;return null!==(e=this._cost)&&void 0!==e?e:Pt}getSymbolDefinition(e,i){var t,n,r;let s,a=this.context;if(i)for(;a&&!s;)s=null===(t=a.dictionary)||void 0===t?void 0:t.symbolWikidata.get(i),a=a.parentScope;for(;a&&!s;)i&&(s=null===(n=a.dictionary)||void 0===n?void 0:n.symbolWikidata.get(i)),s||(s=null===(r=a.dictionary)||void 0===r?void 0:r.symbols.get(e)),a=a.parentScope;return s}getFunctionDefinition(e,i){var t,n;if(!i){let i=this.context;for(;i;){const n=null===(t=i.dictionary)||void 0===t?void 0:t.functions.get(e);if(n)return n[0];i=i.parentScope}return}const r=this.domain(["Function",...null==i?void 0:i.map((e=>e.domain.json))]);let s=this.context;for(;s;){const t=null===(n=s.dictionary)||void 0===n?void 0:n.functions.get(e);if(t)for(const e of t)if(e.domain)if("function"==typeof e.domain){const t=this.domain(e.domain(this,i));if(t&&r.isSubdomainOf(t))return e}else if(r.isSubdomainOf(e.domain))return e;s=s.parentScope}}defineSymbol(e){const i=new wt(this,e);return this.context.dictionary||(this.context.dictionary={symbols:new Map,functions:new Map,symbolWikidata:new Map,functionWikidata:new Map}),e.name&&this.context.dictionary.symbols.set(e.name,i),e.wikidata&&this.context.dictionary.symbolWikidata.set(e.wikidata,i),i}pushScope(e){var i;if(this.context=Object.assign(Object.assign({},null==e?void 0:e.scope),{parentScope:this.context,assumptions:this.context?new Ct(this.context.assumptions):new Ct}),qt(this,null==e?void 0:e.dictionary),void 0!==(null==e?void 0:e.assumptions))for(const t of e.assumptions)this.assume(null!==(i=this.parse(ri(t)))&&void 0!==i?i:t)}popScope(){var e;const i=null===(e=this.context)||void 0===e?void 0:e.parentScope;if(this.context.warnings){const e=[...this.context.warnings];this.context.warnings=[],this.context.warn&&this.context.warn(e)}i&&this.context.warnings&&this.context.warnings.length>0&&(i.warnings?i.warnings=[...i.warnings,...this.context.warnings]:i.warnings=[...this.context.warnings]),this.context=i}get assumptions(){return this.context.assumptions||(this.context.assumptions=new Ct),this.context.assumptions}shouldContinueExecution(){return void 0===this.deadline||this.deadline>=Date.now()}checkContinueExecution(){if(!this.shouldContinueExecution())throw Error("timeout")}assert(e,i,t,n){e||this.signal(i,t,n)}signal(e,i,t){"object"==typeof e&&"message"in e?t=e.message:e.latex,void 0===t||"string"==typeof t||Array.isArray(t)&&t.map((e=>e.toString())).join(", ")}cache(e,i,t){var n;if(void 0===this._cache[e])try{this._cache[e]={build:i,purge:t,value:i()}}catch(e){}return null===(n=this._cache[e])||void 0===n?void 0:n.value}box(e){return Li(this,e)}fn(e,i,t){var n,r,s,a,o,l,u,c,h;if("Hold"===e)return this._fn("Hold",i,t);if(i=i.map((e=>e.canonical)),"String"===e)return this.string(i.map((e=>{var i;return null!==(i=e.string)&&void 0!==i?i:e.latex})).join(""),t);if("Symbol"===e)return this.symbol(i.map((e=>{var i;return null!==(i=e.string)&&void 0!==i?i:e.latex})).join(""),t);if(("Divide"===e||"Rational"===e)&&2===i.length){const e=i[0].asSmallInteger,t=i[1].asSmallInteger;if(null!==e&&null!==t&&Number.isInteger(e)&&Number.isInteger(t))return this.number([e,t])}if("Number"===e){if(1===i.length){const e=i[0],t=null!==(r=null!==(n=e.decimalValue)&&void 0!==n?n:e.complexValue)&&void 0!==r?r:e.machineValue;if(null!==t)return this.number(t);const[s,a]=e.rationalValue;if(null!==s&&null!==a)return this.number([s,a])}return this.NAN}if("Complex"===e){if(1===i.length){const e=i[0].asFloat;return null!==e?this.number(this.complex(0,e)):this.mul([i[0],this.I])}if(2===i.length){const e=i[0].asFloat,n=i[1].asFloat;return null!==e&&null!==n&&this.number(this.complex(e,n)),0===n?i[0]:this.add([i[0],this.mul([i[1],this.I])],t)}}if("Negate"===e&&1===i.length)return ji(null!==(s=i[0])&&void 0!==s?s:this.symbol("Missing"),t);if("Single"===e||"Pair"===e||"Triple"===e||"KeyValuePair"===e)return this.tuple(i,t);if("Dictionary"===e){const e={};for(const t of i)if("Tuple"===t.head){const i=t.op1;if(!i.isMissing){t.op2;let n=null!==(a=i.symbol)&&void 0!==a?a:i.string;if(!n&&i.isLiteral){const e=null!==(o=i.machineValue)&&void 0!==o?o:i.asSmallInteger;e&&Number.isFinite(e)&&Number.isInteger(e)&&(n=e.toString())}n&&e[n]}}return new Si(this,e,t)}return"Add"===e?this.add(i,t):"Multiply"===e?this.mul(i,t):"Divide"===e?this.divide(null!==(l=i[0])&&void 0!==l?l:this.symbol("Missing"),null!==(u=i[1])&&void 0!==u?u:this.symbol("Missing"),t):"Power"===e?this.power(null!==(c=i[0])&&void 0!==c?c:this.symbol("Missing"),null!==(h=i[1])&&void 0!==h?h:this.symbol("Missing"),t):new Mi(this,e,i,t).canonical}_fn(e,i,t){const n=new Mi(this,e,i,t);return n.isCanonical=!0,n}error(e,i,t){return this._fn("Error",[e,this.string(i),this.box(t)])}add(e,i){const t=Wi(this,e);return(null==i?void 0:i.latex)&&(t.latex=i.latex),(null==i?void 0:i.wikidata)&&(t.wikidata=i.wikidata),t}mul(e,i){const t=Yi(this,e);return(null==i?void 0:i.latex)&&(t.latex=i.latex),(null==i?void 0:i.wikidata)&&(t.wikidata=i.wikidata),t}power(e,i,t){var n;let r=null;if("number"==typeof i?r=i:Array.isArray(i)&&1===i[1]&&(r=i[0]),1===r)return e;if(-1===r&&e.isLiteral){const[i,t]=e.rationalValue;if(null!==i&&null!==t)return this.number([t,i]);const n=e.asSmallInteger;if(null!==n)return this.number([1,n])}return("number"==typeof i||Array.isArray(i))&&(i=this.number(i)),null!==(n=Qi(this,e,i,t))&&void 0!==n?n:this._fn("Power",[e,i],t)}inverse(e,i){var t;let n=this.NEGATIVE_ONE;if("Power"===e.head){if(e.op2.isNegativeOne)return e.op1;n=ji(e.op2),e=e.op1}return null!==(t=Qi(this,e,n,i))&&void 0!==t?t:this._fn("Power",[e,n],i)}negate(e,i){return ji(e,i)}divide(e,i,t){const n=et(this,e,i);return(null==t?void 0:t.latex)&&(n.latex=t.latex),(null==t?void 0:t.wikidata)&&(n.wikidata=t.wikidata),n}pair(e,i,t){return this._fn("Tuple",[e,i],t)}tuple(e,i){return this._fn("Tuple",e,i)}string(e,i){return new Di(this,e,i)}symbol(e,i){if("Infinity"===e)return this.POSITIVE_INFINITY;if("+Infinity"===e)return this.POSITIVE_INFINITY;if("-Infinity"===e)return this.NEGATIVE_INFINITY;if("Half"===e)return this.HALF;let t=this._commonSymbols[e];return t?(null==i?void 0:i.wikidata)&&t.wikidata&&t.wikidata!==i.wikidata?new zt(this,e,i):t:null===t?(t=new zt(this,e),this._commonSymbols[e]=t,t):new zt(this,e,i)}domain(e,i){return e instanceof Rt?e:(e instanceof Qe&&e.symbol&&(e=e.symbol),"string"==typeof e&&(null===this._commonDomains[e]&&(this._commonDomains[e]=$t(this,e,i)),this._commonDomains[e]&&this._commonDomains[e]),e instanceof Qe?$t(this,"Anything"):$t(this,e,i))}number(e,i){var t,n;if(Array.isArray(e)&&1===e[1]&&(e=e[0]),"number"==typeof e){if(-1===e)return this.NEGATIVE_ONE;if(null===this._commonNumbers[e]&&(this._commonNumbers[e]=null!==(t=Ti(this,e))&&void 0!==t?t:null),this._commonNumbers[e])return this._commonNumbers[e]}return null!==(n=Ti(this,e,i))&&void 0!==n?n:this.NAN}rules(e){return wi(this,e)}pattern(e){return new Dt(this,e)}parse(e){var i;return null===e?null:this.box(this.latexSyntax.parse(null!==(i=ri(e))&&void 0!==i?i:e))}serialize(e){return"object"==typeof e&&"json"in e?this.latexSyntax.serialize(e.json):this.latexSyntax.serialize(e)}get latexOptions(){return Object.assign(Object.assign({},this.latexSyntax.options),this.latexSyntax.serializer.options)}set latexOptions(e){this.latexSyntax.updateOptions(e)}get jsonSerializationOptions(){return this._jsonSerializationOptions}set jsonSerializationOptions(e){e.exclude&&(this._jsonSerializationOptions.exclude=[...e.exclude]),e.shorthands&&("all"===e.shorthands||e.shorthands.includes("all")?this._jsonSerializationOptions.shorthands=["function","symbol","string","dictionary","number"]:this._jsonSerializationOptions.shorthands=[...e.shorthands]),e.metadata&&("all"===e.metadata||e.metadata.includes("all")?this._jsonSerializationOptions.metadata=["latex","wikidata"]:this._jsonSerializationOptions.metadata=[...e.metadata])}ask(e){const i=this.pattern(e),t=[];for(const[e,n]of this.assumptions){const r=i.match(e,{numericTolerance:this._tolerance});null!==r&&!0===n&&t.push(r)}return t}assume(e,i){try{const t=ri(e);let n=t?this.parse(t):this.box(e);return i&&(n=this.box(["Element",e,this.domain(i)])),"not-a-predicate"}catch(e){return"internal-error"}}forget(e){var i;if(void 0!==e){if(Array.isArray(e))for(const i of e)this.forget(i);else if("string"==typeof e){null===(i=this.context.dictionary)||void 0===i||i.symbols.delete(e);for(const[i,t]of this.assumptions)ai(i).includes(e)&&this.assumptions.delete(i)}}else this.assumptions.clear()}}e.ComputeEngine=Ht,e.getVars=ai,e.isEnvironmentEntry=a,e.isInfixEntry=n,e.isMatchfixEntry=t,e.isPostfixEntry=s,e.isPrefixEntry=r,e.isSymbolEntry=i,e.version="0.6.0",Object.defineProperty(e,"__esModule",{value:!0})}));